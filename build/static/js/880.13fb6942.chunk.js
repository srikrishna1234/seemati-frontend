"use strict";(self.webpackChunkseemati_ladies_wear=self.webpackChunkseemati_ladies_wear||[]).push([[880],{2603:(e,t,i)=>{i.d(t,{J$:()=>s,Ku:()=>a});var r=i(5043);i(579);const n=(0,r.createContext)(null),o=(0,r.createContext)(null);function l(e){const t=e.reduce((e,t)=>e+Number(t.price||0)*(t.quantity||1),0),i=t>999?0:60,r=Math.round(.05*t);return{subtotal:t,shipping:i,tax:r,discount:0,total:t+i+r-0}}function s(){const e=(0,r.useContext)(n);return null!==e&&void 0!==e?e:{items:[],totals:l([])}}function a(){const e=(0,r.useContext)(o);return null!==e&&void 0!==e?e:()=>{}}},5026:(e,t,i)=>{i.d(t,{A:()=>l});var r=i(9722);const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ADMIN_TOKEN:"seemati123",REACT_APP_API_URL:"https://api.seemati.in/api",REACT_APP_PRODUCTS_PATH:"/products"}.REACT_APP_API_BASE||"http://localhost:4000",o=r.A.create({baseURL:n,withCredentials:!0,timeout:6e4});o.interceptors.request.use(e=>e,e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>(e&&e.response,Promise.reject(e)));const l=o},6880:(e,t,i)=>{i.r(t),i.d(t,{default:()=>j});var r=i(5043),n=i(8163),o=i(5026);const l=String("https://api.seemati.in/api").replace(/\/+$/,"");function s(e){if(!e)return"".concat(l,"/uploads/placeholder.png");const t="string"===typeof e?e:e.url||e.path||e.filename||"";return t?/^https?:\/\//i.test(t)||/^\/\//.test(t)?t:t.startsWith("/")?"".concat(l).concat(t):"".concat(l,"/uploads/").concat(t):"".concat(l,"/uploads/placeholder.png")}var a=i(8009),d=i(2603);const c={"#000000":"black","#FFFFFF":"white","#FF0000":"red","#00FF00":"lime","#0000FF":"blue","#FFFF00":"yellow","#00FFFF":"cyan","#FF00FF":"magenta","#C0C0C0":"silver","#808080":"gray","#800000":"maroon","#808000":"olive","#008000":"green","#800080":"purple","#008080":"teal","#000080":"navy","#F5F5DC":"beige","#FFC0CB":"pink","#FFA500":"orange","#A52A2A":"brown","#1026CB":"blue","#1A84C7":"teal","#E40C0C":"red","#010913":"black","#FFDDEE":"light pink","#F6F6F6":"off white","#333333":"dark gray","#4CAF50":"green","#FFEB3B":"yellow","#9C27B0":"purple","#3F51B5":"indigo"};function u(e){if(!e)return null;let t=String(e).trim();if(!t.length)return null;if("#"!==t[0]&&(t="#"+t),t=t.toUpperCase(),4===t.length){const e=t[1],i=t[2],r=t[3];t="#".concat(e).concat(e).concat(i).concat(i).concat(r).concat(r)}return/^#[0-9A-F]{6}$/.test(t)?t:null}function g(e){const t=u(e);if(!t)return null;return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16)}}function p(e,t){return(e.r-t.r)**2+(e.g-t.g)**2+(e.b-t.b)**2}function m(e){const t=u(e);if(!t)return null;if(c[t])return c[t];const i=g(t);if(!i)return t;let r=t,n=1/0;for(const[o,l]of Object.entries(c)){const e=p(i,g(o));e<n&&(n=e,r=l||o)}return r||t}const h={hexToName:m,formatColorName:function(e){const t=m(e),i=u(e);return i?!t||t.toUpperCase().startsWith("#")?i:"".concat(t," (").concat(i,")"):t||""},normalizeHex:u};var f=i(579);const v="wishlist_v1";function y(){try{const e=localStorage.getItem(v)||"[]",t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}}function x(e){try{localStorage.setItem(v,JSON.stringify(e));try{window.dispatchEvent(new Event("wishlist-updated"))}catch(t){}}catch(t){console.warn("saveWishlist failed",t)}}function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e||(e=document.body);const{count:i=20,spread:r=160,lifetime:n=900,colors:o=["#f59e0b","#ef4444","#10b981","#0b5cff","#7c3aed"]}=t,l=e.getBoundingClientRect(),s=document.createElement("div");s.style.position="absolute",s.style.left="".concat(l.left+window.scrollX,"px"),s.style.top="".concat(l.top+window.scrollY,"px"),s.style.width="".concat(l.width,"px"),s.style.height="".concat(l.height,"px"),s.style.pointerEvents="none",s.style.overflow="visible",s.style.zIndex=9999,document.body.appendChild(s);const a=l.width/2,d=l.height/2,c=[];for(let g=0;g<i;g++){const e=document.createElement("div"),t=Math.floor(8*Math.random())+6;e.style.position="absolute",e.style.left="".concat(a-t/2,"px"),e.style.top="".concat(d-t/2,"px"),e.style.width="".concat(t,"px"),e.style.height="".concat(t,"px"),e.style.borderRadius="4px",e.style.background=o[Math.floor(Math.random()*o.length)],e.style.opacity="1",e.style.transform="translate3d(0,0,0) scale(1)",e.style.willChange="transform, opacity",s.appendChild(e);const i=Math.random()*Math.PI*2,n=2+Math.random()*(r/30),l=Math.cos(i)*n,u=Math.sin(i)*n-1.5*Math.random(),g=10*(Math.random()-.5);c.push({el:e,x:a,y:d,vx:l,vy:u,rot:g})}const u=performance.now();requestAnimationFrame(function e(t){const i=t-u,r=Math.min(1,i/n);c.forEach(e=>{e.x+=e.vx,e.y+=e.vy,e.vy+=.06;const t=1-.6*r;e.el.style.transform="translate3d(".concat(e.x-a,"px, ").concat(e.y-d,"px, 0) rotate(").concat(e.rot*r,"deg) scale(").concat(Math.max(.2,t),")"),e.el.style.opacity=String(1-r)}),r<1?requestAnimationFrame(e):setTimeout(()=>{try{s.remove()}catch(e){}},60)})}function w(e){if(!e||"string"!==typeof e)return!1;const t=e.toLowerCase();return t.endsWith(".mp4")||t.endsWith(".webm")||t.endsWith(".ogg")}function j(e){var t,i,l,c,u,g;let{products:p=[]}=e;const{slug:m}=(0,n.g)(),v=(0,n.Zp)(),j=(0,d.Ku)(),[A,C]=(0,r.useState)(()=>{try{var e;return Array.isArray(p)&&p.length>0&&(null!==(e=p.find(e=>e.slug===m||e._id===m||e.id===m))&&void 0!==e)?e:null}catch(t){return null}}),[S,k]=(0,r.useState)(!A),[_,I]=(0,r.useState)(null),[F,E]=(0,r.useState)(!1),M=(0,r.useRef)(null),{imgRef:R,onImgMouseMove:N,onImgEnter:P,onImgLeave:T}=function(){const e=(0,r.useRef)(null);return{imgRef:e,onImgMouseMove:function(t){const i=e.current;if(!i)return;const r=i.getBoundingClientRect(),n=t.clientX-r.left,o=t.clientY-r.top,l=n/r.width*100,s=o/r.height*100;i.style.transformOrigin="".concat(l,"% ").concat(s,"%")},onImgEnter:function(){const t=e.current;t&&(t.style.transition="transform 160ms cubic-bezier(.2,.9,.2,1)",t.style.transform="scale(1.22)",t.style.willChange="transform")},onImgLeave:function(){const t=e.current;t&&(t.style.transform="scale(1)",t.style.transition="transform 260ms cubic-bezier(.2,.9,.2,1)",setTimeout(()=>{t&&(t.style.willChange="")},300))}}}(),[W,z]=(0,r.useState)(!1),[L,U]=(0,r.useState)(null),[B,q]=(0,r.useState)(null),[O,H]=(0,r.useState)(1),[D,K]=(0,r.useState)([]),[J,V]=(0,r.useState)(0),[Y,$]=(0,r.useState)([]),[X,Z]=(0,r.useState)(null);(0,r.useEffect)(()=>{try{var e,t;const i=y(),r=null!==(e=null!==(t=null===A||void 0===A?void 0:A._id)&&void 0!==t?t:null===A||void 0===A?void 0:A.id)&&void 0!==e?e:null===A||void 0===A?void 0:A.slug;z(i.some(e=>{var t,i,n;return(null!==(t=null!==(i=null!==(n=e.productId)&&void 0!==n?n:e._id)&&void 0!==i?i:e.id)&&void 0!==t?t:e.slug)===r}))}catch(i){z(!1)}A&&(Array.isArray(A.colors)&&A.colors.length>0?U(e=>null!==e&&void 0!==e?e:A.colors[0]):U(null),Array.isArray(A.sizes)&&A.sizes.length>0?q(e=>null!==e&&void 0!==e?e:A.sizes[0]):q(null),H(1))},[null===A||void 0===A?void 0:A.slug,null===A||void 0===A?void 0:A.colors,null===A||void 0===A?void 0:A.sizes,null===A||void 0===A?void 0:A._id,null===A||void 0===A?void 0:A.id]),(0,r.useEffect)(()=>{let e=!0;return async function(){if(A)return void k(!1);k(!0),I(null);const t=["/api/products?slug=".concat(encodeURIComponent(m)),"/api/products/".concat(encodeURIComponent(m))];let i=null;for(const u of t)try{const t=await o.A.get(u);if(!e)return;const c=t.data;let g=null;var r,n;if(c)if(Array.isArray(c))g=null!==(r=null!==(n=c.find(e=>e.slug===m||e._id===m||e.id===m))&&void 0!==n?n:c[0])&&void 0!==r?r:null;else if(Array.isArray(c.products)){var l,s;g=null!==(l=null!==(s=c.products.find(e=>e.slug===m||e._id===m||e.id===m))&&void 0!==s?s:c.products[0])&&void 0!==l?l:null}else if(c.product)g=c.product;else if(c._id||c.slug||c.id)g=c;else if(c.items&&Array.isArray(c.items)){var a,d;g=null!==(a=null!==(d=c.items.find(e=>e.slug===m||e._id===m||e.id===m))&&void 0!==d?d:c.items[0])&&void 0!==a?a:null}if(g)return C(g),void k(!1);i="No product found in response from ".concat(u)}catch(c){i=c.message||String(c),console.warn("[ProductDetail] fetch error",c)}e&&(k(!1),C(null),I(i||"Product not found."))}(),()=>{e=!1}},[m]),(0,r.useEffect)(()=>{const e=Array.isArray(null===A||void 0===A?void 0:A.images)?[...A.images]:[];0===e.length&&null!==A&&void 0!==A&&A.image&&e.push(A.image),0===e.length&&null!==A&&void 0!==A&&A.thumbnail&&e.push(A.thumbnail);const t=function(e){if(!Array.isArray(e))return[];const t=new Set,i=[];for(const n of e)try{const e=s(n);if(!e)continue;if(t.has(e))continue;t.add(e),i.push(e)}catch(r){continue}return i}(e);K(t),V(0),Z(null);const i=Array.isArray(null===A||void 0===A?void 0:A.colors)?A.colors:null!==A&&void 0!==A&&A.colors?String(A.colors).split(",").map(e=>e.trim()).filter(Boolean):[],r={},n=(null===A||void 0===A?void 0:A.colorImages)||(null===A||void 0===A?void 0:A.color_image_map)||(null===A||void 0===A?void 0:A.color_map)||(null===A||void 0===A?void 0:A.colorImagesMap)||(null===A||void 0===A?void 0:A.colorImagesObj)||(null===A||void 0===A?void 0:A.colorImageMap)||(null===A||void 0===A?void 0:A.color_image)||null;n&&(Array.isArray(n)?n.forEach(e=>{if(!e)return;const t=(e.name||e.label||e.color||"").toString().trim().toLowerCase(),i=e.image||e.url||e.src||e.path||null;t&&i&&(r[t]=s(i))}):"object"===typeof n&&Object.entries(n).forEach(e=>{let[t,i]=e;const n=String(t).trim().toLowerCase(),o="string"===typeof i?i:i&&(i.url||i.image||i.src||i.path);n&&o&&(r[n]=s(o))}));const o=i.map(e=>{const t=function(e){if(!e)return null;let t=String(e).trim();return t.startsWith("0x")&&(t=t.slice(2)),t.startsWith("#")&&(t=t.slice(1)),t=t.replace(/[^0-9a-fA-F]/g,""),3===t.length&&(t=t.split("").map(e=>e+e).join("")),6===t.length?("#"+t).toUpperCase():null}(e),i=t||null,n=i?h.hexToName(i):String(e||""),o=r&&(r[String(e).toLowerCase()]||r[String(n).toLowerCase()])||null;return{raw:e,displayHex:i,friendly:n,imageUrl:o||null}});$(o)},[null===A||void 0===A?void 0:A.images,null===A||void 0===A?void 0:A.image,null===A||void 0===A?void 0:A.thumbnail,null===A||void 0===A?void 0:A.colors,null===A||void 0===A?void 0:A.slug,null===A||void 0===A?void 0:A._id]);const[Q,G]=(0,r.useState)(()=>{try{const e=(0,a.Bb)();return(0,a.x0)(Array.isArray(e)?{items:e}:e)}catch(e){return(0,a.x0)({items:[]})}});(0,r.useEffect)(()=>{function e(){try{const e=(0,a.Bb)(),t=(0,a.x0)(Array.isArray(e)?{items:e}:e);G(t)}catch(e){}}return window.addEventListener("cart-updated",e),e(),()=>window.removeEventListener("cart-updated",e)},[]);const ee=(0,r.useCallback)(e=>{!D||D.length<=1||("ArrowLeft"===e.key&&V(e=>(e-1+D.length)%D.length),"ArrowRight"===e.key&&V(e=>(e+1)%D.length))},[D]);function te(e){const t=Math.max(1,Math.floor(Number(e)||1));return A&&"number"===typeof A.stock?Math.min(t,Math.max(1,A.stock)):t}(0,r.useEffect)(()=>(window.addEventListener("keydown",ee),()=>window.removeEventListener("keydown",ee)),[ee]);const ie=Math.max(0,a.Nv-(Q.subtotal||0)),re=(null===A||void 0===A?void 0:A.thumbnail)||(null===A||void 0===A?void 0:A.images)&&A.images[0]&&(A.images[0].url||A.images[0])||(null===A||void 0===A?void 0:A.image)||null,ne=X||(D.length>0?D[J]:s(re)),oe=(null===A||void 0===A?void 0:A.videoUrl)||(null===A||void 0===A?void 0:A.video)||(null===A||void 0===A?void 0:A.video_url)||(null===A||void 0===A?void 0:A.videoLink)||(null===A||void 0===A?void 0:A.video_link)||(null===A||void 0===A?void 0:A.productVideo)||"",le=function(e){if(!e||"string"!==typeof e)return null;const t=e.trim();try{const e=new URL(t,window.location.origin),i=e.hostname.toLowerCase();if(i.includes("youtube.com")){if(e.pathname.startsWith("/embed/"))return"https://www.youtube.com".concat(e.pathname).concat(e.search||"");const t=e.searchParams.get("v");if(t)return"https://www.youtube.com/embed/".concat(t)}if(i.includes("youtu.be")){const t=e.pathname.replace("/","");if(t)return"https://www.youtube.com/embed/".concat(t)}}catch(i){const e=t.match(/^[A-Za-z0-9_-]{8,}$/);if(e)return"https://www.youtube.com/embed/".concat(e[0])}return null}(oe);return S?(0,f.jsx)("div",{style:{padding:24},children:(0,f.jsx)("p",{children:"Loading product\u2026"})}):A?(0,f.jsxs)("div",{style:{padding:24},children:[(0,f.jsx)("button",{onClick:()=>v(-1),style:{marginBottom:12},children:"\u2190 Back"}),(0,f.jsxs)("div",{style:{display:"grid",gridTemplateColumns:le||w(oe)?"minmax(360px, 520px) 1fr 320px":"minmax(360px, 520px) 1fr",gap:24,alignItems:"start"},children:[(0,f.jsxs)("div",{style:{width:"100%"},children:[(0,f.jsxs)("div",{ref:M,style:{height:420,borderRadius:8,border:"1px solid #f3f3f3",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",background:"#fff",position:"relative"},children:[D.length>1&&!X&&(0,f.jsx)("button",{onClick:()=>V(e=>(e-1+D.length)%D.length),"aria-label":"Previous image",style:{position:"absolute",left:8,top:"50%",transform:"translateY(-50%)",background:"rgba(255,255,255,0.9)",border:"none",padding:8,borderRadius:6,cursor:"pointer",zIndex:5},children:"\u25c0"}),(0,f.jsx)("img",{ref:R,src:ne,alt:A.title,onMouseMove:N,onMouseEnter:P,onMouseLeave:T,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",display:"block",transition:"transform 180ms cubic-bezier(.2,.9,.2,1)",transform:"scale(1)"},onError:e=>{e.target.src=s(null)}}),D.length>1&&!X&&(0,f.jsx)("button",{onClick:()=>V(e=>(e+1)%D.length),"aria-label":"Next image",style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"rgba(255,255,255,0.9)",border:"none",padding:8,borderRadius:6,cursor:"pointer",zIndex:5},children:"\u25b6"})]}),(0,f.jsxs)("div",{style:{display:"flex",gap:8,marginTop:10,flexWrap:"wrap"},children:[D.map((e,t)=>(0,f.jsx)("button",{onClick:()=>{Z(null),V(t)},style:{border:t!==J||X?"1px solid #eee":"2px solid #0b5cff",padding:0,borderRadius:6,overflow:"hidden",width:60,height:60,background:"#fff",cursor:"pointer"},"aria-label":"Show image ".concat(t+1),children:(0,f.jsx)("img",{src:e,alt:"".concat(A.title,"-").concat(t),style:{width:"100%",height:"100%",objectFit:"cover"}})},e+t)),Y.map((e,t)=>{if(!e.imageUrl)return null;return D.includes(e.imageUrl)?null:(0,f.jsx)("button",{onClick:()=>{Z(e.imageUrl),U(e.raw)},title:e.friendly,style:{width:60,height:60,borderRadius:6,overflow:"hidden",border:X===e.imageUrl?"2px solid #0b5cff":"1px solid #eee",padding:0,background:"#fff",cursor:"pointer"},children:(0,f.jsx)("img",{src:e.imageUrl,alt:"color-".concat(t),style:{width:"100%",height:"100%",objectFit:"cover"}})},"cimg-".concat(t))}),oe&&(0,f.jsx)("div",{title:"Video",onClick:()=>{const e=document.getElementById("product-video-player");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},style:{width:60,height:60,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #eee",background:"#fafafa",cursor:"pointer"},children:(0,f.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:(0,f.jsx)("path",{d:"M5 3v18l15-9L5 3z",fill:"currentColor"})})})]})]}),(0,f.jsxs)("div",{style:{minWidth:320},children:[(0,f.jsx)("h1",{style:{marginTop:0},children:A.title}),A.description&&(0,f.jsx)("p",{style:{color:"#374151"},children:A.description}),(0,f.jsxs)("div",{style:{marginTop:12},children:[(0,f.jsxs)("div",{style:{fontSize:14,color:"#6b7280",textDecoration:A.mrp>A.price?"line-through":"none"},children:["MRP: \u20b9",Number(null!==(t=null!==(i=null!==(l=A.mrp)&&void 0!==l?l:A.compareAtPrice)&&void 0!==i?i:A.price)&&void 0!==t?t:0).toFixed(2)]}),(0,f.jsxs)("div",{style:{marginTop:6,fontSize:22,fontWeight:800,color:"#0b5cff"},children:["\u20b9",Number(null!==(c=A.price)&&void 0!==c?c:0).toFixed(2)]})]}),Y.length>0&&(0,f.jsxs)("div",{style:{marginTop:14},children:[(0,f.jsx)("div",{style:{marginBottom:8,fontWeight:700},children:"Color"}),(0,f.jsx)("div",{style:{display:"flex",gap:10,flexWrap:"wrap",alignItems:"center"},children:Y.map(e=>{const t=e.friendly||e.displayHex||e.raw,i=L===e.raw,r=e.displayHex||"#fff";return(0,f.jsxs)("div",{style:{textAlign:"center",minWidth:72},children:[(0,f.jsx)("button",{onClick:()=>{if(U(e.raw),e.imageUrl){const t=D.findIndex(t=>t===e.imageUrl);t>=0?(Z(null),V(t)):Z(e.imageUrl)}else Z(null),D.length>0&&V(0)},title:t,style:{width:36,height:28,borderRadius:8,border:i?"2px solid #0b5cff":"1px solid #e6e6e6",background:r,backgroundImage:e.imageUrl&&!e.displayHex?"url(".concat(e.imageUrl,")"):void 0,backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer",display:"inline-block"}}),(0,f.jsx)("div",{style:{marginTop:6,fontSize:12},children:t})]},String(e.raw))})})]}),Array.isArray(A.sizes)&&A.sizes.length>0&&(0,f.jsxs)("div",{style:{marginTop:14},children:[(0,f.jsx)("div",{style:{marginBottom:8,fontWeight:700},children:"Size"}),(0,f.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:A.sizes.map(e=>{const t=B===e;return(0,f.jsx)("button",{onClick:()=>q(e),style:{padding:"8px 12px",borderRadius:8,border:t?"2px solid #0b5cff":"1px solid #e6e6e6",background:t?"#eef2ff":"#fff",cursor:"pointer"},children:e},e)})})]}),(0,f.jsxs)("div",{style:{marginTop:14,display:"flex",alignItems:"center",gap:8},children:[(0,f.jsx)("div",{style:{fontWeight:700},children:"Quantity"}),(0,f.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,f.jsx)("button",{onClick:function(){H(e=>te(e-1))},style:{width:36,height:32},children:"-"}),(0,f.jsx)("input",{value:O,onChange:function(e){H(te(e.target.value))},style:{width:60,textAlign:"center",padding:6}}),(0,f.jsx)("button",{onClick:function(){H(e=>te(e+1))},style:{width:36,height:32},children:"+"})]}),"number"===typeof A.stock&&(0,f.jsxs)("div",{style:{marginLeft:12,color:"#6b7280"},children:["Stock: ",A.stock]})]}),(0,f.jsxs)("div",{style:{marginTop:18,display:"flex",gap:12},children:[(0,f.jsx)("button",{onClick:async function(e){var t,i,r,n,o,l,s,d,c,u;if(null===e||void 0===e||null===(t=e.preventDefault)||void 0===t||t.call(e),!A)return;if(Array.isArray(A.colors)&&A.colors.length>0&&!L)return void I("Please select a color.");if(Array.isArray(A.sizes)&&A.sizes.length>0&&!B)return void I("Please select a size.");E(!0),I(null);const g=null!==(i=null!==(r=null!==(n=A._id)&&void 0!==n?n:A.id)&&void 0!==r?r:A.slug)&&void 0!==i?i:Math.random().toString(36).slice(2,9),p=[g];L&&p.push("c:".concat(String(L))),B&&p.push("s:".concat(String(B)));const m={_id:p.join("|"),productId:g,slug:A.slug,title:null!==(o=null!==(l=A.title)&&void 0!==l?l:A.name)&&void 0!==o?o:"Product",price:Number(null!==(s=null!==(d=A.price)&&void 0!==d?d:A.salePrice)&&void 0!==s?s:0),images:null!==(c=A.images)&&void 0!==c?c:A.image?[{url:A.image}]:[],image:null!==(u=A.imageUrl)&&void 0!==u?u:A.images&&A.images[0]?A.images[0].url||A.images[0]:null,quantity:te(O),meta:{color:null!==L&&void 0!==L?L:null,size:null!==B&&void 0!==B?B:null}};try{const t=await(0,a.Nk)(m,m.quantity);try{"function"===typeof j&&j({type:"INITIALIZE",payload:t})}catch(h){console.warn("[ProductDetail] context initialize failed:",h)}try{window.dispatchEvent(new Event("cart-updated"))}catch(e){}try{!function(t,i){try{const e="seemati_free_burst_done_v1",r="1"===localStorage.getItem(e);t>=a.Nv&&!r?(b(i||document.body,{count:30,spread:220,lifetime:1e3}),localStorage.setItem(e,"1")):t<a.Nv&&r&&localStorage.removeItem(e)}catch(e){console.warn("burst check failed",e)}}((0,a.x0)(t).subtotal||0,M.current||document.body)}catch(e){}}catch(h){console.error("Add to cart failed (product page):",h),I("Unable to add to cart. See console for details.")}finally{E(!1)}},disabled:F,style:{background:"#f59e0b",color:"#fff",border:"none",padding:"10px 14px",borderRadius:6,fontWeight:700,cursor:F?"progress":"pointer"},children:F?"Adding...":"Add to cart"}),(0,f.jsx)("button",{onClick:function(e){var t,i,r,n;if(null===e||void 0===e||null===(t=e.preventDefault)||void 0===t||t.call(e),!A)return;const o=null!==(i=null!==(r=null!==(n=A._id)&&void 0!==n?n:A.id)&&void 0!==r?r:A.slug)&&void 0!==i?i:null;if(!o)return;const l=y();let s;if(l.find(e=>{var t,i,r;return(null!==(t=null!==(i=null!==(r=e.productId)&&void 0!==r?r:e._id)&&void 0!==i?i:e.id)&&void 0!==t?t:e.slug)===o}))s=l.filter(e=>{var t,i,r;return(null!==(t=null!==(i=null!==(r=e.productId)&&void 0!==r?r:e._id)&&void 0!==i?i:e.id)&&void 0!==t?t:e.slug)!==o}),x(s),z(!1);else{var a,d,c,u,g,p;const e={productId:o,_id:null!==(a=A._id)&&void 0!==a?a:o,id:null!==(d=A.id)&&void 0!==d?d:o,slug:null!==(c=A.slug)&&void 0!==c?c:void 0,title:A.title,price:Number(null!==(u=A.price)&&void 0!==u?u:0),image:null!==(g=null!==(p=A.image)&&void 0!==p?p:A.images&&A.images[0]&&(A.images[0].url||A.images[0]))&&void 0!==g?g:null};s=[...l,e],x(s),z(!0)}},title:W?"Saved to wishlist":"Save for later","aria-pressed":W,style:{padding:"10px 14px",borderRadius:6,border:W?"1px solid #ef4444":"1px solid #e6e6e6",background:W?"#fff0f0":"#fff",color:W?"#ef4444":"#111",cursor:"pointer",fontWeight:700},children:W?"\u2665 Saved":"\u2661 Save"}),(0,f.jsx)(n.N_,{to:"/cart",children:(0,f.jsx)("button",{style:{padding:"10px 14px",borderRadius:6,border:"1px solid #ccc",background:"#fff"},children:"Go to cart"})})]}),_?(0,f.jsx)("div",{style:{color:"#b91c1c",marginTop:12},children:_}):null,(0,f.jsxs)("div",{style:{marginTop:18,color:"#6b7280"},children:[(0,f.jsxs)("div",{children:["Brand: ",null!==(u=A.brand)&&void 0!==u?u:"\u2014"]}),(0,f.jsxs)("div",{children:["Category: ",null!==(g=A.category)&&void 0!==g?g:"\u2014"]})]})]}),oe&&(0,f.jsxs)("div",{style:{alignSelf:"start"},children:[(0,f.jsx)("div",{style:{marginBottom:8,fontWeight:700},children:"Product video"}),le?(0,f.jsx)("div",{style:{width:"100%",height:220,border:"1px solid #eee",borderRadius:8,overflow:"hidden",background:"#000"},children:(0,f.jsx)("iframe",{title:"product-video",width:"100%",height:"100%",src:le,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):w(oe)?(0,f.jsx)("div",{style:{width:"100%",height:220,border:"1px solid #eee",borderRadius:8,overflow:"hidden",background:"#000"},children:(0,f.jsx)("video",{controls:!0,style:{width:"100%",height:"100%"},children:(0,f.jsx)("source",{src:oe})})}):(0,f.jsx)("div",{style:{fontSize:13},children:(0,f.jsx)("a",{href:oe,target:"_blank",rel:"noreferrer",children:"Open video"})})]})]}),(0,f.jsx)("div",{"aria-hidden":"false",style:{position:"fixed",left:20,right:20,bottom:20,margin:"0 auto",maxWidth:980,background:"#e6fffa",border:"1px solid #bbf7d0",color:"#064e3b",padding:"12px 18px",borderRadius:999,boxShadow:"0 6px 18px rgba(2,6,23,0.06)",display:"flex",alignItems:"center",gap:12,justifyContent:"center",zIndex:9999},children:ie>0?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{style:{fontWeight:700},children:"\ud83d\udce6"}),(0,f.jsxs)("div",{style:{fontWeight:700},children:["Add \u20b9",ie.toFixed(2)," more to get free shipping."]}),(0,f.jsxs)("div",{style:{color:"#065f46"},children:["Subtotal \u20b9",(Q.subtotal||0).toFixed(2)]}),(0,f.jsx)("div",{style:{marginLeft:12},children:(0,f.jsx)("button",{onClick:()=>v("/cart"),style:{background:"#0b5cff",color:"#fff",padding:"8px 12px",borderRadius:6,border:"none"},children:"View Cart"})})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{style:{fontWeight:700},children:"\ud83c\udf89"}),(0,f.jsxs)("div",{style:{fontWeight:700},children:["You have free shipping! Subtotal \u20b9",(Q.subtotal||0).toFixed(2)]}),(0,f.jsx)("div",{style:{marginLeft:12},children:(0,f.jsx)("button",{onClick:()=>b(M.current||document.body,{count:36}),style:{background:"#10b981",color:"#fff",padding:"8px 12px",borderRadius:6,border:"none"},children:"Celebrate"})})]})})]}):(0,f.jsxs)("div",{style:{padding:24},children:[(0,f.jsx)("p",{children:"Product not found."}),(0,f.jsx)(n.N_,{to:"/shop",children:"Back to shop"}),_?(0,f.jsxs)("div",{style:{color:"#b91c1c",marginTop:12},children:["Error: ",String(_)]}):null]})}},8009:(e,t,i)=>{i.d(t,{Ai:()=>p,Bb:()=>s,Nk:()=>u,Nv:()=>o,Rq:()=>g,o2:()=>a,sX:()=>m,x0:()=>c});var r=i(9379);const n="seemati_cart_v1",o=999,l=60;function s(){try{const e=localStorage.getItem(n);if(!e)return{items:[]};const t=function(e){try{return JSON.parse(e)}catch(t){return null}}(e);if(!t)return{items:[]};if(Array.isArray(t))return{items:t};if(t.items&&Array.isArray(t.items))return t;for(const i of Object.keys(t))if(Array.isArray(t[i]))return{items:t[i]};return{items:[]}}catch(e){return console.error("[cartHelpers] loadCart error",e),{items:[]}}}function a(e){try{const i=Array.isArray(e)?{items:e}:e&&e.items?{items:e.items}:{items:[]};localStorage.setItem(n,JSON.stringify(i.items));try{window.dispatchEvent(new Event("cart-updated"))}catch(t){}return i}catch(t){return console.error("[cartHelpers] saveCart error",t),{items:[]}}}function d(e){var t,i,n,o,l,s,a,d,c,u,g,p,m;const h=function(e){var t,i,r,n,o;return null!==(t=null!==(i=null!==(r=null!==(n=e.productId)&&void 0!==n?n:e._id)&&void 0!==r?r:e.id)&&void 0!==i?i:e.slug)&&void 0!==t?t:String(null!==(o=e.title)&&void 0!==o?o:Math.random().toString(36).slice(2,9))}(e);return(0,r.A)({productId:h,_id:null!==(t=e._id)&&void 0!==t?t:h,id:null!==(i=e.id)&&void 0!==i?i:h,slug:null!==(n=e.slug)&&void 0!==n?n:void 0,title:null!==(o=null!==(l=e.title)&&void 0!==l?l:e.name)&&void 0!==o?o:"Product",price:Number(null!==(s=null!==(a=null!==(d=e.price)&&void 0!==d?d:e.salePrice)&&void 0!==a?a:e.amount)&&void 0!==s?s:0),image:null!==(c=null!==(u=e.image)&&void 0!==u?u:e.images&&e.images[0]&&(e.images[0].url||e.images[0]))&&void 0!==c?c:null,images:null!==(g=e.images)&&void 0!==g?g:e.image?[{url:e.image}]:[],quantity:Math.max(1,Number(null!==(p=null!==(m=e.quantity)&&void 0!==m?m:e.qty)&&void 0!==p?p:1))},Object.keys(e).reduce((t,i)=>(["productId","_id","id","slug","title","price","image","images","quantity"].includes(i)||(t[i]=e[i]),t),{}))}function c(e){const t=(Array.isArray(e)?{items:e}:e||{items:[]}).items||[],i=t.reduce((e,t)=>e+Number(t.price||0)*Number(t.quantity||t.qty||0),0),r=i>=o?0:l,n=Math.round(.05*i);return{items:t,subtotal:i,shipping:r,tax:n,discount:0,total:i+r+n-0}}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{const i=s(),n=Array.isArray(i.items)?[...i.items]:[],o=d(e),l=o.productId,c=n.findIndex(e=>{var t,i,r;return(null!==(t=null!==(i=null!==(r=e.productId)&&void 0!==r?r:e._id)&&void 0!==i?i:e.id)&&void 0!==t?t:e.slug)===l});if(c>-1){const e=(0,r.A)({},n[c]);e.quantity=Math.min(99,Number(e.quantity||e.qty||0)+Number(t||1)),n[c]=e}else o.quantity=Math.max(1,Number(t||o.quantity||1)),n.push(o);return a(n)}catch(i){return console.error("[cartHelpers] addOrIncrementItem error",i),s()}}function g(e,t){try{const i=(s().items||[]).map(i=>{var n,o,l;return(null!==(n=null!==(o=null!==(l=i.productId)&&void 0!==l?l:i._id)&&void 0!==o?o:i.id)&&void 0!==n?n:i.slug)===e?(0,r.A)((0,r.A)({},i),{},{quantity:Math.max(0,Math.floor(Number(t)||0))}):i}).filter(e=>Number(e.quantity||0)>0);return a(i)}catch(i){return console.error("[cartHelpers] setItemQuantity error",i),s()}}function p(e){try{const t=(s().items||[]).filter(t=>{var i,r,n;return(null!==(i=null!==(r=null!==(n=t.productId)&&void 0!==n?n:t._id)&&void 0!==r?r:t.id)&&void 0!==i?i:t.slug)!==e});return a(t)}catch(t){return console.error("[cartHelpers] removeItem error",t),s()}}function m(){try{return a([])}catch(e){return console.error("[cartHelpers] clearCart error",e),{items:[]}}}}}]);
//# sourceMappingURL=880.13fb6942.chunk.js.map