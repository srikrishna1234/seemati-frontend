{"version":3,"file":"static/js/399.1179feef.chunk.js","mappings":"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","sources":["admin/AdminProductList.jsx","admin/AdminProductEdit.js","admin/AdminAnnouncements.js","admin/AdminPage.jsx","api/axiosInstance.js"],"sourcesContent":["// src/admin/AdminProductList.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst BACKEND_ORIGIN = \"https://seemati-backend.onrender.com\";\r\nconst RELATIVE_PATH = \"/admin-api/products\";\r\n\r\nexport default function AdminProductList() {\r\n  const [products, setProducts] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n\r\n    async function fetchJson(url, opts = {}) {\r\n      const res = await fetch(url, { method: \"GET\", credentials: \"include\", ...opts });\r\n      const ct = res.headers.get(\"content-type\") || \"\";\r\n      const text = await res.text();\r\n\r\n      if (ct.includes(\"application/json\")) {\r\n        try {\r\n          return { status: res.status, json: JSON.parse(text), rawText: text };\r\n        } catch (err) {\r\n          throw new Error(\"Invalid JSON from \" + url + \" — parse error\");\r\n        }\r\n      }\r\n\r\n      const t = (text || \"\").trim();\r\n      const looksLikeHtml = t.startsWith(\"<\") || t.toLowerCase().startsWith(\"<!doctype\");\r\n      return { status: res.status, json: null, rawText: text, looksLikeHtml };\r\n    }\r\n\r\n    async function load() {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      try {\r\n        console.debug(\"[AdminProductList] trying relative path:\", RELATIVE_PATH);\r\n        const r1 = await fetchJson(RELATIVE_PATH);\r\n\r\n        if (r1.json) {\r\n          console.debug(\"[AdminProductList] got JSON from relative path\", r1);\r\n          const arr = r1.json.products || r1.json.data || r1.json.items || r1.json || [];\r\n          if (!cancelled) {\r\n            setProducts(Array.isArray(arr) ? arr : []);\r\n            setLoading(false);\r\n          }\r\n          return;\r\n        }\r\n\r\n        if (r1.looksLikeHtml) {\r\n          console.warn(\"[AdminProductList] relative path returned HTML (frontend served index), falling back to backend origin\");\r\n          const backendUrl = BACKEND_ORIGIN + RELATIVE_PATH;\r\n          console.debug(\"[AdminProductList] trying backend URL:\", backendUrl);\r\n          const r2 = await fetchJson(backendUrl);\r\n\r\n          if (r2.json) {\r\n            console.debug(\"[AdminProductList] got JSON from backend origin\", r2);\r\n            const arr = r2.json.products || r2.json.data || r2.json.items || r2.json || [];\r\n            if (!cancelled) {\r\n              setProducts(Array.isArray(arr) ? arr : []);\r\n              setLoading(false);\r\n            }\r\n            return;\r\n          } else {\r\n            throw new Error(\"Backend origin did not return JSON. Check backend logs.\");\r\n          }\r\n        }\r\n\r\n        console.error(\"[AdminProductList] unexpected response at relative path:\", r1);\r\n        throw new Error(\"Unexpected response from relative path\");\r\n      } catch (err) {\r\n        console.error(\"[AdminProductList] load error:\", err);\r\n        if (!cancelled) {\r\n          setError(err.message || \"Unknown error\");\r\n          setProducts([]);\r\n          setLoading(false);\r\n        }\r\n      }\r\n    }\r\n\r\n    load();\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, []);\r\n\r\n  const safe = (v) => (v === undefined || v === null ? \"\" : v);\r\n\r\n  const getThumbnailUrl = (p) => {\r\n    if (p && typeof p.thumbnail === \"string\" && p.thumbnail.trim()) {\r\n      return p.thumbnail.trim();\r\n    }\r\n    if (p && Array.isArray(p.images) && p.images.length > 0 && p.images[0].url) {\r\n      return p.images[0].url;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: 20 }}>\r\n      <h1>Products</h1>\r\n      <div style={{ marginBottom: 8 }}>\r\n        <Link to=\"/admin/products/add\">\r\n          <button>Add product</button>\r\n        </Link>\r\n      </div>\r\n\r\n      {loading && <div>Loading products…</div>}\r\n      {error && <div style={{ color: \"crimson\" }}>Error loading products: {error}</div>}\r\n      {!loading && (!products || products.length === 0) && <div>No products found.</div>}\r\n\r\n      {!loading && products && products.length > 0 && (\r\n        <div style={{ overflowX: \"auto\" }}>\r\n          <table style={{ width: \"100%\", borderCollapse: \"collapse\" }}>\r\n            <thead>\r\n              <tr>\r\n                <th style={{ textAlign: \"left\", padding: \"12px 8px\", borderBottom: \"1px solid #ddd\", width: 90 }}>\r\n                  Thumbnail\r\n                </th>\r\n                <th style={{ textAlign: \"left\", padding: \"12px 8px\", borderBottom: \"1px solid #ddd\" }}>\r\n                  Title\r\n                </th>\r\n                <th style={{ textAlign: \"left\", padding: \"12px 8px\", borderBottom: \"1px solid #ddd\" }}>\r\n                  Price\r\n                </th>\r\n                <th style={{ textAlign: \"left\", padding: \"12px 8px\", borderBottom: \"1px solid #ddd\" }}>\r\n                  Stock\r\n                </th>\r\n                <th style={{ textAlign: \"left\", padding: \"12px 8px\", borderBottom: \"1px solid #ddd\" }}>\r\n                  Category\r\n                </th>\r\n                <th style={{ textAlign: \"left\", padding: \"12px 8px\", borderBottom: \"1px solid #ddd\" }}>\r\n                  Actions\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {products.map((p, i) => {\r\n                const id = p._id || p.id || `${i}`;\r\n                const thumbUrl = getThumbnailUrl(p);\r\n\r\n                return (\r\n                  <tr key={id}>\r\n                    <td style={{ padding: \"8px 8px\", borderBottom: \"1px solid #f0f0f0\", verticalAlign: \"middle\" }}>\r\n                      {thumbUrl ? (\r\n                        <img\r\n                          src={thumbUrl}\r\n                          alt={safe(p.title) || \"Product thumbnail\"}\r\n                          style={{ width: 64, height: 64, objectFit: \"cover\", borderRadius: 4, border: \"1px solid #eee\" }}\r\n                          loading=\"lazy\"\r\n                        />\r\n                      ) : (\r\n                        <span style={{ fontSize: 12, color: \"#999\" }}>No image</span>\r\n                      )}\r\n                    </td>\r\n                    <td style={{ padding: \"10px 8px\", borderBottom: \"1px solid #f0f0f0\" }}>{safe(p.title)}</td>\r\n                    <td style={{ padding: \"10px 8px\", borderBottom: \"1px solid #f0f0f0\" }}>{safe(p.price)}</td>\r\n                    <td style={{ padding: \"10px 8px\", borderBottom: \"1px solid #f0f0f0\" }}>{safe(p.stock)}</td>\r\n                    <td style={{ padding: \"10px 8px\", borderBottom: \"1px solid #f0f0f0\" }}>{safe(p.category)}</td>\r\n                    <td style={{ padding: \"10px 8px\", borderBottom: \"1px solid #f0f0f0\" }}>\r\n                      <Link to={`/admin/products/${id}/edit`}>\r\n                        <button>Edit</button>\r\n                      </Link>{\" \"}\r\n                      <a href={thumbUrl || (p.images && p.images[0] && p.images[0].url) || \"#\"} target=\"_blank\" rel=\"noreferrer\">\r\n                        <button>View</button>\r\n                      </a>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// src/admin/AdminProductEdit.js\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axiosInstance from '../api/axiosInstance'; // adjust if your path is different\r\n\r\nexport default function AdminProductEdit() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const fileInputRef = useRef(null);\r\n\r\n  // Product fields\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [product, setProduct] = useState({\r\n    title: '',\r\n    slug: '',\r\n    price: '',\r\n    mrp: '',\r\n    stock: '',\r\n    sku: '',\r\n    brand: '',\r\n    category: '',\r\n    videoUrl: '',\r\n    colors: '',\r\n    sizes: '',\r\n    description: '',\r\n    isPublished: false\r\n  });\r\n\r\n  // existingImages: array of URL strings currently saved in DB\r\n  const [existingImages, setExistingImages] = useState([]); // e.g. ['https://...png', ...]\r\n  // keep map for existing images (true = keep, false = remove)\r\n  const [keepMap, setKeepMap] = useState({});\r\n\r\n  // previews for newly selected files (File objects + preview URL)\r\n  const [selectedFiles, setSelectedFiles] = useState([]); // [{ file, previewUrl }]\r\n\r\n  useEffect(() => {\r\n    async function load() {\r\n      try {\r\n        setLoading(true);\r\n        const resp = await axiosInstance.get(`/api/products/${id}`);\r\n        if (resp.data && resp.data.product) {\r\n          const p = resp.data.product;\r\n          setProduct({\r\n            title: p.title || '',\r\n            slug: p.slug || '',\r\n            price: p.price || '',\r\n            mrp: p.mrp || '',\r\n            stock: p.stock || '',\r\n            sku: p.sku || '',\r\n            brand: p.brand || '',\r\n            category: p.category || '',\r\n            videoUrl: p.videoUrl || '',\r\n            colors: Array.isArray(p.colors) ? p.colors.join(', ') : (p.colors || ''),\r\n            sizes: Array.isArray(p.sizes) ? p.sizes.join(', ') : (p.sizes || ''),\r\n            description: p.description || '',\r\n            isPublished: !!p.isPublished\r\n          });\r\n\r\n          // Normalize images: some responses use arrays of strings, some use objects\r\n          const imgs = Array.isArray(p.images)\r\n            ? p.images.map(it => (typeof it === 'string' ? it : (it.url || it)))\r\n            : [];\r\n          setExistingImages(imgs);\r\n\r\n          // mark all existing images to keep by default\r\n          const map = {};\r\n          imgs.forEach(url => (map[url] = true));\r\n          setKeepMap(map);\r\n        } else {\r\n          alert('Failed to load product.');\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to fetch product', err);\r\n        alert('Error loading product. See console.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    // cleanup previews on unmount\r\n    return () => {\r\n      selectedFiles.forEach(s => s.previewUrl && URL.revokeObjectURL(s.previewUrl));\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [id]);\r\n\r\n  // Handle input changes\r\n  function handleChange(e) {\r\n    const { name, value, type, checked } = e.target;\r\n    if (name === 'isPublished') {\r\n      setProduct(prev => ({ ...prev, isPublished: !!checked }));\r\n    } else {\r\n      setProduct(prev => ({ ...prev, [name]: value }));\r\n    }\r\n  }\r\n\r\n  // File selection -> create previews\r\n  function onFilesSelected(e) {\r\n    const files = Array.from(e.target.files || []);\r\n    if (!files.length) return;\r\n\r\n    const newSelected = files.map(f => ({\r\n      file: f,\r\n      previewUrl: URL.createObjectURL(f)\r\n    }));\r\n\r\n    // append to existing selectedFiles\r\n    setSelectedFiles(prev => {\r\n      // release old preview URLs we are removing? we keep prev\r\n      return [...prev, ...newSelected];\r\n    });\r\n\r\n    // reset input so the same file can be re-selected if user wants\r\n    if (fileInputRef.current) fileInputRef.current.value = '';\r\n  }\r\n\r\n  // Remove preview (before upload)\r\n  function removeSelectedPreview(index) {\r\n    setSelectedFiles(prev => {\r\n      const copy = [...prev];\r\n      const removed = copy.splice(index, 1)[0];\r\n      if (removed && removed.previewUrl) URL.revokeObjectURL(removed.previewUrl);\r\n      return copy;\r\n    });\r\n  }\r\n\r\n  // Toggle keep/remove for existing image URL\r\n  function toggleKeep(url) {\r\n    setKeepMap(prev => ({ ...prev, [url]: !prev[url] }));\r\n  }\r\n\r\n  // Helper to upload files (if any) to backend; returns array of uploaded URLs\r\n  async function uploadFilesIfAny() {\r\n    if (!selectedFiles.length) return [];\r\n    const formData = new FormData();\r\n    // append each file with same field name; backend accepts any field and handles multiple files\r\n    selectedFiles.forEach(s => formData.append('files', s.file)); // name doesn't matter due to multer.any()\r\n\r\n    try {\r\n      const resp = await axiosInstance.put(`/api/products/${id}/upload`, formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' }\r\n      });\r\n\r\n      // backend returns: { uploaded: [ {key,url}, ... ], key, url } OR legacy { key, url }\r\n      const data = resp && resp.data ? resp.data : {};\r\n      let uploadedArray = [];\r\n      if (Array.isArray(data.uploaded) && data.uploaded.length) {\r\n        uploadedArray = data.uploaded;\r\n      } else if (data.key && data.url) {\r\n        uploadedArray = [{ key: data.key, url: data.url }];\r\n      } else {\r\n        // defensive: try resp.data directly if array\r\n        if (Array.isArray(data)) {\r\n          uploadedArray = data;\r\n        }\r\n      }\r\n\r\n      // extract urls\r\n      const urls = uploadedArray.map(u => (u && u.url) ? u.url : (typeof u === 'string' ? u : null)).filter(Boolean);\r\n\r\n      return urls;\r\n    } catch (err) {\r\n      console.error('Upload failed', err);\r\n      throw new Error('Upload request failed');\r\n    }\r\n  }\r\n\r\n  // Build final images array (keep existing ones that are checked + newly uploaded)\r\n  function buildFinalImageList(uploadedUrls) {\r\n    const kept = existingImages.filter(url => keepMap[url]);\r\n    // avoid duplicates: include kept first then uploaded that are not already present\r\n    const final = [...kept];\r\n    uploadedUrls.forEach(u => {\r\n      if (!final.includes(u)) final.push(u);\r\n    });\r\n    return final;\r\n  }\r\n\r\n  // Save handler: upload selected files (if any), then PUT product with images array\r\n  async function handleSave(e) {\r\n    e.preventDefault();\r\n    setSaving(true);\r\n\r\n    try {\r\n      // 1) upload files if selected\r\n      let uploadedUrls = [];\r\n      if (selectedFiles.length) {\r\n        uploadedUrls = await uploadFilesIfAny();\r\n        if (!uploadedUrls.length) {\r\n          alert('Upload failed or returned no URLs. Check the upload endpoint response.');\r\n          setSaving(false);\r\n          return;\r\n        }\r\n      }\r\n\r\n      // 2) build images array: kept existing + uploaded\r\n      const images = buildFinalImageList(uploadedUrls);\r\n\r\n      // 3) prepare body: convert colors/sizes to arrays, and include images as array of strings\r\n      const body = {\r\n        title: product.title,\r\n        slug: product.slug,\r\n        price: Number(product.price) || 0,\r\n        mrp: Number(product.mrp) || 0,\r\n        stock: Number(product.stock) || 0,\r\n        sku: product.sku,\r\n        brand: product.brand,\r\n        category: product.category,\r\n        videoUrl: product.videoUrl,\r\n        description: product.description,\r\n        isPublished: !!product.isPublished,\r\n        colors: product.colors ? product.colors.split(',').map(s => s.trim()).filter(Boolean) : [],\r\n        sizes: product.sizes ? product.sizes.split(',').map(s => s.trim()).filter(Boolean) : [],\r\n        images // array of string URLs\r\n      };\r\n\r\n      // 4) PUT updated product\r\n      const resp = await axiosInstance.put(`/api/products/${id}`, body);\r\n      if (resp && resp.data && resp.data.success) {\r\n        // cleanup previews memory\r\n        selectedFiles.forEach(s => s.previewUrl && URL.revokeObjectURL(s.previewUrl));\r\n        setSelectedFiles([]);\r\n        // Update UI with returned product (if provided)\r\n        const updatedProduct = resp.data.product || resp.data;\r\n        if (updatedProduct) {\r\n          const imgs = Array.isArray(updatedProduct.images)\r\n            ? updatedProduct.images.map(it => (typeof it === 'string' ? it : (it.url || it)))\r\n            : [];\r\n          setExistingImages(imgs);\r\n          const map = {};\r\n          imgs.forEach(url => (map[url] = true));\r\n          setKeepMap(map);\r\n        }\r\n\r\n        alert('Product updated');\r\n        // Optionally navigate back:\r\n        // navigate('/admin/products');\r\n      } else {\r\n        console.error('Save failed', resp);\r\n        alert('Save failed. Check server response.');\r\n      }\r\n    } catch (err) {\r\n      console.error('Save error', err);\r\n      alert(err.message || 'Save failed');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div style={{ display: 'flex', gap: 40 }}>\r\n      <form onSubmit={handleSave} style={{ width: '40%' }}>\r\n        <button type=\"button\" onClick={() => navigate('/admin/products')}>Back to products</button>\r\n\r\n        <div>\r\n          <label>Title</label><br />\r\n          <input name=\"title\" value={product.title} onChange={handleChange} />\r\n        </div>\r\n\r\n        <div>\r\n          <label>Slug</label><br />\r\n          <input name=\"slug\" value={product.slug} onChange={handleChange} />\r\n        </div>\r\n\r\n        <div>\r\n          <label>Price</label><br />\r\n          <input name=\"price\" value={product.price} onChange={handleChange} />\r\n        </div>\r\n\r\n        <div>\r\n          <label>MRP</label><br />\r\n          <input name=\"mrp\" value={product.mrp} onChange={handleChange} />\r\n        </div>\r\n\r\n        <div>\r\n          <label>Stock</label><br />\r\n          <input name=\"stock\" value={product.stock} onChange={handleChange} />\r\n        </div>\r\n\r\n        <div>\r\n          <label>SKU</label><br />\r\n          <input name=\"sku\" value={product.sku} onChange={handleChange} />\r\n        </div>\r\n\r\n        <div>\r\n          <label>Brand</label><br />\r\n          <input name=\"brand\" value={product.brand} onChange={handleChange} />\r\n        </div>\r\n\r\n        <div>\r\n          <label>Category</label><br />\r\n          <input name=\"category\" value={product.category} onChange={handleChange} />\r\n        </div>\r\n\r\n        <div>\r\n          <label>Video URL</label><br />\r\n          <input name=\"videoUrl\" value={product.videoUrl} onChange={handleChange} />\r\n        </div>\r\n\r\n        <div>\r\n          <label>Colors (comma-separated)</label><br />\r\n          <input name=\"colors\" value={product.colors} onChange={handleChange} />\r\n        </div>\r\n\r\n        <div>\r\n          <label>Sizes (comma-separated)</label><br />\r\n          <input name=\"sizes\" value={product.sizes} onChange={handleChange} />\r\n        </div>\r\n\r\n        <div>\r\n          <label>Description</label><br />\r\n          <textarea name=\"description\" value={product.description} onChange={handleChange} rows={6} />\r\n        </div>\r\n\r\n        <div>\r\n          <label>\r\n            <input name=\"isPublished\" type=\"checkbox\" checked={product.isPublished} onChange={handleChange} /> Published\r\n          </label>\r\n        </div>\r\n\r\n        <div style={{ marginTop: 8 }}>\r\n          <button type=\"submit\" disabled={saving}>{saving ? 'Saving...' : 'Save'}</button>\r\n          <button type=\"button\" onClick={() => navigate('/admin/products')}>Cancel</button>\r\n        </div>\r\n      </form>\r\n\r\n      <div style={{ width: '40%' }}>\r\n        <h3>Existing Images</h3>\r\n        <div style={{ display: 'flex', gap: 12, flexWrap: 'wrap' }}>\r\n          {existingImages.map((url, idx) => (\r\n            <div key={url} style={{ textAlign: 'center', width: 120 }}>\r\n              <img src={url} alt={`img-${idx}`} style={{ width: 100, height: 100, objectFit: 'cover' }} />\r\n              <div>\r\n                <label>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={!!keepMap[url]}\r\n                    onChange={() => toggleKeep(url)}\r\n                  /> Keep\r\n                </label>\r\n              </div>\r\n              <div>\r\n                <button type=\"button\" onClick={() => { setKeepMap(prev => ({ ...prev, [url]: false })); }}>Remove</button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          {existingImages.length === 0 && <div>No existing images</div>}\r\n        </div>\r\n\r\n        <h3 style={{ marginTop: 16 }}>Add Images</h3>\r\n        <input ref={fileInputRef} type=\"file\" multiple onChange={onFilesSelected} />\r\n        <div style={{ marginTop: 8, display: 'flex', gap: 12, flexWrap: 'wrap' }}>\r\n          {selectedFiles.map((s, i) => (\r\n            <div key={s.previewUrl + i} style={{ textAlign: 'center', width: 120 }}>\r\n              <img src={s.previewUrl} alt={`preview-${i}`} style={{ width: 100, height: 100, objectFit: 'cover' }} />\r\n              <div>\r\n                <button type=\"button\" onClick={() => removeSelectedPreview(i)}>Remove</button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          {selectedFiles.length === 0 && <div>No files chosen</div>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// frontend/src/admin/AdminAnnouncements.js\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL || '';\r\n\r\nexport default function AdminAnnouncements() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [newText, setNewText] = useState('');\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      try {\r\n        const res = await fetch(`${API_BASE}/admin-api/settings/announcements`);\r\n        if (!res.ok) throw new Error('Failed to fetch');\r\n        const data = await res.json();\r\n        if (!mounted) return;\r\n        setMessages(Array.isArray(data.messages) ? data.messages : []);\r\n      } catch (err) {\r\n        if (mounted) setError('Unable to load announcements');\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  function addMessage() {\r\n    const t = (newText || '').trim();\r\n    if (!t) return;\r\n    setMessages(prev => [...prev, t]);\r\n    setNewText('');\r\n  }\r\n\r\n  function removeMessage(idx) {\r\n    setMessages(prev => prev.filter((_, i) => i !== idx));\r\n  }\r\n\r\n  function moveUp(idx) {\r\n    if (idx <= 0) return;\r\n    setMessages(prev => {\r\n      const copy = [...prev];\r\n      const [item] = copy.splice(idx, 1);\r\n      copy.splice(idx - 1, 0, item);\r\n      return copy;\r\n    });\r\n  }\r\n  function moveDown(idx) {\r\n    setMessages(prev => {\r\n      if (idx >= prev.length - 1) return prev;\r\n      const copy = [...prev];\r\n      const [item] = copy.splice(idx, 1);\r\n      copy.splice(idx + 1, 0, item);\r\n      return copy;\r\n    });\r\n  }\r\n\r\n  async function save() {\r\n    setSaving(true);\r\n    setError(null);\r\n    try {\r\n      const res = await fetch(`${API_BASE}/admin-api/settings/announcements`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ messages })\r\n      });\r\n      if (!res.ok) {\r\n        const txt = await res.text();\r\n        throw new Error(txt || 'Save failed');\r\n      }\r\n      alert('Announcements saved');\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError('Save failed');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }\r\n\r\n  if (loading) return <div>Loading announcements…</div>;\r\n\r\n  return (\r\n    <div style={{ padding: 12 }}>\r\n      <h3>Announcements</h3>\r\n      {error && <div style={{ color: 'red' }}>{error}</div>}\r\n      <div style={{ marginBottom: 8 }}>\r\n        <input value={newText} onChange={e => setNewText(e.target.value)} style={{ width: '70%', padding: 8 }} placeholder=\"New announcement\" />\r\n        <button onClick={addMessage} style={{ marginLeft: 8, padding: '8px 12px' }}>Add</button>\r\n      </div>\r\n\r\n      <div>\r\n        {messages.length === 0 && <div>No announcements</div>}\r\n        <ul style={{ listStyle: 'none', padding: 0 }}>\r\n          {messages.map((m, i) => (\r\n            <li key={i} style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 6 }}>\r\n              <div style={{ flex: 1 }}>{m}</div>\r\n              <div>\r\n                <button onClick={() => moveUp(i)} disabled={i === 0}>↑</button>\r\n                <button onClick={() => moveDown(i)} disabled={i === messages.length - 1} style={{ marginLeft: 6 }}>↓</button>\r\n                <button onClick={() => removeMessage(i)} style={{ marginLeft: 6 }}>Remove</button>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n\r\n      <div style={{ marginTop: 12 }}>\r\n        <button onClick={save} disabled={saving} style={{ padding: '8px 14px' }}>{saving ? 'Saving…' : 'Save announcements'}</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/admin/AdminPage.jsx\r\nimport React, { useEffect } from \"react\";\r\nimport { Routes, Route, Link, useLocation } from \"react-router-dom\";\r\n\r\n// NOTE: import the actual filenames you have in your repo — .js for edit/announcements\r\nimport AdminProductList from \"./AdminProductList.jsx\";\r\nimport AdminProductEdit from \"./AdminProductEdit.js\";       // <- use .js (existing)\r\nimport AdminAnnouncements from \"./AdminAnnouncements.js\";  // <- use .js (existing)\r\n\r\n/**\r\n * AdminPage.jsx\r\n * - Thin wrapper that sets up nested admin routes:\r\n *    /admin/products\r\n *    /admin/products/add\r\n *    /admin/products/:id/edit\r\n *    /admin/announcements\r\n *\r\n * Make sure the imported filenames above match real files in src/admin (case + extension).\r\n */\r\nexport default function AdminPage() {\r\n  const loc = useLocation();\r\n\r\n  useEffect(() => {\r\n    console.debug(\"[AdminPage] mounted, location:\", loc.pathname);\r\n    return () => console.debug(\"[AdminPage] unmounted\");\r\n  }, [loc.pathname]);\r\n\r\n  return (\r\n    <main style={{ padding: 18 }}>\r\n      <div style={{ maxWidth: 1200, margin: \"0 auto\" }}>\r\n        <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", marginBottom: 18 }}>\r\n          <div>\r\n            <h1 style={{ margin: 0 }}>Admin</h1>\r\n            <div style={{ fontSize: 13, color: \"#666\" }}>Manage products and site content</div>\r\n          </div>\r\n\r\n          <div>\r\n            <Link to=\"/\" style={{ marginRight: 12 }}>Back to site</Link>\r\n            <Link to=\"/admin/products\" style={{ marginRight: 8 }}>Products</Link>\r\n            <Link to=\"/admin/announcements\">Announcements</Link>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ background: \"#fff\", borderRadius: 6, padding: 8 }}>\r\n          <Routes>\r\n            <Route path=\"products\" element={<AdminProductList />} />\r\n            <Route path=\"products/add\" element={<AdminProductEdit />} />\r\n            <Route path=\"products/:id/edit\" element={<AdminProductEdit />} />\r\n            <Route path=\"announcements\" element={<AdminAnnouncements />} />\r\n            {/* default admin landing -> product list */}\r\n            <Route path=\"\" element={<AdminProductList />} />\r\n          </Routes>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n","// src/api/axiosInstance.js\r\nimport axios from \"axios\";\r\n\r\n/**\r\n * Clean & reliable axios setup:\r\n * - Uses REACT_APP_API_URL for production (Render backend)\r\n * - Falls back to localhost:4000 during development\r\n * - No domain detection, no auto-prefixing\r\n * - You control all API paths clearly\r\n */\r\n\r\nconst API_BASE =\r\n  process.env.REACT_APP_API_URL ||\r\n  (window.location.hostname === \"localhost\"\r\n    ? \"http://localhost:4000\"\r\n    : \"\");\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: API_BASE, // e.g. https://seemati-backend.onrender.com\r\n  withCredentials: true,\r\n  timeout: 15000,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n    Accept: \"application/json\",\r\n  },\r\n});\r\n\r\n// Debug logging\r\naxiosInstance.interceptors.response.use(\r\n  (res) => res,\r\n  (err) => {\r\n    if (err.response) {\r\n      console.error(\r\n        \"API error:\",\r\n        err.response.status,\r\n        err.response.data || err.response.statusText\r\n      );\r\n    } else {\r\n      console.error(\"Network error:\", err.message);\r\n    }\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nexport default axiosInstance;\r\n"],"names":["BACKEND_ORIGIN","RELATIVE_PATH","AdminProductList","products","setProducts","useState","loading","setLoading","error","setError","useEffect","cancelled","async","fetchJson","url","opts","arguments","length","undefined","res","fetch","_objectSpread","method","credentials","ct","headers","get","text","includes","status","json","JSON","parse","rawText","err","Error","t","trim","looksLikeHtml","startsWith","toLowerCase","console","debug","r1","arr","data","items","Array","isArray","warn","backendUrl","r2","message","load","safe","v","_jsxs","style","padding","children","_jsx","marginBottom","Link","to","color","overflowX","width","borderCollapse","textAlign","borderBottom","map","p","i","id","_id","concat","thumbUrl","thumbnail","images","getThumbnailUrl","verticalAlign","src","alt","title","height","objectFit","borderRadius","border","fontSize","price","stock","category","href","target","rel","AdminProductEdit","useParams","navigate","useNavigate","fileInputRef","useRef","saving","setSaving","product","setProduct","slug","mrp","sku","brand","videoUrl","colors","sizes","description","isPublished","existingImages","setExistingImages","keepMap","setKeepMap","selectedFiles","setSelectedFiles","handleChange","e","name","value","type","checked","prev","resp","axiosInstance","join","imgs","it","forEach","alert","s","previewUrl","URL","revokeObjectURL","display","gap","onSubmit","preventDefault","uploadedUrls","formData","FormData","append","file","put","uploadedArray","uploaded","key","u","filter","Boolean","uploadFilesIfAny","final","push","buildFinalImageList","body","Number","split","success","updatedProduct","onClick","onChange","rows","marginTop","disabled","flexWrap","idx","toggleKeep","ref","multiple","files","from","newSelected","f","createObjectURL","current","removeSelectedPreview","index","copy","removed","splice","API_BASE","process","AdminAnnouncements","messages","setMessages","newText","setNewText","mounted","ok","placeholder","marginLeft","listStyle","m","alignItems","flex","item","moveDown","removeMessage","_","stringify","txt","AdminPage","loc","useLocation","pathname","maxWidth","margin","justifyContent","marginRight","background","Routes","Route","path","element","axios","create","baseURL","withCredentials","timeout","Accept","interceptors","response","use","statusText","Promise","reject"],"ignoreList":[],"sourceRoot":""}