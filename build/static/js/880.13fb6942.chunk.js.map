{"version":3,"file":"static/js/880.13fb6942.chunk.js","mappings":"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","sources":["context/CartContext.jsx","api/axiosInstance.js","utils/imageUtils.js","utils/colorNames.js","pages/ProductDetail.jsx","utils/cartHelpers.js"],"sourcesContent":["// src/context/CartContext.jsx\r\nimport React, { createContext, useReducer, useContext, useEffect } from \"react\";\r\n\r\nconst CartStateContext = createContext(null);\r\nconst CartDispatchContext = createContext(null);\r\n\r\nconst CART_KEY = \"seemati_cart_v1\";\r\n\r\nfunction loadCart() {\r\n  try {\r\n    const raw = localStorage.getItem(CART_KEY);\r\n    return raw ? JSON.parse(raw) : { items: [] };\r\n  } catch {\r\n    return { items: [] };\r\n  }\r\n}\r\n\r\nfunction saveCart(state) {\r\n  try {\r\n    localStorage.setItem(CART_KEY, JSON.stringify(state));\r\n  } catch {}\r\n}\r\n\r\nfunction calculateTotals(items) {\r\n  const subtotal = items.reduce(\r\n    (s, it) => s + Number(it.price || 0) * (it.quantity || 1),\r\n    0\r\n  );\r\n  const shipping = subtotal > 999 ? 0 : 60; // Free shipping above ₹999\r\n  const tax = Math.round(subtotal * 0.05); // Example: 5% tax\r\n  const discount = 0;\r\n  const total = subtotal + shipping + tax - discount;\r\n  return { subtotal, shipping, tax, discount, total };\r\n}\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"INITIALIZE\": {\r\n      return action.payload;\r\n    }\r\n    case \"ADD_ITEM\": {\r\n      const item = action.payload;\r\n      const items = [...state.items];\r\n      const idx = items.findIndex((i) => i.productId === item.productId);\r\n      if (idx > -1) {\r\n        items[idx].quantity = Math.min(\r\n          99,\r\n          (items[idx].quantity || 1) + (item.quantity || 1)\r\n        );\r\n      } else {\r\n        items.push({ ...item, quantity: item.quantity || 1 });\r\n      }\r\n      const totals = calculateTotals(items);\r\n      const next = { ...state, items, totals };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    case \"SET_QTY\": {\r\n      const { productId, quantity } = action.payload;\r\n      const items = state.items.map((i) =>\r\n        i.productId === productId\r\n          ? { ...i, quantity: Math.max(1, quantity) }\r\n          : i\r\n      );\r\n      const totals = calculateTotals(items);\r\n      const next = { ...state, items, totals };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    case \"REMOVE_ITEM\": {\r\n      const items = state.items.filter(\r\n        (i) => i.productId !== action.payload.productId\r\n      );\r\n      const totals = calculateTotals(items);\r\n      const next = { ...state, items, totals };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    case \"CLEAR_CART\": {\r\n      const next = { items: [], totals: calculateTotals([]) };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function CartProvider({ children }) {\r\n  const [state, dispatch] = useReducer(reducer, {\r\n    items: [],\r\n    totals: calculateTotals([]),\r\n  });\r\n\r\n  // initialize once from localStorage\r\n  useEffect(() => {\r\n    const init = loadCart();\r\n    if (!init.totals) init.totals = calculateTotals(init.items || []);\r\n    dispatch({ type: \"INITIALIZE\", payload: init });\r\n  }, []);\r\n\r\n  return (\r\n    <CartStateContext.Provider value={state}>\r\n      <CartDispatchContext.Provider value={dispatch}>\r\n        {children}\r\n      </CartDispatchContext.Provider>\r\n    </CartStateContext.Provider>\r\n  );\r\n}\r\n\r\n// SAFE consumer hooks: never return undefined\r\nexport function useCartState() {\r\n  const ctx = useContext(CartStateContext);\r\n  return ctx ?? { items: [], totals: calculateTotals([]) };\r\n}\r\n\r\nexport function useCartDispatch() {\r\n  const dispatch = useContext(CartDispatchContext);\r\n  return dispatch ?? (() => {});\r\n}\r\n\r\n// ✅ Option A additions (for compatibility with /contexts shim)\r\nexport const useCart = useCartState;   // alias for uniform naming\r\nexport default CartProvider;           // default export for easy import\r\n","// src/api/axiosInstance.js\r\nimport axios from 'axios';\r\n\r\n/**\r\n * axiosInstance\r\n *\r\n * - Uses REACT_APP_API_BASE if defined (e.g. set to http://localhost:4000 for local testing).\r\n * - Otherwise defaults to http://localhost:4000 (local dev) — this lets you test your local backend.\r\n * - Keeps withCredentials true so cookies/auth work same as production.\r\n *\r\n * Important:\r\n * - Your frontend code currently calls endpoints like \"/api/products\" (i.e. includes \"/api\").\r\n *   So this instance intentionally sets the base URL to the host root (no trailing \"/api\")\r\n *   to avoid creating double \"/api/api/...\" URLs.\r\n *\r\n * Usage:\r\n *  - For local testing you can set REACT_APP_API_BASE=http://localhost:4000 in your frontend .env\r\n *  - When you want to use production API, set REACT_APP_API_BASE=https://api.seemati.in\r\n */\r\n\r\nconst BASE = process.env.REACT_APP_API_BASE || 'http://localhost:4000';\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: BASE,\r\n  withCredentials: true,\r\n  timeout: 60000\r\n});\r\n\r\n// Basic request/response logger useful while debugging (optional)\r\naxiosInstance.interceptors.request.use(cfg => {\r\n  // uncomment for verbose local debugging:\r\n  // console.debug('[API request]', cfg.method.toUpperCase(), cfg.url);\r\n  return cfg;\r\n}, err => Promise.reject(err));\r\n\r\naxiosInstance.interceptors.response.use(resp => resp, err => {\r\n  // normalize errors\r\n  if (err && err.response) {\r\n    // you can log or transform here\r\n    // console.error('[API error]', err.response.status, err.response.config && err.response.config.url);\r\n  }\r\n  return Promise.reject(err);\r\n});\r\n\r\nexport default axiosInstance;\r\n","// src/utils/imageUtils.js\r\n// Helpers to turn backend image fields into usable absolute URLs.\r\n\r\n// Prefer REACT_APP_API_URL (used elsewhere in your project).\r\nconst ENV_BASE = process.env.REACT_APP_API_URL || process.env.REACT_APP_API_BASE_URL || \"http://localhost:4000\";\r\nconst BASE = String(ENV_BASE).replace(/\\/+$/, \"\"); // remove trailing slash\r\n\r\nexport function getImageUrl(imgOrUrl) {\r\n  if (!imgOrUrl) return `${BASE}/uploads/placeholder.png`;\r\n\r\n  const raw = typeof imgOrUrl === \"string\"\r\n    ? imgOrUrl\r\n    : imgOrUrl.url || imgOrUrl.path || imgOrUrl.filename || \"\";\r\n\r\n  if (!raw) return `${BASE}/uploads/placeholder.png`;\r\n\r\n  if (/^https?:\\/\\//i.test(raw) || /^\\/\\//.test(raw)) return raw;\r\n  if (raw.startsWith(\"/\")) return `${BASE}${raw}`;\r\n  return `${BASE}/uploads/${raw}`;\r\n}\r\n\r\nexport function getImageUrls(images) {\r\n  if (!Array.isArray(images)) return [];\r\n  const seen = new Set();\r\n  const out = [];\r\n  for (const it of images) {\r\n    try {\r\n      const url = getImageUrl(it);\r\n      if (!url) continue;\r\n      if (seen.has(url)) continue;\r\n      seen.add(url);\r\n      out.push(url);\r\n    } catch (e) {\r\n      continue;\r\n    }\r\n  }\r\n  return out;\r\n}\r\n","// src/utils/colorNames.js\r\n// Small utility to map hex colors to friendly names.\r\n// - Exact match uses the dictionary\r\n// - Fallback finds the nearest named color via RGB distance\r\n\r\nconst NAMED = {\r\n  \"#000000\": \"black\",\r\n  \"#FFFFFF\": \"white\",\r\n  \"#FF0000\": \"red\",\r\n  \"#00FF00\": \"lime\",\r\n  \"#0000FF\": \"blue\",\r\n  \"#FFFF00\": \"yellow\",\r\n  \"#00FFFF\": \"cyan\",\r\n  \"#FF00FF\": \"magenta\",\r\n  \"#C0C0C0\": \"silver\",\r\n  \"#808080\": \"gray\",\r\n  \"#800000\": \"maroon\",\r\n  \"#808000\": \"olive\",\r\n  \"#008000\": \"green\",\r\n  \"#800080\": \"purple\",\r\n  \"#008080\": \"teal\",\r\n  \"#000080\": \"navy\",\r\n  \"#F5F5DC\": \"beige\",\r\n  \"#FFC0CB\": \"pink\",\r\n  \"#FFA500\": \"orange\",\r\n  \"#A52A2A\": \"brown\",\r\n  // common brand / UI colors used on site — add more for better matches\r\n  \"#1026CB\": \"blue\",\r\n  \"#1A84C7\": \"teal\",\r\n  \"#E40C0C\": \"red\",\r\n  \"#010913\": \"black\",\r\n  \"#FFDDEE\": \"light pink\",\r\n  \"#F6F6F6\": \"off white\",\r\n  \"#333333\": \"dark gray\",\r\n  \"#4CAF50\": \"green\",\r\n  \"#FFEB3B\": \"yellow\",\r\n  \"#9C27B0\": \"purple\",\r\n  \"#3F51B5\": \"indigo\"\r\n};\r\n\r\n// normalize hex: accepts '#abc' or 'abc' and returns uppercase 6-digit '#RRGGBB'\r\nfunction normalizeHex(input) {\r\n  if (!input) return null;\r\n  let s = String(input).trim();\r\n  if (!s.length) return null;\r\n  if (s[0] !== \"#\") s = \"#\" + s;\r\n  s = s.toUpperCase();\r\n  // short form #ABC\r\n  if (s.length === 4) {\r\n    const a = s[1], b = s[2], c = s[3];\r\n    s = `#${a}${a}${b}${b}${c}${c}`;\r\n  }\r\n  if (/^#[0-9A-F]{6}$/.test(s)) return s;\r\n  return null;\r\n}\r\n\r\nfunction hexToRgb(hex) {\r\n  const h = normalizeHex(hex);\r\n  if (!h) return null;\r\n  const r = parseInt(h.slice(1, 3), 16);\r\n  const g = parseInt(h.slice(3, 5), 16);\r\n  const b = parseInt(h.slice(5, 7), 16);\r\n  return { r, g, b };\r\n}\r\n\r\nfunction distanceSq(a, b) {\r\n  return (a.r - b.r) ** 2 + (a.g - b.g) ** 2 + (a.b - b.b) ** 2;\r\n}\r\n\r\n// Try exact dictionary match, else nearest named color\r\nexport function hexToName(hex) {\r\n  const h = normalizeHex(hex);\r\n  if (!h) return null;\r\n  if (NAMED[h]) return NAMED[h];\r\n\r\n  // compute nearest\r\n  const target = hexToRgb(h);\r\n  if (!target) return h; // fallback show hex\r\n  let bestName = h;\r\n  let bestDist = Infinity;\r\n  for (const [k, name] of Object.entries(NAMED)) {\r\n    const rgb = hexToRgb(k);\r\n    const d = distanceSq(target, rgb);\r\n    if (d < bestDist) {\r\n      bestDist = d;\r\n      bestName = name || k;\r\n    }\r\n  }\r\n  return bestName || h;\r\n}\r\n\r\n// exports convenience: formatColor for showing (e.g. \"Blue (#1026CB)\")\r\nexport function formatColorName(hex) {\r\n  const name = hexToName(hex);\r\n  const h = normalizeHex(hex);\r\n  if (!h) return name || \"\";\r\n  // if name is same as hex or is a hex-like then just return hex\r\n  if (!name || name.toUpperCase().startsWith(\"#\")) return h;\r\n  return `${name} (${h})`;\r\n}\r\n\r\nexport default {\r\n  hexToName,\r\n  formatColorName,\r\n  normalizeHex\r\n};\r\n","// src/pages/ProductDetail.jsx\r\nimport React, { useEffect, useState, useRef, useCallback } from \"react\";\r\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\r\nimport axios from \"../api/axiosInstance\";\r\nimport { getImageUrl, getImageUrls } from \"../utils/imageUtils\";\r\nimport { addOrIncrementItem, loadCart, computeTotals, SHIPPING_THRESHOLD } from \"../utils/cartHelpers\";\r\nimport { useCartDispatch } from \"../context/CartContext\";\r\nimport colorNames from \"../utils/colorNames\";\r\n\r\n/* ---------- wishlist helpers (unchanged) ---------- */\r\nconst WISHLIST_KEY = \"wishlist_v1\";\r\nfunction loadWishlist() {\r\n  try {\r\n    const raw = localStorage.getItem(WISHLIST_KEY) || \"[]\";\r\n    const arr = JSON.parse(raw);\r\n    return Array.isArray(arr) ? arr : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\nfunction saveWishlist(arr) {\r\n  try {\r\n    localStorage.setItem(WISHLIST_KEY, JSON.stringify(arr));\r\n    try { window.dispatchEvent(new Event(\"wishlist-updated\")); } catch (e) {}\r\n  } catch (e) {\r\n    console.warn(\"saveWishlist failed\", e);\r\n  }\r\n}\r\n\r\n/* burst animation and image-zoom helpers (kept from your original file) */\r\nfunction burstAt(containerEl, options = {}) {\r\n  if (!containerEl) containerEl = document.body;\r\n  const { count = 20, spread = 160, lifetime = 900, colors = [\"#f59e0b\", \"#ef4444\", \"#10b981\", \"#0b5cff\", \"#7c3aed\"] } = options;\r\n\r\n  const rect = containerEl.getBoundingClientRect();\r\n  const wrapper = document.createElement(\"div\");\r\n  wrapper.style.position = \"absolute\";\r\n  wrapper.style.left = `${rect.left + window.scrollX}px`;\r\n  wrapper.style.top = `${rect.top + window.scrollY}px`;\r\n  wrapper.style.width = `${rect.width}px`;\r\n  wrapper.style.height = `${rect.height}px`;\r\n  wrapper.style.pointerEvents = \"none\";\r\n  wrapper.style.overflow = \"visible\";\r\n  wrapper.style.zIndex = 9999;\r\n  document.body.appendChild(wrapper);\r\n\r\n  const cx = rect.width / 2;\r\n  const cy = rect.height / 2;\r\n  const particles = [];\r\n\r\n  for (let i = 0; i < count; i++) {\r\n    const el = document.createElement(\"div\");\r\n    const size = Math.floor(Math.random() * 8) + 6;\r\n    el.style.position = \"absolute\";\r\n    el.style.left = `${cx - size / 2}px`;\r\n    el.style.top = `${cy - size / 2}px`;\r\n    el.style.width = `${size}px`;\r\n    el.style.height = `${size}px`;\r\n    el.style.borderRadius = \"4px\";\r\n    el.style.background = colors[Math.floor(Math.random() * colors.length)];\r\n    el.style.opacity = \"1\";\r\n    el.style.transform = \"translate3d(0,0,0) scale(1)\";\r\n    el.style.willChange = \"transform, opacity\";\r\n    wrapper.appendChild(el);\r\n\r\n    const angle = Math.random() * Math.PI * 2;\r\n    const speed = 2 + Math.random() * (spread / 30);\r\n    const vx = Math.cos(angle) * speed;\r\n    const vy = Math.sin(angle) * speed - Math.random() * 1.5;\r\n    const rot = (Math.random() - 0.5) * 10;\r\n    particles.push({ el, x: cx, y: cy, vx, vy, rot });\r\n  }\r\n\r\n  const start = performance.now();\r\n  function frame(t) {\r\n    const dt = t - start;\r\n    const norm = Math.min(1, dt / lifetime);\r\n    particles.forEach((p) => {\r\n      p.x += p.vx;\r\n      p.y += p.vy;\r\n      p.vy += 0.06;\r\n      const scale = 1 - norm * 0.6;\r\n      p.el.style.transform = `translate3d(${p.x - cx}px, ${p.y - cy}px, 0) rotate(${p.rot * norm}deg) scale(${Math.max(0.2, scale)})`;\r\n      p.el.style.opacity = String(1 - norm);\r\n    });\r\n    if (norm < 1) requestAnimationFrame(frame);\r\n    else setTimeout(() => { try { wrapper.remove(); } catch {} }, 60);\r\n  }\r\n  requestAnimationFrame(frame);\r\n}\r\n\r\nfunction checkAndTriggerBurst(subtotal, containerEl) {\r\n  try {\r\n    const KEY = \"seemati_free_burst_done_v1\";\r\n    const done = localStorage.getItem(KEY) === \"1\";\r\n    if (subtotal >= SHIPPING_THRESHOLD && !done) {\r\n      burstAt(containerEl || document.body, { count: 30, spread: 220, lifetime: 1000 });\r\n      localStorage.setItem(KEY, \"1\");\r\n    } else if (subtotal < SHIPPING_THRESHOLD && done) {\r\n      localStorage.removeItem(KEY);\r\n    }\r\n  } catch (e) {\r\n    console.warn(\"burst check failed\", e);\r\n  }\r\n}\r\n\r\nfunction useImageZoom() {\r\n  const imgRef = useRef(null);\r\n  function onImgMouseMove(e) {\r\n    const img = imgRef.current;\r\n    if (!img) return;\r\n    const rect = img.getBoundingClientRect();\r\n    const x = e.clientX - rect.left;\r\n    const y = e.clientY - rect.top;\r\n    const px = (x / rect.width) * 100;\r\n    const py = (y / rect.height) * 100;\r\n    img.style.transformOrigin = `${px}% ${py}%`;\r\n  }\r\n  function onImgEnter() {\r\n    const img = imgRef.current;\r\n    if (!img) return;\r\n    img.style.transition = \"transform 160ms cubic-bezier(.2,.9,.2,1)\";\r\n    img.style.transform = \"scale(1.22)\";\r\n    img.style.willChange = \"transform\";\r\n  }\r\n  function onImgLeave() {\r\n    const img = imgRef.current;\r\n    if (!img) return;\r\n    img.style.transform = \"scale(1)\";\r\n    img.style.transition = \"transform 260ms cubic-bezier(.2,.9,.2,1)\";\r\n    setTimeout(() => { if (img) img.style.willChange = \"\"; }, 300);\r\n  }\r\n  return { imgRef, onImgMouseMove, onImgEnter, onImgLeave };\r\n}\r\n\r\n/* ---------- small helpers for color/video/image ---------- */\r\n\r\nconst PLACEHOLDER = \"/images/placeholder.png\";\r\n\r\nfunction normalizeHex(raw) {\r\n  if (!raw) return null;\r\n  let s = String(raw).trim();\r\n  if (s.startsWith(\"0x\")) s = s.slice(2);\r\n  if (s.startsWith(\"#\")) s = s.slice(1);\r\n  s = s.replace(/[^0-9a-fA-F]/g, \"\");\r\n  if (s.length === 3) s = s.split(\"\").map(c => c + c).join(\"\");\r\n  if (s.length === 6) return (\"#\" + s).toUpperCase();\r\n  return null;\r\n}\r\n\r\nfunction youtubeEmbedUrl(raw) {\r\n  if (!raw || typeof raw !== \"string\") return null;\r\n  const s = raw.trim();\r\n  try {\r\n    const url = new URL(s, window.location.origin);\r\n    const host = url.hostname.toLowerCase();\r\n    if (host.includes(\"youtube.com\")) {\r\n      if (url.pathname.startsWith(\"/embed/\")) return `https://www.youtube.com${url.pathname}${url.search || \"\"}`;\r\n      const vid = url.searchParams.get(\"v\");\r\n      if (vid) return `https://www.youtube.com/embed/${vid}`;\r\n    }\r\n    if (host.includes(\"youtu.be\")) {\r\n      const vid = url.pathname.replace(\"/\", \"\");\r\n      if (vid) return `https://www.youtube.com/embed/${vid}`;\r\n    }\r\n  } catch (err) {\r\n    const maybeId = s.match(/^[A-Za-z0-9_-]{8,}$/);\r\n    if (maybeId) return `https://www.youtube.com/embed/${maybeId[0]}`;\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction isDirectVideoUrl(u) {\r\n  if (!u || typeof u !== \"string\") return false;\r\n  const lower = u.toLowerCase();\r\n  return lower.endsWith(\".mp4\") || lower.endsWith(\".webm\") || lower.endsWith(\".ogg\");\r\n}\r\n\r\n/* ---------------- ProductDetail component ---------------- */\r\nexport default function ProductDetailPage({ products = [] }) {\r\n  const { slug } = useParams();\r\n  const navigate = useNavigate();\r\n  const cartDispatch = useCartDispatch();\r\n\r\n  const [product, setProduct] = useState(() => {\r\n    try {\r\n      if (Array.isArray(products) && products.length > 0) {\r\n        return products.find((p) => p.slug === slug || p._id === slug || p.id === slug) ?? null;\r\n      }\r\n      return null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  });\r\n\r\n  const [loading, setLoading] = useState(product ? false : true);\r\n  const [error, setError] = useState(null);\r\n  const [adding, setAdding] = useState(false);\r\n  const productImageContainerRef = useRef(null);\r\n\r\n  const { imgRef, onImgMouseMove, onImgEnter, onImgLeave } = useImageZoom();\r\n\r\n  // wishlist state\r\n  const [saved, setSaved] = useState(false);\r\n\r\n  // option selections\r\n  const [selectedColor, setSelectedColor] = useState(null);\r\n  const [selectedSize, setSelectedSize] = useState(null);\r\n  const [quantity, setQuantity] = useState(1);\r\n\r\n  // gallery state\r\n  const [galleryUrls, setGalleryUrls] = useState([]); // array of resolved urls\r\n  const [galleryIndex, setGalleryIndex] = useState(0);\r\n\r\n  // color list derived (each { raw, hex, name, imageUrl })\r\n  const [derivedColors, setDerivedColors] = useState([]);\r\n\r\n  // when a color has its own image not already in gallery, we temporarily show it\r\n  const [tempColorImage, setTempColorImage] = useState(null);\r\n\r\n  // load wishlist status and set defaults\r\n  useEffect(() => {\r\n    try {\r\n      const arr = loadWishlist();\r\n      const pid = product?._id ?? product?.id ?? product?.slug;\r\n      setSaved(arr.some(i => (i.productId ?? i._id ?? i.id ?? i.slug) === pid));\r\n    } catch {\r\n      setSaved(false);\r\n    }\r\n\r\n    if (product) {\r\n      if (Array.isArray(product.colors) && product.colors.length > 0) {\r\n        setSelectedColor((prev) => prev ?? product.colors[0]);\r\n      } else {\r\n        setSelectedColor(null);\r\n      }\r\n      if (Array.isArray(product.sizes) && product.sizes.length > 0) {\r\n        setSelectedSize((prev) => prev ?? product.sizes[0]);\r\n      } else {\r\n        setSelectedSize(null);\r\n      }\r\n      setQuantity(1);\r\n    }\r\n  }, [product?.slug, product?.colors, product?.sizes, product?._id, product?.id]);\r\n\r\n  // fetch product if not present — use axios instance (backend baseURL)\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function fetchProduct() {\r\n      if (product) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      // candidate endpoints on backend — call backend base via axios instance\r\n      const endpoints = [\r\n        `/api/products?slug=${encodeURIComponent(slug)}`,\r\n        `/api/products/${encodeURIComponent(slug)}`,\r\n      ];\r\n\r\n      let lastError = null;\r\n      for (const ep of endpoints) {\r\n        try {\r\n          const res = await axios.get(ep);\r\n          if (!mounted) return;\r\n\r\n          const data = res.data;\r\n          let resolved = null;\r\n\r\n          if (data) {\r\n            if (Array.isArray(data)) {\r\n              resolved = data.find(p => p.slug === slug || p._id === slug || p.id === slug) ?? data[0] ?? null;\r\n            } else if (Array.isArray(data.products)) {\r\n              resolved = data.products.find(p => p.slug === slug || p._id === slug || p.id === slug) ?? data.products[0] ?? null;\r\n            } else if (data.product) {\r\n              resolved = data.product;\r\n            } else if (data._id || data.slug || data.id) {\r\n              resolved = data;\r\n            } else if (data.items && Array.isArray(data.items)) {\r\n              resolved = data.items.find(p => p.slug === slug || p._id === slug || p.id === slug) ?? data.items[0] ?? null;\r\n            }\r\n          }\r\n\r\n          if (resolved) { setProduct(resolved); setLoading(false); return; }\r\n          lastError = `No product found in response from ${ep}`;\r\n        } catch (err) {\r\n          lastError = err.message || String(err);\r\n          console.warn(\"[ProductDetail] fetch error\", err);\r\n        }\r\n      }\r\n\r\n      if (mounted) { setLoading(false); setProduct(null); setError(lastError || \"Product not found.\"); }\r\n    }\r\n\r\n    fetchProduct();\r\n    return () => { mounted = false; };\r\n  }, [slug]);\r\n\r\n  // Build gallery URLs whenever product.images (or product.image/thumbnail fallback) changes\r\n  useEffect(() => {\r\n    // gather base images\r\n    const imgs = Array.isArray(product?.images) ? [...product.images] : [];\r\n    if ((imgs.length === 0) && product?.image) imgs.push(product.image);\r\n    if ((imgs.length === 0) && product?.thumbnail) imgs.push(product.thumbnail);\r\n\r\n    // resolve urls using helper\r\n    const urls = getImageUrls(imgs);\r\n    setGalleryUrls(urls);\r\n    setGalleryIndex(0);\r\n    setTempColorImage(null);\r\n\r\n    // build derivedColors using product.colors + color-image mapping (supports multiple shapes)\r\n    const rawColors = Array.isArray(product?.colors)\r\n      ? product.colors\r\n      : (product?.colors ? String(product.colors).split(\",\").map(s => s.trim()).filter(Boolean) : []);\r\n\r\n    // color->image map: support array/object shapes\r\n    const colorImageMap = {};\r\n    const rawColorImgs =\r\n      product?.colorImages ||\r\n      product?.color_image_map ||\r\n      product?.color_map ||\r\n      product?.colorImagesMap ||\r\n      product?.colorImagesObj ||\r\n      product?.colorImageMap ||\r\n      product?.color_image ||\r\n      null;\r\n\r\n    if (rawColorImgs) {\r\n      if (Array.isArray(rawColorImgs)) {\r\n        rawColorImgs.forEach((ci) => {\r\n          if (!ci) return;\r\n          const name = (ci.name || ci.label || ci.color || \"\").toString().trim().toLowerCase();\r\n          const img = ci.image || ci.url || ci.src || ci.path || null;\r\n          if (name && img) colorImageMap[name] = getImageUrl(img);\r\n        });\r\n      } else if (typeof rawColorImgs === \"object\") {\r\n        Object.entries(rawColorImgs).forEach(([k, v]) => {\r\n          const name = String(k).trim().toLowerCase();\r\n          const img = typeof v === \"string\" ? v : (v && (v.url || v.image || v.src || v.path));\r\n          if (name && img) colorImageMap[name] = getImageUrl(img);\r\n        });\r\n      }\r\n    }\r\n\r\n    // compose derived colors\r\n    const derived = rawColors.map((raw) => {\r\n      const hex = normalizeHex(raw);\r\n      const displayHex = hex || null;\r\n      const friendly = displayHex ? colorNames.hexToName(displayHex) : (String(raw || \"\"));\r\n      const mappedImg =\r\n        (colorImageMap && (colorImageMap[String(raw).toLowerCase()] || colorImageMap[String(friendly).toLowerCase()])) || null;\r\n      const imageUrl = mappedImg ? mappedImg : null;\r\n      return { raw, displayHex, friendly, imageUrl };\r\n    });\r\n\r\n    setDerivedColors(derived);\r\n  }, [product?.images, product?.image, product?.thumbnail, product?.colors, product?.slug, product?._id]);\r\n\r\n  // floating shipping helper state\r\n  const [cartTotals, setCartTotals] = useState(() => {\r\n    try { const raw = loadCart(); return computeTotals(Array.isArray(raw) ? { items: raw } : raw); } catch { return computeTotals({ items: [] }); }\r\n  });\r\n\r\n  useEffect(() => {\r\n    function onCartUpdated() {\r\n      try { const raw = loadCart(); const comp = computeTotals(Array.isArray(raw) ? { items: raw } : raw); setCartTotals(comp); } catch (e) {}\r\n    }\r\n    window.addEventListener(\"cart-updated\", onCartUpdated);\r\n    onCartUpdated();\r\n    return () => window.removeEventListener(\"cart-updated\", onCartUpdated);\r\n  }, []);\r\n\r\n  // keyboard gallery navigation\r\n  const onKey = useCallback((e) => {\r\n    if (!galleryUrls || galleryUrls.length <= 1) return;\r\n    if (e.key === \"ArrowLeft\") setGalleryIndex((i) => (i - 1 + galleryUrls.length) % galleryUrls.length);\r\n    if (e.key === \"ArrowRight\") setGalleryIndex((i) => (i + 1) % galleryUrls.length);\r\n  }, [galleryUrls]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n  }, [onKey]);\r\n\r\n  // wishlist toggle\r\n  function toggleWishlist(e) {\r\n    e?.preventDefault?.();\r\n    if (!product) return;\r\n    const pid = product._id ?? product.id ?? product.slug ?? null;\r\n    if (!pid) return;\r\n    const arr = loadWishlist();\r\n    const exists = arr.find(i => (i.productId ?? i._id ?? i.id ?? i.slug) === pid);\r\n    let next;\r\n    if (exists) {\r\n      next = arr.filter(i => (i.productId ?? i._id ?? i.id ?? i.slug) !== pid);\r\n      saveWishlist(next);\r\n      setSaved(false);\r\n    } else {\r\n      const payload = {\r\n        productId: pid,\r\n        _id: product._id ?? pid,\r\n        id: product.id ?? pid,\r\n        slug: product.slug ?? undefined,\r\n        title: product.title,\r\n        price: Number(product.price ?? 0),\r\n        image: product.image ?? (product.images && product.images[0] && (product.images[0].url || product.images[0])) ?? null\r\n      };\r\n      next = [...arr, payload];\r\n      saveWishlist(next);\r\n      setSaved(true);\r\n    }\r\n  }\r\n\r\n  function clampQty(q) {\r\n    const n = Math.max(1, Math.floor(Number(q) || 1));\r\n    if (product && typeof product.stock === \"number\") {\r\n      return Math.min(n, Math.max(1, product.stock));\r\n    }\r\n    return n;\r\n  }\r\n  function incQty() { setQuantity((q) => clampQty(q + 1)); }\r\n  function decQty() { setQuantity((q) => clampQty(q - 1)); }\r\n  function onQtyChange(e) { setQuantity(clampQty(e.target.value)); }\r\n\r\n  async function handleAddToCart(e) {\r\n    e?.preventDefault?.();\r\n    if (!product) return;\r\n    if (Array.isArray(product.colors) && product.colors.length > 0 && !selectedColor) { setError(\"Please select a color.\"); return; }\r\n    if (Array.isArray(product.sizes) && product.sizes.length > 0 && !selectedSize) { setError(\"Please select a size.\"); return; }\r\n\r\n    setAdding(true);\r\n    setError(null);\r\n\r\n    const idBase = product._id ?? product.id ?? product.slug ?? Math.random().toString(36).slice(2, 9);\r\n    const variantKeyParts = [idBase];\r\n    if (selectedColor) variantKeyParts.push(`c:${String(selectedColor)}`);\r\n    if (selectedSize) variantKeyParts.push(`s:${String(selectedSize)}`);\r\n    const variantKey = variantKeyParts.join(\"|\");\r\n\r\n    const itemPayload = {\r\n      _id: variantKey,\r\n      productId: idBase,\r\n      slug: product.slug,\r\n      title: product.title ?? product.name ?? \"Product\",\r\n      price: Number(product.price ?? product.salePrice ?? 0),\r\n      images: product.images ?? (product.image ? [{ url: product.image }] : []),\r\n      image: product.imageUrl ?? (product.images && product.images[0] ? (product.images[0].url || product.images[0]) : null),\r\n      quantity: clampQty(quantity),\r\n      meta: { color: selectedColor ?? null, size: selectedSize ?? null },\r\n    };\r\n\r\n    try {\r\n      const saved = await addOrIncrementItem(itemPayload, itemPayload.quantity);\r\n      try { if (typeof cartDispatch === \"function\") cartDispatch({ type: \"INITIALIZE\", payload: saved }); } catch (err) { console.warn(\"[ProductDetail] context initialize failed:\", err); }\r\n      try { window.dispatchEvent(new Event(\"cart-updated\")); } catch (e) {}\r\n      try { const comp = computeTotals(saved); checkAndTriggerBurst(comp.subtotal || 0, productImageContainerRef.current || document.body); } catch (e) {}\r\n    } catch (err) {\r\n      console.error(\"Add to cart failed (product page):\", err);\r\n      setError(\"Unable to add to cart. See console for details.\");\r\n    } finally {\r\n      setAdding(false);\r\n    }\r\n  }\r\n\r\n  const leftForFree = Math.max(0, (SHIPPING_THRESHOLD - (cartTotals.subtotal || 0)));\r\n\r\n  // Main displayed image: prefer tempColorImage if set, else selected gallery item\r\n  const fallbackSrc =\r\n    product?.thumbnail ||\r\n    (product?.images && product.images[0] && (product.images[0].url || product.images[0])) ||\r\n    product?.image ||\r\n    null;\r\n  const mainImageSrc = tempColorImage ? tempColorImage : (galleryUrls.length > 0 ? galleryUrls[galleryIndex] : getImageUrl(fallbackSrc));\r\n\r\n  // Video detection (supports product.videoUrl / video / video_link)\r\n  const possibleVideo =\r\n    product?.videoUrl || product?.video || product?.video_url || product?.videoLink || product?.video_link || product?.productVideo || \"\";\r\n  const embedUrl = youtubeEmbedUrl(possibleVideo);\r\n\r\n  if (loading) {\r\n    return <div style={{ padding: 24 }}><p>Loading product…</p></div>;\r\n  }\r\n\r\n  if (!product) {\r\n    return (\r\n      <div style={{ padding: 24 }}>\r\n        <p>Product not found.</p>\r\n        <Link to=\"/shop\">Back to shop</Link>\r\n        {error ? <div style={{ color: \"#b91c1c\", marginTop: 12 }}>Error: {String(error)}</div> : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /* ----------- LAYOUT: grid 3 columns (left gallery / center details / right video) ----------- */\r\n  // On small screens the grid areas will stack naturally by using minmax and auto-fit via CSS fallback\r\n  return (\r\n    <div style={{ padding: 24 }}>\r\n      <button onClick={() => navigate(-1)} style={{ marginBottom: 12 }}>← Back</button>\r\n\r\n      <div\r\n        style={{\r\n          display: \"grid\",\r\n          gridTemplateColumns: embedUrl || isDirectVideoUrl(possibleVideo) ? \"minmax(360px, 520px) 1fr 320px\" : \"minmax(360px, 520px) 1fr\",\r\n          gap: 24,\r\n          alignItems: \"start\"\r\n        }}\r\n      >\r\n        {/* Left: gallery */}\r\n        <div style={{ width: \"100%\" }}>\r\n          <div\r\n            ref={productImageContainerRef}\r\n            style={{\r\n              height: 420,\r\n              borderRadius: 8,\r\n              border: \"1px solid #f3f3f3\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              overflow: \"hidden\",\r\n              background: \"#fff\",\r\n              position: \"relative\"\r\n            }}\r\n          >\r\n            {galleryUrls.length > 1 && !tempColorImage && (\r\n              <button\r\n                onClick={() => setGalleryIndex((i) => (i - 1 + galleryUrls.length) % galleryUrls.length)}\r\n                aria-label=\"Previous image\"\r\n                style={{\r\n                  position: \"absolute\",\r\n                  left: 8,\r\n                  top: \"50%\",\r\n                  transform: \"translateY(-50%)\",\r\n                  background: \"rgba(255,255,255,0.9)\",\r\n                  border: \"none\",\r\n                  padding: 8,\r\n                  borderRadius: 6,\r\n                  cursor: \"pointer\",\r\n                  zIndex: 5\r\n                }}\r\n              >◀</button>\r\n            )}\r\n\r\n            <img\r\n              ref={imgRef}\r\n              src={mainImageSrc}\r\n              alt={product.title}\r\n              onMouseMove={onImgMouseMove}\r\n              onMouseEnter={onImgEnter}\r\n              onMouseLeave={onImgLeave}\r\n              style={{\r\n                maxWidth: \"100%\",\r\n                maxHeight: \"100%\",\r\n                objectFit: \"contain\",\r\n                display: \"block\",\r\n                transition: \"transform 180ms cubic-bezier(.2,.9,.2,1)\",\r\n                transform: \"scale(1)\",\r\n              }}\r\n              onError={(e) => { e.target.src = getImageUrl(null); }}\r\n            />\r\n\r\n            {galleryUrls.length > 1 && !tempColorImage && (\r\n              <button\r\n                onClick={() => setGalleryIndex((i) => (i + 1) % galleryUrls.length)}\r\n                aria-label=\"Next image\"\r\n                style={{\r\n                  position: \"absolute\",\r\n                  right: 8,\r\n                  top: \"50%\",\r\n                  transform: \"translateY(-50%)\",\r\n                  background: \"rgba(255,255,255,0.9)\",\r\n                  border: \"none\",\r\n                  padding: 8,\r\n                  borderRadius: 6,\r\n                  cursor: \"pointer\",\r\n                  zIndex: 5\r\n                }}\r\n              >▶</button>\r\n            )}\r\n          </div>\r\n\r\n          {/* thumbnails (smaller) */}\r\n          <div style={{ display: \"flex\", gap: 8, marginTop: 10, flexWrap: \"wrap\" }}>\r\n            {galleryUrls.map((u, i) => (\r\n              <button\r\n                key={u + i}\r\n                onClick={() => { setTempColorImage(null); setGalleryIndex(i); }}\r\n                style={{\r\n                  border: i === galleryIndex && !tempColorImage ? \"2px solid #0b5cff\" : \"1px solid #eee\",\r\n                  padding: 0,\r\n                  borderRadius: 6,\r\n                  overflow: \"hidden\",\r\n                  width: 60,\r\n                  height: 60,\r\n                  background: \"#fff\",\r\n                  cursor: \"pointer\",\r\n                }}\r\n                aria-label={`Show image ${i + 1}`}\r\n              >\r\n                <img src={u} alt={`${product.title}-${i}`} style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }} />\r\n              </button>\r\n            ))}\r\n\r\n            {derivedColors.map((c, idx) => {\r\n              if (!c.imageUrl) return null;\r\n              const exists = galleryUrls.includes(c.imageUrl);\r\n              if (exists) return null;\r\n              return (\r\n                <button\r\n                  key={`cimg-${idx}`}\r\n                  onClick={() => { setTempColorImage(c.imageUrl); setSelectedColor(c.raw); }}\r\n                  title={c.friendly}\r\n                  style={{\r\n                    width: 60, height: 60, borderRadius: 6, overflow: \"hidden\",\r\n                    border: tempColorImage === c.imageUrl ? \"2px solid #0b5cff\" : \"1px solid #eee\",\r\n                    padding: 0, background: \"#fff\", cursor: \"pointer\"\r\n                  }}\r\n                >\r\n                  <img src={c.imageUrl} alt={`color-${idx}`} style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }} />\r\n                </button>\r\n              );\r\n            })}\r\n\r\n            {possibleVideo && (\r\n              <div title=\"Video\" onClick={() => { const el = document.getElementById(\"product-video-player\"); if (el) el.scrollIntoView({behavior:\"smooth\", block:\"center\"}); }}\r\n                style={{ width: 60, height: 60, borderRadius: 6, display: \"flex\", alignItems: \"center\", justifyContent: \"center\", border: \"1px solid #eee\", background: \"#fafafa\", cursor: \"pointer\" }}>\r\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\"><path d=\"M5 3v18l15-9L5 3z\" fill=\"currentColor\"/></svg>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Middle: product info (colors + sizes + CTA) */}\r\n        <div style={{ minWidth: 320 }}>\r\n          <h1 style={{ marginTop: 0 }}>{product.title}</h1>\r\n          {product.description && <p style={{ color: \"#374151\" }}>{product.description}</p>}\r\n\r\n          <div style={{ marginTop: 12 }}>\r\n            <div style={{ fontSize: 14, color: \"#6b7280\", textDecoration: product.mrp > product.price ? \"line-through\" : \"none\" }}>\r\n              MRP: ₹{Number(product.mrp ?? product.compareAtPrice ?? product.price ?? 0).toFixed(2)}\r\n            </div>\r\n            <div style={{ marginTop: 6, fontSize: 22, fontWeight: 800, color: \"#0b5cff\" }}>\r\n              ₹{Number(product.price ?? 0).toFixed(2)}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Colors: render improved swatches with friendly names (smaller) */}\r\n          {derivedColors.length > 0 && (\r\n            <div style={{ marginTop: 14 }}>\r\n              <div style={{ marginBottom: 8, fontWeight: 700 }}>Color</div>\r\n              <div style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\", alignItems: \"center\" }}>\r\n                {derivedColors.map((c) => {\r\n                  const label = c.friendly || (c.displayHex || c.raw);\r\n                  const active = selectedColor === c.raw;\r\n                  const swatchBg = c.displayHex || \"#fff\";\r\n                  return (\r\n                    <div key={String(c.raw)} style={{ textAlign: \"center\", minWidth: 72 }}>\r\n                      <button\r\n                        onClick={() => {\r\n                          setSelectedColor(c.raw);\r\n                          if (c.imageUrl) {\r\n                            const idx = galleryUrls.findIndex(u => u === c.imageUrl);\r\n                            if (idx >= 0) { setTempColorImage(null); setGalleryIndex(idx); }\r\n                            else { setTempColorImage(c.imageUrl); }\r\n                          } else {\r\n                            setTempColorImage(null);\r\n                            if (galleryUrls.length > 0) setGalleryIndex(0);\r\n                          }\r\n                        }}\r\n                        title={label}\r\n                        style={{\r\n                          width: 36, height: 28, borderRadius: 8,\r\n                          border: active ? \"2px solid #0b5cff\" : \"1px solid #e6e6e6\",\r\n                          background: swatchBg,\r\n                          backgroundImage: c.imageUrl && !c.displayHex ? `url(${c.imageUrl})` : undefined,\r\n                          backgroundSize: \"cover\",\r\n                          backgroundPosition: \"center\",\r\n                          cursor: \"pointer\",\r\n                          display: \"inline-block\"\r\n                        }}\r\n                      />\r\n                      <div style={{ marginTop: 6, fontSize: 12 }}>{label}</div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {Array.isArray(product.sizes) && product.sizes.length > 0 && (\r\n            <div style={{ marginTop: 14 }}>\r\n              <div style={{ marginBottom: 8, fontWeight: 700 }}>Size</div>\r\n              <div style={{ display: \"flex\", gap: 8, flexWrap: \"wrap\" }}>\r\n                {product.sizes.map((s) => {\r\n                  const active = selectedSize === s;\r\n                  return (\r\n                    <button\r\n                      key={s}\r\n                      onClick={() => setSelectedSize(s)}\r\n                      style={{\r\n                        padding: \"8px 12px\",\r\n                        borderRadius: 8,\r\n                        border: active ? \"2px solid #0b5cff\" : \"1px solid #e6e6e6\",\r\n                        background: active ? \"#eef2ff\" : \"#fff\",\r\n                        cursor: \"pointer\",\r\n                      }}\r\n                    >\r\n                      {s}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div style={{ marginTop: 14, display: \"flex\", alignItems: \"center\", gap: 8 }}>\r\n            <div style={{ fontWeight: 700 }}>Quantity</div>\r\n            <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n              <button onClick={decQty} style={{ width: 36, height: 32 }}>-</button>\r\n              <input value={quantity} onChange={onQtyChange} style={{ width: 60, textAlign: \"center\", padding: 6 }} />\r\n              <button onClick={incQty} style={{ width: 36, height: 32 }}>+</button>\r\n            </div>\r\n            {typeof product.stock === \"number\" && (\r\n              <div style={{ marginLeft: 12, color: \"#6b7280\" }}>Stock: {product.stock}</div>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ marginTop: 18, display: \"flex\", gap: 12 }}>\r\n            <button\r\n              onClick={handleAddToCart}\r\n              disabled={adding}\r\n              style={{\r\n                background: \"#f59e0b\",\r\n                color: \"#fff\",\r\n                border: \"none\",\r\n                padding: \"10px 14px\",\r\n                borderRadius: 6,\r\n                fontWeight: 700,\r\n                cursor: adding ? \"progress\" : \"pointer\",\r\n              }}\r\n            >\r\n              {adding ? \"Adding...\" : \"Add to cart\"}\r\n            </button>\r\n\r\n            <button\r\n              onClick={toggleWishlist}\r\n              title={saved ? \"Saved to wishlist\" : \"Save for later\"}\r\n              aria-pressed={saved}\r\n              style={{\r\n                padding: \"10px 14px\",\r\n                borderRadius: 6,\r\n                border: saved ? \"1px solid #ef4444\" : \"1px solid #e6e6e6\",\r\n                background: saved ? \"#fff0f0\" : \"#fff\",\r\n                color: saved ? \"#ef4444\" : \"#111\",\r\n                cursor: \"pointer\",\r\n                fontWeight: 700,\r\n              }}\r\n            >\r\n              {saved ? \"♥ Saved\" : \"♡ Save\"}\r\n            </button>\r\n\r\n            <Link to=\"/cart\"><button style={{ padding: \"10px 14px\", borderRadius: 6, border: \"1px solid #ccc\", background: \"#fff\" }}>Go to cart</button></Link>\r\n          </div>\r\n\r\n          {error ? <div style={{ color: \"#b91c1c\", marginTop: 12 }}>{error}</div> : null}\r\n\r\n          <div style={{ marginTop: 18, color: \"#6b7280\" }}>\r\n            <div>Brand: {product.brand ?? \"—\"}</div>\r\n            <div>Category: {product.category ?? \"—\"}</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right: video (only rendered if video exists) */}\r\n        {possibleVideo && (\r\n          <div style={{ alignSelf: \"start\" }}>\r\n            <div style={{ marginBottom: 8, fontWeight: 700 }}>Product video</div>\r\n            {embedUrl ? (\r\n              <div style={{ width: \"100%\", height: 220, border: \"1px solid #eee\", borderRadius: 8, overflow: \"hidden\", background: \"#000\" }}>\r\n                <iframe\r\n                  title=\"product-video\"\r\n                  width=\"100%\"\r\n                  height=\"100%\"\r\n                  src={embedUrl}\r\n                  frameBorder=\"0\"\r\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                  allowFullScreen\r\n                />\r\n              </div>\r\n            ) : isDirectVideoUrl(possibleVideo) ? (\r\n              <div style={{ width: \"100%\", height: 220, border: \"1px solid #eee\", borderRadius: 8, overflow: \"hidden\", background: \"#000\" }}>\r\n                <video controls style={{ width: \"100%\", height: \"100%\" }}>\r\n                  <source src={possibleVideo} />\r\n                </video>\r\n              </div>\r\n            ) : (\r\n              <div style={{ fontSize: 13 }}>\r\n                <a href={possibleVideo} target=\"_blank\" rel=\"noreferrer\">Open video</a>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* shipping floating bar kept unchanged */}\r\n      <div\r\n        aria-hidden=\"false\"\r\n        style={{\r\n          position: \"fixed\",\r\n          left: 20,\r\n          right: 20,\r\n          bottom: 20,\r\n          margin: \"0 auto\",\r\n          maxWidth: 980,\r\n          background: \"#e6fffa\",\r\n          border: \"1px solid #bbf7d0\",\r\n          color: \"#064e3b\",\r\n          padding: \"12px 18px\",\r\n          borderRadius: 999,\r\n          boxShadow: \"0 6px 18px rgba(2,6,23,0.06)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          gap: 12,\r\n          justifyContent: \"center\",\r\n          zIndex: 9999,\r\n        }}\r\n      >\r\n        {leftForFree > 0 ? (\r\n          <>\r\n            <span style={{ fontWeight: 700 }}>📦</span>\r\n            <div style={{ fontWeight: 700 }}>Add ₹{leftForFree.toFixed(2)} more to get free shipping.</div>\r\n            <div style={{ color: \"#065f46\" }}>Subtotal ₹{(cartTotals.subtotal || 0).toFixed(2)}</div>\r\n            <div style={{ marginLeft: 12 }}>\r\n              <button onClick={() => navigate(\"/cart\")} style={{ background: \"#0b5cff\", color: \"#fff\", padding: \"8px 12px\", borderRadius: 6, border: \"none\" }}>\r\n                View Cart\r\n              </button>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <span style={{ fontWeight: 700 }}>🎉</span>\r\n            <div style={{ fontWeight: 700 }}>You have free shipping! Subtotal ₹{(cartTotals.subtotal || 0).toFixed(2)}</div>\r\n            <div style={{ marginLeft: 12 }}>\r\n              <button onClick={() => burstAt(productImageContainerRef.current || document.body, { count: 36 })} style={{ background: \"#10b981\", color: \"#fff\", padding: \"8px 12px\", borderRadius: 6, border: \"none\" }}>\r\n                Celebrate\r\n              </button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/cartHelpers.js\r\n// Centralized cart helpers — normalize ids, persist as { items: [...] }, and emit `cart-updated`.\r\n\r\nexport const CART_KEY = \"seemati_cart_v1\";\r\nexport const SHIPPING_THRESHOLD = 999;\r\nconst DEFAULT_SHIPPING = 60;\r\n\r\nfunction safeParse(raw) {\r\n  try {\r\n    return JSON.parse(raw);\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n// Always return shape: { items: [ ... ] }\r\nexport function loadCart() {\r\n  try {\r\n    const raw = localStorage.getItem(CART_KEY);\r\n    if (!raw) return { items: [] };\r\n    const parsed = safeParse(raw);\r\n    if (!parsed) return { items: [] };\r\n    // Accept either array or object form\r\n    if (Array.isArray(parsed)) return { items: parsed };\r\n    if (parsed.items && Array.isArray(parsed.items)) return parsed;\r\n    // fallback: unknown shape -> attempt to find array value\r\n    for (const k of Object.keys(parsed)) {\r\n      if (Array.isArray(parsed[k])) return { items: parsed[k] };\r\n    }\r\n    return { items: [] };\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] loadCart error\", e);\r\n    return { items: [] };\r\n  }\r\n}\r\n\r\nexport function saveCart(cartObj) {\r\n  try {\r\n    const normalized = Array.isArray(cartObj) ? { items: cartObj } : (cartObj && cartObj.items ? { items: cartObj.items } : { items: [] });\r\n    localStorage.setItem(CART_KEY, JSON.stringify(normalized.items));\r\n    // Note: we save as array to be tolerant with older code that expects an array in storage.\r\n    // Also emit event to notify UI listeners.\r\n    try { window.dispatchEvent(new Event(\"cart-updated\")); } catch (e) {}\r\n    return normalized;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] saveCart error\", e);\r\n    return { items: [] };\r\n  }\r\n}\r\n\r\nfunction normalizeId(item) {\r\n  return item.productId ?? item._id ?? item.id ?? item.slug ?? String(item.title ?? Math.random().toString(36).slice(2,9));\r\n}\r\n\r\nfunction normalizeItemShape(item) {\r\n  const pid = normalizeId(item);\r\n  return {\r\n    productId: pid,\r\n    _id: item._id ?? pid,\r\n    id: item.id ?? pid,\r\n    slug: item.slug ?? undefined,\r\n    title: item.title ?? item.name ?? \"Product\",\r\n    price: Number(item.price ?? item.salePrice ?? item.amount ?? 0),\r\n    image: item.image ?? (item.images && item.images[0] && (item.images[0].url || item.images[0])) ?? null,\r\n    images: item.images ?? (item.image ? [{ url: item.image }] : []),\r\n    quantity: Math.max(1, Number(item.quantity ?? item.qty ?? 1)),\r\n    // keep any extra fields if present\r\n    ...Object.keys(item).reduce((acc, k) => {\r\n      if (![\"productId\",\"_id\",\"id\",\"slug\",\"title\",\"price\",\"image\",\"images\",\"quantity\"].includes(k)) acc[k] = item[k];\r\n      return acc;\r\n    }, {})\r\n  };\r\n}\r\n\r\nexport function computeTotals(cartLike) {\r\n  const obj = Array.isArray(cartLike) ? { items: cartLike } : (cartLike || { items: [] });\r\n  const items = obj.items || [];\r\n  const subtotal = items.reduce((s, it) => s + (Number(it.price || 0) * Number(it.quantity || it.qty || 0)), 0);\r\n  const shipping = subtotal >= SHIPPING_THRESHOLD ? 0 : DEFAULT_SHIPPING;\r\n  const tax = Math.round(subtotal * 0.05); // example tax\r\n  const discount = 0;\r\n  const total = subtotal + shipping + tax - discount;\r\n  return { items, subtotal, shipping, tax, discount, total };\r\n}\r\n\r\n/**\r\n * Add item (or increment existing). Returns the normalized cart { items: [...] }.\r\n * item: object with at least id/title/price. qtyOrDelta: number to add (default 1)\r\n */\r\nexport function addOrIncrementItem(item, qtyOrDelta = 1) {\r\n  try {\r\n    const cart = loadCart();\r\n    const items = Array.isArray(cart.items) ? [...cart.items] : [];\r\n    const incoming = normalizeItemShape(item);\r\n    const productId = incoming.productId;\r\n    const idx = items.findIndex(i => (i.productId ?? i._id ?? i.id ?? i.slug) === productId);\r\n    if (idx > -1) {\r\n      const existing = { ...items[idx] };\r\n      existing.quantity = Math.min(99, (Number(existing.quantity || existing.qty || 0) + Number(qtyOrDelta || 1)));\r\n      items[idx] = existing;\r\n    } else {\r\n      incoming.quantity = Math.max(1, Number(qtyOrDelta || incoming.quantity || 1));\r\n      items.push(incoming);\r\n    }\r\n    const saved = saveCart(items);\r\n    return saved;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] addOrIncrementItem error\", e);\r\n    return loadCart();\r\n  }\r\n}\r\n\r\nexport function setItemQuantity(productId, quantity) {\r\n  try {\r\n    const cart = loadCart();\r\n    const items = (cart.items || []).map(i => {\r\n      const id = i.productId ?? i._id ?? i.id ?? i.slug;\r\n      if (id === productId) {\r\n        return { ...i, quantity: Math.max(0, Math.floor(Number(quantity) || 0)) };\r\n      }\r\n      return i;\r\n    }).filter(i => Number(i.quantity || 0) > 0); // remove zero qty\r\n    const saved = saveCart(items);\r\n    return saved;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] setItemQuantity error\", e);\r\n    return loadCart();\r\n  }\r\n}\r\n\r\nexport function removeItem(productId) {\r\n  try {\r\n    const cart = loadCart();\r\n    const items = (cart.items || []).filter(i => {\r\n      const id = i.productId ?? i._id ?? i.id ?? i.slug;\r\n      return id !== productId;\r\n    });\r\n    const saved = saveCart(items);\r\n    return saved;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] removeItem error\", e);\r\n    return loadCart();\r\n  }\r\n}\r\n\r\nexport function clearCart() {\r\n  try {\r\n    const saved = saveCart([]);\r\n    return saved;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] clearCart error\", e);\r\n    return { items: [] };\r\n  }\r\n}\r\n"],"names":["CartStateContext","createContext","CartDispatchContext","calculateTotals","items","subtotal","reduce","s","it","Number","price","quantity","shipping","tax","Math","round","discount","total","useCartState","ctx","useContext","totals","useCartDispatch","dispatch","BASE","process","REACT_APP_API_BASE","axiosInstance","axios","create","baseURL","withCredentials","timeout","interceptors","request","use","cfg","err","Promise","reject","response","resp","String","replace","getImageUrl","imgOrUrl","concat","raw","url","path","filename","test","startsWith","NAMED","normalizeHex","input","trim","length","toUpperCase","a","b","c","hexToRgb","hex","h","r","parseInt","slice","g","distanceSq","hexToName","target","bestName","bestDist","Infinity","k","name","Object","entries","d","formatColorName","WISHLIST_KEY","loadWishlist","localStorage","getItem","arr","JSON","parse","Array","isArray","_unused","saveWishlist","setItem","stringify","window","dispatchEvent","Event","e","console","warn","burstAt","containerEl","options","arguments","undefined","document","body","count","spread","lifetime","colors","rect","getBoundingClientRect","wrapper","createElement","style","position","left","scrollX","top","scrollY","width","height","pointerEvents","overflow","zIndex","appendChild","cx","cy","particles","i","el","size","floor","random","borderRadius","background","opacity","transform","willChange","angle","PI","speed","vx","cos","vy","sin","rot","push","x","y","start","performance","now","requestAnimationFrame","frame","t","dt","norm","min","forEach","p","scale","max","setTimeout","remove","_unused2","isDirectVideoUrl","u","lower","toLowerCase","endsWith","ProductDetailPage","_ref","_ref18","_ref19","_product$mrp","_product$price3","_product$brand","_product$category","products","slug","useParams","navigate","useNavigate","cartDispatch","product","setProduct","useState","_products$find","find","_id","id","_unused3","loading","setLoading","error","setError","adding","setAdding","productImageContainerRef","useRef","imgRef","onImgMouseMove","onImgEnter","onImgLeave","img","current","clientX","clientY","px","py","transformOrigin","transition","useImageZoom","saved","setSaved","selectedColor","setSelectedColor","selectedSize","setSelectedSize","setQuantity","galleryUrls","setGalleryUrls","galleryIndex","setGalleryIndex","derivedColors","setDerivedColors","tempColorImage","setTempColorImage","useEffect","_ref2","_product$_id","pid","some","_ref3","_ref4","_i$productId","productId","_unused4","prev","sizes","mounted","async","endpoints","encodeURIComponent","lastError","ep","res","get","data","resolved","_ref5","_data$find","_ref6","_data$products$find","_ref7","_data$items$find","message","fetchProduct","imgs","images","image","thumbnail","urls","seen","Set","out","has","add","getImageUrls","rawColors","split","map","filter","Boolean","colorImageMap","rawColorImgs","colorImages","color_image_map","color_map","colorImagesMap","colorImagesObj","color_image","ci","label","color","toString","src","_ref8","v","derived","join","displayHex","friendly","colorNames","mappedImg","imageUrl","cartTotals","setCartTotals","loadCart","computeTotals","_unused5","onCartUpdated","comp","addEventListener","removeEventListener","onKey","useCallback","key","clampQty","q","n","stock","leftForFree","SHIPPING_THRESHOLD","fallbackSrc","mainImageSrc","possibleVideo","videoUrl","video","video_url","videoLink","video_link","productVideo","embedUrl","URL","location","origin","host","hostname","includes","pathname","search","vid","searchParams","maybeId","match","youtubeEmbedUrl","_jsx","padding","children","_jsxs","onClick","marginBottom","display","gridTemplateColumns","gap","alignItems","ref","border","justifyContent","cursor","alt","title","onMouseMove","onMouseEnter","onMouseLeave","maxWidth","maxHeight","objectFit","onError","right","marginTop","flexWrap","idx","getElementById","scrollIntoView","behavior","block","viewBox","fill","minWidth","description","fontSize","textDecoration","mrp","compareAtPrice","toFixed","fontWeight","active","swatchBg","textAlign","findIndex","backgroundImage","backgroundSize","backgroundPosition","value","onChange","marginLeft","_e$preventDefault2","_ref14","_ref15","_product$_id4","_ref16","_product$title","_ref17","_product$price2","_product$images","_product$imageUrl","preventDefault","call","idBase","variantKeyParts","itemPayload","salePrice","meta","addOrIncrementItem","type","payload","KEY","done","removeItem","checkAndTriggerBurst","disabled","_e$preventDefault","_ref9","_ref0","_product$_id2","next","_ref1","_ref10","_i$productId2","_ref11","_ref12","_i$productId3","_product$_id3","_product$id","_product$slug","_product$price","_ref13","_product$image","Link","to","brand","category","alignSelf","frameBorder","allow","allowFullScreen","controls","href","rel","bottom","margin","boxShadow","_Fragment","CART_KEY","DEFAULT_SHIPPING","parsed","safeParse","keys","saveCart","cartObj","normalized","normalizeItemShape","item","_item$_id","_item$id","_item$slug","_item$title2","_item$price","_item$image","_item$images","_item$quantity","_item$productId","_item$title","normalizeId","_objectSpread","amount","qty","acc","cartLike","qtyOrDelta","cart","incoming","existing","setItemQuantity","clearCart"],"ignoreList":[],"sourceRoot":""}