"use strict";(self.webpackChunkseemati_ladies_wear=self.webpackChunkseemati_ladies_wear||[]).push([[411],{2603:(t,e,i)=>{i.d(e,{J$:()=>s,Ku:()=>a});var n=i(5043);i(579);const r=(0,n.createContext)(null),o=(0,n.createContext)(null);function l(t){const e=t.reduce((t,e)=>t+Number(e.price||0)*(e.quantity||1),0),i=e>999?0:60,n=Math.round(.05*e);return{subtotal:e,shipping:i,tax:n,discount:0,total:e+i+n-0}}function s(){const t=(0,n.useContext)(r);return null!==t&&void 0!==t?t:{items:[],totals:l([])}}function a(){const t=(0,n.useContext)(o);return null!==t&&void 0!==t?t:()=>{}}},4411:(t,e,i)=>{i.r(e),i.d(e,{default:()=>h});var n=i(5043),r=i(8163),o=i(5026);const l=String("https://api.seemati.in/api").replace(/\/+$/,"");function s(t){if(!t)return"".concat(l,"/uploads/placeholder.png");const e="string"===typeof t?t:t.url||t.path||t.filename||"";return e?/^https?:\/\//i.test(e)||/^\/\//.test(e)?e:e.startsWith("/")?"".concat(l).concat(e):"".concat(l,"/uploads/").concat(e):"".concat(l,"/uploads/placeholder.png")}var a=i(8009),d=i(2603),c=i(579);const u="wishlist_v1";function p(){try{const t=localStorage.getItem(u)||"[]",e=JSON.parse(t);return Array.isArray(e)?e:[]}catch(t){return[]}}function f(t){try{localStorage.setItem(u,JSON.stringify(t));try{window.dispatchEvent(new Event("wishlist-updated"))}catch(e){}}catch(e){console.warn("saveWishlist failed",e)}}function g(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=document.body);const{count:i=20,spread:n=160,lifetime:r=900,colors:o=["#f59e0b","#ef4444","#10b981","#0b5cff","#7c3aed"]}=e,l=t.getBoundingClientRect(),s=document.createElement("div");s.style.position="absolute",s.style.left="".concat(l.left+window.scrollX,"px"),s.style.top="".concat(l.top+window.scrollY,"px"),s.style.width="".concat(l.width,"px"),s.style.height="".concat(l.height,"px"),s.style.pointerEvents="none",s.style.overflow="visible",s.style.zIndex=9999,document.body.appendChild(s);const a=l.width/2,d=l.height/2,c=[];for(let p=0;p<i;p++){const t=document.createElement("div"),e=Math.floor(8*Math.random())+6;t.style.position="absolute",t.style.left="".concat(a-e/2,"px"),t.style.top="".concat(d-e/2,"px"),t.style.width="".concat(e,"px"),t.style.height="".concat(e,"px"),t.style.borderRadius="4px",t.style.background=o[Math.floor(Math.random()*o.length)],t.style.opacity="1",t.style.transform="translate3d(0,0,0) scale(1)",t.style.willChange="transform, opacity",s.appendChild(t);const i=Math.random()*Math.PI*2,r=2+Math.random()*(n/30),l=Math.cos(i)*r,u=Math.sin(i)*r-1.5*Math.random(),p=10*(Math.random()-.5);c.push({el:t,x:a,y:d,vx:l,vy:u,rot:p})}const u=performance.now();requestAnimationFrame(function t(e){const i=e-u,n=Math.min(1,i/r);c.forEach(t=>{t.x+=t.vx,t.y+=t.vy,t.vy+=.06;const e=1-.6*n;t.el.style.transform="translate3d(".concat(t.x-a,"px, ").concat(t.y-d,"px, 0) rotate(").concat(t.rot*n,"deg) scale(").concat(Math.max(.2,e),")"),t.el.style.opacity=String(1-n)}),n<1?requestAnimationFrame(t):setTimeout(()=>{try{s.remove()}catch(t){}},60)})}function h(t){var e,i,l,u,h,m;let{products:v=[]}=t;const{slug:y}=(0,r.g)(),x=(0,r.Zp)(),b=(0,d.Ku)(),[A,_]=(0,n.useState)(()=>{try{var t;return Array.isArray(v)&&v.length>0&&(null!==(t=v.find(t=>t.slug===y||t._id===y||t.id===y))&&void 0!==t)?t:null}catch(e){return null}}),[j,w]=(0,n.useState)(!A),[S,C]=(0,n.useState)(null),[I,E]=(0,n.useState)(!1),k=(0,n.useRef)(null),{imgRef:P,onImgMouseMove:R,onImgEnter:T,onImgLeave:N}=function(){const t=(0,n.useRef)(null);return{imgRef:t,onImgMouseMove:function(e){const i=t.current;if(!i)return;const n=i.getBoundingClientRect(),r=e.clientX-n.left,o=e.clientY-n.top,l=r/n.width*100,s=o/n.height*100;i.style.transformOrigin="".concat(l,"% ").concat(s,"%")},onImgEnter:function(){const e=t.current;e&&(e.style.transition="transform 160ms cubic-bezier(.2,.9,.2,1)",e.style.transform="scale(1.22)",e.style.willChange="transform")},onImgLeave:function(){const e=t.current;e&&(e.style.transform="scale(1)",e.style.transition="transform 260ms cubic-bezier(.2,.9,.2,1)",setTimeout(()=>{e&&(e.style.willChange="")},300))}}}(),[M,W]=(0,n.useState)(!1),[O,z]=(0,n.useState)(null),[q,L]=(0,n.useState)(null),[D,B]=(0,n.useState)(1),[F,H]=(0,n.useState)([]),[U,K]=(0,n.useState)(0);(0,n.useEffect)(()=>{try{var t,e;const i=p(),n=null!==(t=null!==(e=null===A||void 0===A?void 0:A._id)&&void 0!==e?e:null===A||void 0===A?void 0:A.id)&&void 0!==t?t:null===A||void 0===A?void 0:A.slug;W(i.some(t=>{var e,i,r;return(null!==(e=null!==(i=null!==(r=t.productId)&&void 0!==r?r:t._id)&&void 0!==i?i:t.id)&&void 0!==e?e:t.slug)===n}))}catch(i){W(!1)}A&&(Array.isArray(A.colors)&&A.colors.length>0?z(t=>null!==t&&void 0!==t?t:A.colors[0]):z(null),Array.isArray(A.sizes)&&A.sizes.length>0?L(t=>null!==t&&void 0!==t?t:A.sizes[0]):L(null),B(1))},[null===A||void 0===A?void 0:A.slug,null===A||void 0===A?void 0:A.colors,null===A||void 0===A?void 0:A.sizes,null===A||void 0===A?void 0:A._id,null===A||void 0===A?void 0:A.id]),(0,n.useEffect)(()=>{let t=!0;return async function(){if(A)return void w(!1);w(!0),C(null);const e=["/api/products?slug=".concat(encodeURIComponent(y)),"/api/products/".concat(encodeURIComponent(y))];let i=null;for(const u of e)try{const e=await o.A.get(u);if(!t)return;const c=e.data;let p=null;var n,r;if(c)if(Array.isArray(c))p=null!==(n=null!==(r=c.find(t=>t.slug===y||t._id===y||t.id===y))&&void 0!==r?r:c[0])&&void 0!==n?n:null;else if(Array.isArray(c.products)){var l,s;p=null!==(l=null!==(s=c.products.find(t=>t.slug===y||t._id===y||t.id===y))&&void 0!==s?s:c.products[0])&&void 0!==l?l:null}else if(c.product)p=c.product;else if(c._id||c.slug||c.id)p=c;else if(c.items&&Array.isArray(c.items)){var a,d;p=null!==(a=null!==(d=c.items.find(t=>t.slug===y||t._id===y||t.id===y))&&void 0!==d?d:c.items[0])&&void 0!==a?a:null}if(p)return _(p),void w(!1);i="No product found in response from ".concat(u)}catch(c){i=c.message||String(c),console.warn("[ProductDetail] fetch error",c)}t&&(w(!1),_(null),C(i||"Product not found."))}(),()=>{t=!1}},[y]),(0,n.useEffect)(()=>{const t=Array.isArray(null===A||void 0===A?void 0:A.images)?[...A.images]:[];0===t.length&&null!==A&&void 0!==A&&A.image&&t.push(A.image),0===t.length&&null!==A&&void 0!==A&&A.thumbnail&&t.push(A.thumbnail);const e=function(t){if(!Array.isArray(t))return[];const e=new Set,i=[];for(const r of t)try{const t=s(r);if(!t)continue;if(e.has(t))continue;e.add(t),i.push(t)}catch(n){continue}return i}(t);H(e),K(0)},[null===A||void 0===A?void 0:A.images,null===A||void 0===A?void 0:A.image,null===A||void 0===A?void 0:A.thumbnail,null===A||void 0===A?void 0:A.slug,null===A||void 0===A?void 0:A._id]);const[J,Y]=(0,n.useState)(()=>{try{const t=(0,a.Bb)();return(0,a.x0)(Array.isArray(t)?{items:t}:t)}catch(t){return(0,a.x0)({items:[]})}});(0,n.useEffect)(()=>{function t(){try{const t=(0,a.Bb)(),e=(0,a.x0)(Array.isArray(t)?{items:t}:t);Y(e)}catch(t){}}return window.addEventListener("cart-updated",t),t(),()=>window.removeEventListener("cart-updated",t)},[]);const V=(0,n.useCallback)(t=>{!F||F.length<=1||("ArrowLeft"===t.key&&K(t=>(t-1+F.length)%F.length),"ArrowRight"===t.key&&K(t=>(t+1)%F.length))},[F]);function X(t){const e=Math.max(1,Math.floor(Number(t)||1));return A&&"number"===typeof A.stock?Math.min(e,Math.max(1,A.stock)):e}(0,n.useEffect)(()=>(window.addEventListener("keydown",V),()=>window.removeEventListener("keydown",V)),[V]);const $=Math.max(0,a.Nv-(J.subtotal||0));if(j)return(0,c.jsx)("div",{style:{padding:24},children:(0,c.jsx)("p",{children:"Loading product\u2026"})});if(!A)return(0,c.jsxs)("div",{style:{padding:24},children:[(0,c.jsx)("p",{children:"Product not found."}),(0,c.jsx)(r.N_,{to:"/shop",children:"Back to shop"}),S?(0,c.jsxs)("div",{style:{color:"#b91c1c",marginTop:12},children:["Error: ",String(S)]}):null]});const Q=(null===A||void 0===A?void 0:A.thumbnail)||(null===A||void 0===A?void 0:A.images)&&A.images[0]&&(A.images[0].url||A.images[0])||(null===A||void 0===A?void 0:A.image)||null,Z=F.length>0?F[U]:s(Q);return(0,c.jsxs)("div",{style:{padding:24,position:"relative"},children:[(0,c.jsx)("button",{onClick:()=>x(-1),style:{marginBottom:12},children:"\u2190 Back"}),(0,c.jsxs)("div",{style:{display:"flex",gap:40},children:[(0,c.jsxs)("div",{style:{flex:"0 0 520px"},children:[(0,c.jsxs)("div",{ref:k,style:{width:"100%",height:520,borderRadius:8,border:"1px solid #f3f3f3",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",background:"#fff",position:"relative"},children:[F.length>1&&(0,c.jsx)("button",{onClick:()=>K(t=>(t-1+F.length)%F.length),"aria-label":"Previous image",style:{position:"absolute",left:8,top:"50%",transform:"translateY(-50%)",background:"rgba(255,255,255,0.9)",border:"none",padding:8,borderRadius:6,cursor:"pointer",zIndex:5},children:"\u25c0"}),(0,c.jsx)("img",{ref:P,src:Z,alt:A.title,onMouseMove:R,onMouseEnter:T,onMouseLeave:N,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",display:"block",transition:"transform 180ms cubic-bezier(.2,.9,.2,1)",transform:"scale(1)"},onError:t=>{t.target.src=s(null)}}),F.length>1&&(0,c.jsx)("button",{onClick:()=>K(t=>(t+1)%F.length),"aria-label":"Next image",style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"rgba(255,255,255,0.9)",border:"none",padding:8,borderRadius:6,cursor:"pointer",zIndex:5},children:"\u25b6"})]}),F.length>1&&(0,c.jsx)("div",{style:{display:"flex",gap:8,marginTop:12,flexWrap:"wrap"},children:F.map((t,e)=>(0,c.jsx)("button",{onClick:()=>K(e),style:{border:e===U?"2px solid #0b5cff":"1px solid #eee",padding:0,borderRadius:6,overflow:"hidden",width:76,height:76,background:"#fff",cursor:"pointer"},"aria-label":"Show image ".concat(e+1),children:(0,c.jsx)("img",{src:t,alt:"".concat(A.title,"-").concat(e),style:{width:"100%",height:"100%",objectFit:"cover"}})},t+e))}),F.length>1&&(0,c.jsxs)("div",{style:{marginTop:8,color:"#6b7280",fontSize:13},children:[U+1," / ",F.length]})]}),(0,c.jsxs)("div",{style:{flex:"1 1 auto",maxWidth:720},children:[(0,c.jsx)("h1",{style:{marginTop:0},children:A.title}),A.description&&(0,c.jsx)("p",{style:{color:"#374151"},children:A.description}),(0,c.jsxs)("div",{style:{marginTop:12},children:[(0,c.jsxs)("div",{style:{fontSize:14,color:"#6b7280",textDecoration:A.mrp>A.price?"line-through":"none"},children:["MRP: \u20b9",Number(null!==(e=null!==(i=null!==(l=A.mrp)&&void 0!==l?l:A.compareAtPrice)&&void 0!==i?i:A.price)&&void 0!==e?e:0).toFixed(2)]}),(0,c.jsxs)("div",{style:{marginTop:6,fontSize:22,fontWeight:800,color:"#0b5cff"},children:["\u20b9",Number(null!==(u=A.price)&&void 0!==u?u:0).toFixed(2)]})]}),Array.isArray(A.colors)&&A.colors.length>0&&(0,c.jsxs)("div",{style:{marginTop:14},children:[(0,c.jsx)("div",{style:{marginBottom:8,fontWeight:700},children:"Color"}),(0,c.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:A.colors.map(t=>{const e=O===t;return(0,c.jsx)("button",{onClick:()=>z(t),style:{padding:"8px 12px",borderRadius:8,border:e?"2px solid #0b5cff":"1px solid #e6e6e6",background:e?"#eef2ff":"#fff",cursor:"pointer"},children:t},t)})})]}),Array.isArray(A.sizes)&&A.sizes.length>0&&(0,c.jsxs)("div",{style:{marginTop:14},children:[(0,c.jsx)("div",{style:{marginBottom:8,fontWeight:700},children:"Size"}),(0,c.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:A.sizes.map(t=>{const e=q===t;return(0,c.jsx)("button",{onClick:()=>L(t),style:{padding:"8px 12px",borderRadius:8,border:e?"2px solid #0b5cff":"1px solid #e6e6e6",background:e?"#eef2ff":"#fff",cursor:"pointer"},children:t},t)})})]}),(0,c.jsxs)("div",{style:{marginTop:14,display:"flex",alignItems:"center",gap:8},children:[(0,c.jsx)("div",{style:{fontWeight:700},children:"Quantity"}),(0,c.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,c.jsx)("button",{onClick:function(){B(t=>X(t-1))},style:{width:36,height:32},children:"-"}),(0,c.jsx)("input",{value:D,onChange:function(t){B(X(t.target.value))},style:{width:60,textAlign:"center",padding:6}}),(0,c.jsx)("button",{onClick:function(){B(t=>X(t+1))},style:{width:36,height:32},children:"+"})]}),"number"===typeof A.stock&&(0,c.jsxs)("div",{style:{marginLeft:12,color:"#6b7280"},children:["Stock: ",A.stock]})]}),(0,c.jsxs)("div",{style:{marginTop:18,display:"flex",gap:12},children:[(0,c.jsx)("button",{onClick:async function(t){var e,i,n,r,o,l,s,d,c,u;if(null===t||void 0===t||null===(e=t.preventDefault)||void 0===e||e.call(t),!A)return;if(Array.isArray(A.colors)&&A.colors.length>0&&!O)return void C("Please select a color.");if(Array.isArray(A.sizes)&&A.sizes.length>0&&!q)return void C("Please select a size.");E(!0),C(null);const p=null!==(i=null!==(n=null!==(r=A._id)&&void 0!==r?r:A.id)&&void 0!==n?n:A.slug)&&void 0!==i?i:Math.random().toString(36).slice(2,9),f=[p];O&&f.push("c:".concat(String(O))),q&&f.push("s:".concat(String(q)));const h={_id:f.join("|"),productId:p,slug:A.slug,title:null!==(o=null!==(l=A.title)&&void 0!==l?l:A.name)&&void 0!==o?o:"Product",price:Number(null!==(s=null!==(d=A.price)&&void 0!==d?d:A.salePrice)&&void 0!==s?s:0),images:null!==(c=A.images)&&void 0!==c?c:A.image?[{url:A.image}]:[],image:null!==(u=A.imageUrl)&&void 0!==u?u:A.images&&A.images[0]?A.images[0].url||A.images[0]:null,quantity:X(D),meta:{color:null!==O&&void 0!==O?O:null,size:null!==q&&void 0!==q?q:null}};try{const e=await(0,a.Nk)(h,h.quantity);try{"function"===typeof b&&b({type:"INITIALIZE",payload:e})}catch(m){console.warn("[ProductDetail] context initialize failed:",m)}try{window.dispatchEvent(new Event("cart-updated"))}catch(t){}try{!function(e,i){try{const t="seemati_free_burst_done_v1",n="1"===localStorage.getItem(t);e>=a.Nv&&!n?(g(i||document.body,{count:30,spread:220,lifetime:1e3}),localStorage.setItem(t,"1")):e<a.Nv&&n&&localStorage.removeItem(t)}catch(t){console.warn("burst check failed",t)}}((0,a.x0)(e).subtotal||0,k.current||document.body)}catch(t){}}catch(m){console.error("Add to cart failed (product page):",m),C("Unable to add to cart. See console for details.")}finally{E(!1)}},disabled:I,style:{background:"#f59e0b",color:"#fff",border:"none",padding:"10px 14px",borderRadius:6,fontWeight:700,cursor:I?"progress":"pointer"},children:I?"Adding...":"Add to cart"}),(0,c.jsx)("button",{onClick:function(t){var e,i,n,r;if(null===t||void 0===t||null===(e=t.preventDefault)||void 0===e||e.call(t),!A)return;const o=null!==(i=null!==(n=null!==(r=A._id)&&void 0!==r?r:A.id)&&void 0!==n?n:A.slug)&&void 0!==i?i:null;if(!o)return;const l=p();let s;if(l.find(t=>{var e,i,n;return(null!==(e=null!==(i=null!==(n=t.productId)&&void 0!==n?n:t._id)&&void 0!==i?i:t.id)&&void 0!==e?e:t.slug)===o}))s=l.filter(t=>{var e,i,n;return(null!==(e=null!==(i=null!==(n=t.productId)&&void 0!==n?n:t._id)&&void 0!==i?i:t.id)&&void 0!==e?e:t.slug)!==o}),f(s),W(!1);else{var a,d,c,u,g,h;const t={productId:o,_id:null!==(a=A._id)&&void 0!==a?a:o,id:null!==(d=A.id)&&void 0!==d?d:o,slug:null!==(c=A.slug)&&void 0!==c?c:void 0,title:A.title,price:Number(null!==(u=A.price)&&void 0!==u?u:0),image:null!==(g=null!==(h=A.image)&&void 0!==h?h:A.images&&A.images[0]&&(A.images[0].url||A.images[0]))&&void 0!==g?g:null};s=[...l,t],f(s),W(!0)}},title:M?"Saved to wishlist":"Save for later","aria-pressed":M,style:{padding:"10px 14px",borderRadius:6,border:M?"1px solid #ef4444":"1px solid #e6e6e6",background:M?"#fff0f0":"#fff",color:M?"#ef4444":"#111",cursor:"pointer",fontWeight:700},children:M?"\u2665 Saved":"\u2661 Save"}),(0,c.jsx)(r.N_,{to:"/cart",children:(0,c.jsx)("button",{style:{padding:"10px 14px",borderRadius:6,border:"1px solid #ccc",background:"#fff"},children:"Go to cart"})})]}),S?(0,c.jsx)("div",{style:{color:"#b91c1c",marginTop:12},children:S}):null,(0,c.jsxs)("div",{style:{marginTop:18,color:"#6b7280"},children:[(0,c.jsxs)("div",{children:["Brand: ",null!==(h=A.brand)&&void 0!==h?h:"\u2014"]}),(0,c.jsxs)("div",{children:["Category: ",null!==(m=A.category)&&void 0!==m?m:"\u2014"]})]})]})]}),(0,c.jsx)("div",{"aria-hidden":"false",style:{position:"fixed",left:20,right:20,bottom:20,margin:"0 auto",maxWidth:980,background:"#e6fffa",border:"1px solid #bbf7d0",color:"#064e3b",padding:"12px 18px",borderRadius:999,boxShadow:"0 6px 18px rgba(2,6,23,0.06)",display:"flex",alignItems:"center",gap:12,justifyContent:"center",zIndex:9999},children:$>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{style:{fontWeight:700},children:"\ud83d\udce6"}),(0,c.jsxs)("div",{style:{fontWeight:700},children:["Add \u20b9",$.toFixed(2)," more to get free shipping."]}),(0,c.jsxs)("div",{style:{color:"#065f46"},children:["Subtotal \u20b9",(J.subtotal||0).toFixed(2)]}),(0,c.jsx)("div",{style:{marginLeft:12},children:(0,c.jsx)("button",{onClick:()=>x("/cart"),style:{background:"#0b5cff",color:"#fff",padding:"8px 12px",borderRadius:6,border:"none"},children:"View Cart"})})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{style:{fontWeight:700},children:"\ud83c\udf89"}),(0,c.jsxs)("div",{style:{fontWeight:700},children:["You have free shipping! Subtotal \u20b9",(J.subtotal||0).toFixed(2)]}),(0,c.jsx)("div",{style:{marginLeft:12},children:(0,c.jsx)("button",{onClick:()=>g(k.current||document.body,{count:36}),style:{background:"#10b981",color:"#fff",padding:"8px 12px",borderRadius:6,border:"none"},children:"Celebrate"})})]})})]})}},5026:(t,e,i)=>{i.d(e,{A:()=>l});var n=i(9722);const r=function(){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ADMIN_TOKEN:"seemati123",REACT_APP_API_URL:"https://api.seemati.in/api",REACT_APP_PRODUCTS_PATH:"/products"}.REACT_APP_API_BASE)return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_ADMIN_TOKEN:"seemati123",REACT_APP_API_URL:"https://api.seemati.in/api",REACT_APP_PRODUCTS_PATH:"/products"}.REACT_APP_API_BASE.replace(/\/$/,"");if("undefined"!==typeof window){const t=window.location.hostname;if("localhost"===t||"127.0.0.1"===t)return"";if("seemati.in"===t||t.endsWith("seemati.in"))return"https://api.seemati.in"}return""}(),o=n.A.create({baseURL:r||void 0,withCredentials:!0,timeout:15e3,headers:{"Content-Type":"application/json",Accept:"application/json"}});o.interceptors.request.use(t=>{try{const e=t.url||"";if("string"===typeof e&&e.match(/^https?:\/\//i))return t;!!r&&r.includes("api.seemati.in")&&"string"===typeof e&&e.startsWith("/")&&(e.startsWith("/api/")||"/api"===e||(t.url="/api".concat(e)))}catch(e){console.warn("axiosInstance request interceptor error:",e)}return t},t=>Promise.reject(t)),o.interceptors.response.use(t=>t,t=>(t&&t.response?console.error("API error:",t.response.status,t.response.data):console.error("Network/API error:",t.message||t),Promise.reject(t)));const l=o},8009:(t,e,i)=>{i.d(e,{Ai:()=>f,Bb:()=>s,Nk:()=>u,Nv:()=>o,Rq:()=>p,o2:()=>a,sX:()=>g,x0:()=>c});var n=i(9379);const r="seemati_cart_v1",o=999,l=60;function s(){try{const t=localStorage.getItem(r);if(!t)return{items:[]};const e=function(t){try{return JSON.parse(t)}catch(e){return null}}(t);if(!e)return{items:[]};if(Array.isArray(e))return{items:e};if(e.items&&Array.isArray(e.items))return e;for(const i of Object.keys(e))if(Array.isArray(e[i]))return{items:e[i]};return{items:[]}}catch(t){return console.error("[cartHelpers] loadCart error",t),{items:[]}}}function a(t){try{const i=Array.isArray(t)?{items:t}:t&&t.items?{items:t.items}:{items:[]};localStorage.setItem(r,JSON.stringify(i.items));try{window.dispatchEvent(new Event("cart-updated"))}catch(e){}return i}catch(e){return console.error("[cartHelpers] saveCart error",e),{items:[]}}}function d(t){var e,i,r,o,l,s,a,d,c,u,p,f,g;const h=function(t){var e,i,n,r,o;return null!==(e=null!==(i=null!==(n=null!==(r=t.productId)&&void 0!==r?r:t._id)&&void 0!==n?n:t.id)&&void 0!==i?i:t.slug)&&void 0!==e?e:String(null!==(o=t.title)&&void 0!==o?o:Math.random().toString(36).slice(2,9))}(t);return(0,n.A)({productId:h,_id:null!==(e=t._id)&&void 0!==e?e:h,id:null!==(i=t.id)&&void 0!==i?i:h,slug:null!==(r=t.slug)&&void 0!==r?r:void 0,title:null!==(o=null!==(l=t.title)&&void 0!==l?l:t.name)&&void 0!==o?o:"Product",price:Number(null!==(s=null!==(a=null!==(d=t.price)&&void 0!==d?d:t.salePrice)&&void 0!==a?a:t.amount)&&void 0!==s?s:0),image:null!==(c=null!==(u=t.image)&&void 0!==u?u:t.images&&t.images[0]&&(t.images[0].url||t.images[0]))&&void 0!==c?c:null,images:null!==(p=t.images)&&void 0!==p?p:t.image?[{url:t.image}]:[],quantity:Math.max(1,Number(null!==(f=null!==(g=t.quantity)&&void 0!==g?g:t.qty)&&void 0!==f?f:1))},Object.keys(t).reduce((e,i)=>(["productId","_id","id","slug","title","price","image","images","quantity"].includes(i)||(e[i]=t[i]),e),{}))}function c(t){const e=(Array.isArray(t)?{items:t}:t||{items:[]}).items||[],i=e.reduce((t,e)=>t+Number(e.price||0)*Number(e.quantity||e.qty||0),0),n=i>=o?0:l,r=Math.round(.05*i);return{items:e,subtotal:i,shipping:n,tax:r,discount:0,total:i+n+r-0}}function u(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{const i=s(),r=Array.isArray(i.items)?[...i.items]:[],o=d(t),l=o.productId,c=r.findIndex(t=>{var e,i,n;return(null!==(e=null!==(i=null!==(n=t.productId)&&void 0!==n?n:t._id)&&void 0!==i?i:t.id)&&void 0!==e?e:t.slug)===l});if(c>-1){const t=(0,n.A)({},r[c]);t.quantity=Math.min(99,Number(t.quantity||t.qty||0)+Number(e||1)),r[c]=t}else o.quantity=Math.max(1,Number(e||o.quantity||1)),r.push(o);return a(r)}catch(i){return console.error("[cartHelpers] addOrIncrementItem error",i),s()}}function p(t,e){try{const i=(s().items||[]).map(i=>{var r,o,l;return(null!==(r=null!==(o=null!==(l=i.productId)&&void 0!==l?l:i._id)&&void 0!==o?o:i.id)&&void 0!==r?r:i.slug)===t?(0,n.A)((0,n.A)({},i),{},{quantity:Math.max(0,Math.floor(Number(e)||0))}):i}).filter(t=>Number(t.quantity||0)>0);return a(i)}catch(i){return console.error("[cartHelpers] setItemQuantity error",i),s()}}function f(t){try{const e=(s().items||[]).filter(e=>{var i,n,r;return(null!==(i=null!==(n=null!==(r=e.productId)&&void 0!==r?r:e._id)&&void 0!==n?n:e.id)&&void 0!==i?i:e.slug)!==t});return a(e)}catch(e){return console.error("[cartHelpers] removeItem error",e),s()}}function g(){try{return a([])}catch(t){return console.error("[cartHelpers] clearCart error",t),{items:[]}}}}}]);
//# sourceMappingURL=411.7c60e05d.chunk.js.map