{"version":3,"file":"static/js/411.7c60e05d.chunk.js","mappings":"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","sources":["context/CartContext.jsx","utils/imageUtils.js","pages/ProductDetail.jsx","api/axiosInstance.js","utils/cartHelpers.js"],"sourcesContent":["// src/context/CartContext.jsx\r\nimport React, { createContext, useReducer, useContext, useEffect } from \"react\";\r\n\r\nconst CartStateContext = createContext(null);\r\nconst CartDispatchContext = createContext(null);\r\n\r\nconst CART_KEY = \"seemati_cart_v1\";\r\n\r\nfunction loadCart() {\r\n  try {\r\n    const raw = localStorage.getItem(CART_KEY);\r\n    return raw ? JSON.parse(raw) : { items: [] };\r\n  } catch {\r\n    return { items: [] };\r\n  }\r\n}\r\n\r\nfunction saveCart(state) {\r\n  try {\r\n    localStorage.setItem(CART_KEY, JSON.stringify(state));\r\n  } catch {}\r\n}\r\n\r\nfunction calculateTotals(items) {\r\n  const subtotal = items.reduce(\r\n    (s, it) => s + Number(it.price || 0) * (it.quantity || 1),\r\n    0\r\n  );\r\n  const shipping = subtotal > 999 ? 0 : 60; // Free shipping above ₹999\r\n  const tax = Math.round(subtotal * 0.05); // Example: 5% tax\r\n  const discount = 0;\r\n  const total = subtotal + shipping + tax - discount;\r\n  return { subtotal, shipping, tax, discount, total };\r\n}\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"INITIALIZE\": {\r\n      return action.payload;\r\n    }\r\n    case \"ADD_ITEM\": {\r\n      const item = action.payload;\r\n      const items = [...state.items];\r\n      const idx = items.findIndex((i) => i.productId === item.productId);\r\n      if (idx > -1) {\r\n        items[idx].quantity = Math.min(\r\n          99,\r\n          (items[idx].quantity || 1) + (item.quantity || 1)\r\n        );\r\n      } else {\r\n        items.push({ ...item, quantity: item.quantity || 1 });\r\n      }\r\n      const totals = calculateTotals(items);\r\n      const next = { ...state, items, totals };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    case \"SET_QTY\": {\r\n      const { productId, quantity } = action.payload;\r\n      const items = state.items.map((i) =>\r\n        i.productId === productId\r\n          ? { ...i, quantity: Math.max(1, quantity) }\r\n          : i\r\n      );\r\n      const totals = calculateTotals(items);\r\n      const next = { ...state, items, totals };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    case \"REMOVE_ITEM\": {\r\n      const items = state.items.filter(\r\n        (i) => i.productId !== action.payload.productId\r\n      );\r\n      const totals = calculateTotals(items);\r\n      const next = { ...state, items, totals };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    case \"CLEAR_CART\": {\r\n      const next = { items: [], totals: calculateTotals([]) };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function CartProvider({ children }) {\r\n  const [state, dispatch] = useReducer(reducer, {\r\n    items: [],\r\n    totals: calculateTotals([]),\r\n  });\r\n\r\n  // initialize once from localStorage\r\n  useEffect(() => {\r\n    const init = loadCart();\r\n    if (!init.totals) init.totals = calculateTotals(init.items || []);\r\n    dispatch({ type: \"INITIALIZE\", payload: init });\r\n  }, []);\r\n\r\n  return (\r\n    <CartStateContext.Provider value={state}>\r\n      <CartDispatchContext.Provider value={dispatch}>\r\n        {children}\r\n      </CartDispatchContext.Provider>\r\n    </CartStateContext.Provider>\r\n  );\r\n}\r\n\r\n// SAFE consumer hooks: never return undefined\r\nexport function useCartState() {\r\n  const ctx = useContext(CartStateContext);\r\n  return ctx ?? { items: [], totals: calculateTotals([]) };\r\n}\r\n\r\nexport function useCartDispatch() {\r\n  const dispatch = useContext(CartDispatchContext);\r\n  return dispatch ?? (() => {});\r\n}\r\n\r\n// ✅ Option A additions (for compatibility with /contexts shim)\r\nexport const useCart = useCartState;   // alias for uniform naming\r\nexport default CartProvider;           // default export for easy import\r\n","// src/utils/imageUtils.js\r\n// Helpers to turn backend image fields into usable absolute URLs.\r\n\r\n// Prefer REACT_APP_API_URL (used elsewhere in your project).\r\nconst ENV_BASE = process.env.REACT_APP_API_URL || process.env.REACT_APP_API_BASE_URL || \"http://localhost:4000\";\r\nconst BASE = String(ENV_BASE).replace(/\\/+$/, \"\"); // remove trailing slash\r\n\r\nexport function getImageUrl(imgOrUrl) {\r\n  if (!imgOrUrl) return `${BASE}/uploads/placeholder.png`;\r\n\r\n  const raw = typeof imgOrUrl === \"string\"\r\n    ? imgOrUrl\r\n    : imgOrUrl.url || imgOrUrl.path || imgOrUrl.filename || \"\";\r\n\r\n  if (!raw) return `${BASE}/uploads/placeholder.png`;\r\n\r\n  if (/^https?:\\/\\//i.test(raw) || /^\\/\\//.test(raw)) return raw;\r\n  if (raw.startsWith(\"/\")) return `${BASE}${raw}`;\r\n  return `${BASE}/uploads/${raw}`;\r\n}\r\n\r\nexport function getImageUrls(images) {\r\n  if (!Array.isArray(images)) return [];\r\n  const seen = new Set();\r\n  const out = [];\r\n  for (const it of images) {\r\n    try {\r\n      const url = getImageUrl(it);\r\n      if (!url) continue;\r\n      if (seen.has(url)) continue;\r\n      seen.add(url);\r\n      out.push(url);\r\n    } catch (e) {\r\n      continue;\r\n    }\r\n  }\r\n  return out;\r\n}\r\n","// src/pages/ProductDetail.jsx\r\nimport React, { useEffect, useState, useRef, useCallback } from \"react\";\r\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\r\nimport axios from \"../api/axiosInstance\";\r\nimport { getImageUrl, getImageUrls } from \"../utils/imageUtils\";\r\nimport { addOrIncrementItem, loadCart, computeTotals, SHIPPING_THRESHOLD } from \"../utils/cartHelpers\";\r\nimport { useCartDispatch } from \"../context/CartContext\";\r\n\r\n/* ---------- wishlist helpers (unchanged) ---------- */\r\nconst WISHLIST_KEY = \"wishlist_v1\";\r\nfunction loadWishlist() {\r\n  try {\r\n    const raw = localStorage.getItem(WISHLIST_KEY) || \"[]\";\r\n    const arr = JSON.parse(raw);\r\n    return Array.isArray(arr) ? arr : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\nfunction saveWishlist(arr) {\r\n  try {\r\n    localStorage.setItem(WISHLIST_KEY, JSON.stringify(arr));\r\n    try { window.dispatchEvent(new Event(\"wishlist-updated\")); } catch (e) {}\r\n  } catch (e) {\r\n    console.warn(\"saveWishlist failed\", e);\r\n  }\r\n}\r\n\r\n/* burst animation and image-zoom helpers (kept from your original file) */\r\nfunction burstAt(containerEl, options = {}) {\r\n  if (!containerEl) containerEl = document.body;\r\n  const { count = 20, spread = 160, lifetime = 900, colors = [\"#f59e0b\", \"#ef4444\", \"#10b981\", \"#0b5cff\", \"#7c3aed\"] } = options;\r\n\r\n  const rect = containerEl.getBoundingClientRect();\r\n  const wrapper = document.createElement(\"div\");\r\n  wrapper.style.position = \"absolute\";\r\n  wrapper.style.left = `${rect.left + window.scrollX}px`;\r\n  wrapper.style.top = `${rect.top + window.scrollY}px`;\r\n  wrapper.style.width = `${rect.width}px`;\r\n  wrapper.style.height = `${rect.height}px`;\r\n  wrapper.style.pointerEvents = \"none\";\r\n  wrapper.style.overflow = \"visible\";\r\n  wrapper.style.zIndex = 9999;\r\n  document.body.appendChild(wrapper);\r\n\r\n  const cx = rect.width / 2;\r\n  const cy = rect.height / 2;\r\n  const particles = [];\r\n\r\n  for (let i = 0; i < count; i++) {\r\n    const el = document.createElement(\"div\");\r\n    const size = Math.floor(Math.random() * 8) + 6;\r\n    el.style.position = \"absolute\";\r\n    el.style.left = `${cx - size / 2}px`;\r\n    el.style.top = `${cy - size / 2}px`;\r\n    el.style.width = `${size}px`;\r\n    el.style.height = `${size}px`;\r\n    el.style.borderRadius = \"4px\";\r\n    el.style.background = colors[Math.floor(Math.random() * colors.length)];\r\n    el.style.opacity = \"1\";\r\n    el.style.transform = \"translate3d(0,0,0) scale(1)\";\r\n    el.style.willChange = \"transform, opacity\";\r\n    wrapper.appendChild(el);\r\n\r\n    const angle = Math.random() * Math.PI * 2;\r\n    const speed = 2 + Math.random() * (spread / 30);\r\n    const vx = Math.cos(angle) * speed;\r\n    const vy = Math.sin(angle) * speed - Math.random() * 1.5;\r\n    const rot = (Math.random() - 0.5) * 10;\r\n    particles.push({ el, x: cx, y: cy, vx, vy, rot });\r\n  }\r\n\r\n  const start = performance.now();\r\n  function frame(t) {\r\n    const dt = t - start;\r\n    const norm = Math.min(1, dt / lifetime);\r\n    particles.forEach((p) => {\r\n      p.x += p.vx;\r\n      p.y += p.vy;\r\n      p.vy += 0.06;\r\n      const scale = 1 - norm * 0.6;\r\n      p.el.style.transform = `translate3d(${p.x - cx}px, ${p.y - cy}px, 0) rotate(${p.rot * norm}deg) scale(${Math.max(0.2, scale)})`;\r\n      p.el.style.opacity = String(1 - norm);\r\n    });\r\n    if (norm < 1) requestAnimationFrame(frame);\r\n    else setTimeout(() => { try { wrapper.remove(); } catch {} }, 60);\r\n  }\r\n  requestAnimationFrame(frame);\r\n}\r\n\r\nfunction checkAndTriggerBurst(subtotal, containerEl) {\r\n  try {\r\n    const KEY = \"seemati_free_burst_done_v1\";\r\n    const done = localStorage.getItem(KEY) === \"1\";\r\n    if (subtotal >= SHIPPING_THRESHOLD && !done) {\r\n      burstAt(containerEl || document.body, { count: 30, spread: 220, lifetime: 1000 });\r\n      localStorage.setItem(KEY, \"1\");\r\n    } else if (subtotal < SHIPPING_THRESHOLD && done) {\r\n      localStorage.removeItem(KEY);\r\n    }\r\n  } catch (e) {\r\n    console.warn(\"burst check failed\", e);\r\n  }\r\n}\r\n\r\nfunction useImageZoom() {\r\n  const imgRef = useRef(null);\r\n  function onImgMouseMove(e) {\r\n    const img = imgRef.current;\r\n    if (!img) return;\r\n    const rect = img.getBoundingClientRect();\r\n    const x = e.clientX - rect.left;\r\n    const y = e.clientY - rect.top;\r\n    const px = (x / rect.width) * 100;\r\n    const py = (y / rect.height) * 100;\r\n    img.style.transformOrigin = `${px}% ${py}%`;\r\n  }\r\n  function onImgEnter() {\r\n    const img = imgRef.current;\r\n    if (!img) return;\r\n    img.style.transition = \"transform 160ms cubic-bezier(.2,.9,.2,1)\";\r\n    img.style.transform = \"scale(1.22)\";\r\n    img.style.willChange = \"transform\";\r\n  }\r\n  function onImgLeave() {\r\n    const img = imgRef.current;\r\n    if (!img) return;\r\n    img.style.transform = \"scale(1)\";\r\n    img.style.transition = \"transform 260ms cubic-bezier(.2,.9,.2,1)\";\r\n    setTimeout(() => { if (img) img.style.willChange = \"\"; }, 300);\r\n  }\r\n  return { imgRef, onImgMouseMove, onImgEnter, onImgLeave };\r\n}\r\n\r\n/* ---------------- ProductDetail component ---------------- */\r\nexport default function ProductDetailPage({ products = [] }) {\r\n  const { slug } = useParams();\r\n  const navigate = useNavigate();\r\n  const cartDispatch = useCartDispatch();\r\n\r\n  const [product, setProduct] = useState(() => {\r\n    try {\r\n      if (Array.isArray(products) && products.length > 0) {\r\n        return products.find((p) => p.slug === slug || p._id === slug || p.id === slug) ?? null;\r\n      }\r\n      return null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  });\r\n\r\n  const [loading, setLoading] = useState(product ? false : true);\r\n  const [error, setError] = useState(null);\r\n  const [adding, setAdding] = useState(false);\r\n  const productImageContainerRef = useRef(null);\r\n\r\n  const { imgRef, onImgMouseMove, onImgEnter, onImgLeave } = useImageZoom();\r\n\r\n  // wishlist state\r\n  const [saved, setSaved] = useState(false);\r\n\r\n  // option selections\r\n  const [selectedColor, setSelectedColor] = useState(null);\r\n  const [selectedSize, setSelectedSize] = useState(null);\r\n  const [quantity, setQuantity] = useState(1);\r\n\r\n  // gallery state\r\n  const [galleryUrls, setGalleryUrls] = useState([]); // array of resolved urls\r\n  const [galleryIndex, setGalleryIndex] = useState(0);\r\n\r\n  // load wishlist status and set defaults\r\n  useEffect(() => {\r\n    try {\r\n      const arr = loadWishlist();\r\n      const pid = product?._id ?? product?.id ?? product?.slug;\r\n      setSaved(arr.some(i => (i.productId ?? i._id ?? i.id ?? i.slug) === pid));\r\n    } catch {\r\n      setSaved(false);\r\n    }\r\n\r\n    if (product) {\r\n      if (Array.isArray(product.colors) && product.colors.length > 0) {\r\n        setSelectedColor((prev) => prev ?? product.colors[0]);\r\n      } else {\r\n        setSelectedColor(null);\r\n      }\r\n      if (Array.isArray(product.sizes) && product.sizes.length > 0) {\r\n        setSelectedSize((prev) => prev ?? product.sizes[0]);\r\n      } else {\r\n        setSelectedSize(null);\r\n      }\r\n      setQuantity(1);\r\n    }\r\n  }, [product?.slug, product?.colors, product?.sizes, product?._id, product?.id]);\r\n\r\n  // fetch product if not present — use axios instance (backend baseURL)\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function fetchProduct() {\r\n      if (product) {\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      // candidate endpoints on backend — call backend base via axios instance\r\n      const endpoints = [\r\n        `/api/products?slug=${encodeURIComponent(slug)}`,\r\n        `/api/products/${encodeURIComponent(slug)}`,\r\n      ];\r\n\r\n      let lastError = null;\r\n      for (const ep of endpoints) {\r\n        try {\r\n          const res = await axios.get(ep);\r\n          if (!mounted) return;\r\n\r\n          const data = res.data;\r\n          let resolved = null;\r\n\r\n          if (data) {\r\n            if (Array.isArray(data)) {\r\n              resolved = data.find(p => p.slug === slug || p._id === slug || p.id === slug) ?? data[0] ?? null;\r\n            } else if (Array.isArray(data.products)) {\r\n              resolved = data.products.find(p => p.slug === slug || p._id === slug || p.id === slug) ?? data.products[0] ?? null;\r\n            } else if (data.product) {\r\n              resolved = data.product;\r\n            } else if (data._id || data.slug || data.id) {\r\n              resolved = data;\r\n            } else if (data.items && Array.isArray(data.items)) {\r\n              resolved = data.items.find(p => p.slug === slug || p._id === slug || p.id === slug) ?? data.items[0] ?? null;\r\n            }\r\n          }\r\n\r\n          if (resolved) { setProduct(resolved); setLoading(false); return; }\r\n          lastError = `No product found in response from ${ep}`;\r\n        } catch (err) {\r\n          lastError = err.message || String(err);\r\n          console.warn(\"[ProductDetail] fetch error\", err);\r\n        }\r\n      }\r\n\r\n      if (mounted) { setLoading(false); setProduct(null); setError(lastError || \"Product not found.\"); }\r\n    }\r\n\r\n    fetchProduct();\r\n    return () => { mounted = false; };\r\n  }, [slug]);\r\n\r\n  // Build gallery URLs whenever product.images (or product.image/thumbnail fallback) changes\r\n  useEffect(() => {\r\n    const imgs = Array.isArray(product?.images) ? [...product.images] : [];\r\n    if ((imgs.length === 0) && product?.image) imgs.push(product.image);\r\n    if ((imgs.length === 0) && product?.thumbnail) imgs.push(product.thumbnail);\r\n\r\n    const urls = getImageUrls(imgs);\r\n    setGalleryUrls(urls);\r\n    setGalleryIndex(0);\r\n  }, [product?.images, product?.image, product?.thumbnail, product?.slug, product?._id]);\r\n\r\n  // floating shipping helper state\r\n  const [cartTotals, setCartTotals] = useState(() => {\r\n    try { const raw = loadCart(); return computeTotals(Array.isArray(raw) ? { items: raw } : raw); } catch { return computeTotals({ items: [] }); }\r\n  });\r\n\r\n  useEffect(() => {\r\n    function onCartUpdated() {\r\n      try { const raw = loadCart(); const comp = computeTotals(Array.isArray(raw) ? { items: raw } : raw); setCartTotals(comp); } catch (e) {}\r\n    }\r\n    window.addEventListener(\"cart-updated\", onCartUpdated);\r\n    onCartUpdated();\r\n    return () => window.removeEventListener(\"cart-updated\", onCartUpdated);\r\n  }, []);\r\n\r\n  // keyboard gallery navigation\r\n  const onKey = useCallback((e) => {\r\n    if (!galleryUrls || galleryUrls.length <= 1) return;\r\n    if (e.key === \"ArrowLeft\") setGalleryIndex((i) => (i - 1 + galleryUrls.length) % galleryUrls.length);\r\n    if (e.key === \"ArrowRight\") setGalleryIndex((i) => (i + 1) % galleryUrls.length);\r\n  }, [galleryUrls]);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n  }, [onKey]);\r\n\r\n  // wishlist toggle\r\n  function toggleWishlist(e) {\r\n    e?.preventDefault?.();\r\n    if (!product) return;\r\n    const pid = product._id ?? product.id ?? product.slug ?? null;\r\n    if (!pid) return;\r\n    const arr = loadWishlist();\r\n    const exists = arr.find(i => (i.productId ?? i._id ?? i.id ?? i.slug) === pid);\r\n    let next;\r\n    if (exists) {\r\n      next = arr.filter(i => (i.productId ?? i._id ?? i.id ?? i.slug) !== pid);\r\n      saveWishlist(next);\r\n      setSaved(false);\r\n    } else {\r\n      const payload = {\r\n        productId: pid,\r\n        _id: product._id ?? pid,\r\n        id: product.id ?? pid,\r\n        slug: product.slug ?? undefined,\r\n        title: product.title,\r\n        price: Number(product.price ?? 0),\r\n        image: product.image ?? (product.images && product.images[0] && (product.images[0].url || product.images[0])) ?? null\r\n      };\r\n      next = [...arr, payload];\r\n      saveWishlist(next);\r\n      setSaved(true);\r\n    }\r\n  }\r\n\r\n  function clampQty(q) {\r\n    const n = Math.max(1, Math.floor(Number(q) || 1));\r\n    if (product && typeof product.stock === \"number\") {\r\n      return Math.min(n, Math.max(1, product.stock));\r\n    }\r\n    return n;\r\n  }\r\n  function incQty() { setQuantity((q) => clampQty(q + 1)); }\r\n  function decQty() { setQuantity((q) => clampQty(q - 1)); }\r\n  function onQtyChange(e) { setQuantity(clampQty(e.target.value)); }\r\n\r\n  async function handleAddToCart(e) {\r\n    e?.preventDefault?.();\r\n    if (!product) return;\r\n    if (Array.isArray(product.colors) && product.colors.length > 0 && !selectedColor) { setError(\"Please select a color.\"); return; }\r\n    if (Array.isArray(product.sizes) && product.sizes.length > 0 && !selectedSize) { setError(\"Please select a size.\"); return; }\r\n\r\n    setAdding(true);\r\n    setError(null);\r\n\r\n    const idBase = product._id ?? product.id ?? product.slug ?? Math.random().toString(36).slice(2, 9);\r\n    const variantKeyParts = [idBase];\r\n    if (selectedColor) variantKeyParts.push(`c:${String(selectedColor)}`);\r\n    if (selectedSize) variantKeyParts.push(`s:${String(selectedSize)}`);\r\n    const variantKey = variantKeyParts.join(\"|\");\r\n\r\n    const itemPayload = {\r\n      _id: variantKey,\r\n      productId: idBase,\r\n      slug: product.slug,\r\n      title: product.title ?? product.name ?? \"Product\",\r\n      price: Number(product.price ?? product.salePrice ?? 0),\r\n      images: product.images ?? (product.image ? [{ url: product.image }] : []),\r\n      image: product.imageUrl ?? (product.images && product.images[0] ? (product.images[0].url || product.images[0]) : null),\r\n      quantity: clampQty(quantity),\r\n      meta: { color: selectedColor ?? null, size: selectedSize ?? null },\r\n    };\r\n\r\n    try {\r\n      const saved = await addOrIncrementItem(itemPayload, itemPayload.quantity);\r\n      try { if (typeof cartDispatch === \"function\") cartDispatch({ type: \"INITIALIZE\", payload: saved }); } catch (err) { console.warn(\"[ProductDetail] context initialize failed:\", err); }\r\n      try { window.dispatchEvent(new Event(\"cart-updated\")); } catch (e) {}\r\n      try { const comp = computeTotals(saved); checkAndTriggerBurst(comp.subtotal || 0, productImageContainerRef.current || document.body); } catch (e) {}\r\n    } catch (err) {\r\n      console.error(\"Add to cart failed (product page):\", err);\r\n      setError(\"Unable to add to cart. See console for details.\");\r\n    } finally {\r\n      setAdding(false);\r\n    }\r\n  }\r\n\r\n  const leftForFree = Math.max(0, (SHIPPING_THRESHOLD - (cartTotals.subtotal || 0)));\r\n\r\n  if (loading) {\r\n    return <div style={{ padding: 24 }}><p>Loading product…</p></div>;\r\n  }\r\n\r\n  if (!product) {\r\n    return (\r\n      <div style={{ padding: 24 }}>\r\n        <p>Product not found.</p>\r\n        <Link to=\"/shop\">Back to shop</Link>\r\n        {error ? <div style={{ color: \"#b91c1c\", marginTop: 12 }}>Error: {String(error)}</div> : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const fallbackSrc =\r\n    product?.thumbnail ||\r\n    (product?.images && product.images[0] && (product.images[0].url || product.images[0])) ||\r\n    product?.image ||\r\n    null;\r\n\r\n  const mainImageSrc = galleryUrls.length > 0 ? galleryUrls[galleryIndex] : getImageUrl(fallbackSrc);\r\n\r\n  return (\r\n    <div style={{ padding: 24, position: \"relative\" }}>\r\n      <button onClick={() => navigate(-1)} style={{ marginBottom: 12 }}>← Back</button>\r\n\r\n      <div style={{ display: \"flex\", gap: 40 }}>\r\n        <div style={{ flex: \"0 0 520px\" }}>\r\n          <div\r\n            ref={productImageContainerRef}\r\n            style={{\r\n              width: \"100%\",\r\n              height: 520,\r\n              borderRadius: 8,\r\n              border: \"1px solid #f3f3f3\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n              overflow: \"hidden\",\r\n              background: \"#fff\",\r\n              position: \"relative\"\r\n            }}\r\n          >\r\n            {galleryUrls.length > 1 && (\r\n              <button\r\n                onClick={() => setGalleryIndex((i) => (i - 1 + galleryUrls.length) % galleryUrls.length)}\r\n                aria-label=\"Previous image\"\r\n                style={{\r\n                  position: \"absolute\",\r\n                  left: 8,\r\n                  top: \"50%\",\r\n                  transform: \"translateY(-50%)\",\r\n                  background: \"rgba(255,255,255,0.9)\",\r\n                  border: \"none\",\r\n                  padding: 8,\r\n                  borderRadius: 6,\r\n                  cursor: \"pointer\",\r\n                  zIndex: 5\r\n                }}\r\n              >◀</button>\r\n            )}\r\n\r\n            <img\r\n              ref={imgRef}\r\n              src={mainImageSrc}\r\n              alt={product.title}\r\n              onMouseMove={onImgMouseMove}\r\n              onMouseEnter={onImgEnter}\r\n              onMouseLeave={onImgLeave}\r\n              style={{\r\n                maxWidth: \"100%\",\r\n                maxHeight: \"100%\",\r\n                objectFit: \"contain\",\r\n                display: \"block\",\r\n                transition: \"transform 180ms cubic-bezier(.2,.9,.2,1)\",\r\n                transform: \"scale(1)\",\r\n              }}\r\n              onError={(e) => { e.target.src = getImageUrl(null); }}\r\n            />\r\n\r\n            {galleryUrls.length > 1 && (\r\n              <button\r\n                onClick={() => setGalleryIndex((i) => (i + 1) % galleryUrls.length)}\r\n                aria-label=\"Next image\"\r\n                style={{\r\n                  position: \"absolute\",\r\n                  right: 8,\r\n                  top: \"50%\",\r\n                  transform: \"translateY(-50%)\",\r\n                  background: \"rgba(255,255,255,0.9)\",\r\n                  border: \"none\",\r\n                  padding: 8,\r\n                  borderRadius: 6,\r\n                  cursor: \"pointer\",\r\n                  zIndex: 5\r\n                }}\r\n              >▶</button>\r\n            )}\r\n          </div>\r\n\r\n          {galleryUrls.length > 1 && (\r\n            <div style={{ display: \"flex\", gap: 8, marginTop: 12, flexWrap: \"wrap\" }}>\r\n              {galleryUrls.map((u, i) => (\r\n                <button\r\n                  key={u + i}\r\n                  onClick={() => setGalleryIndex(i)}\r\n                  style={{\r\n                    border: i === galleryIndex ? \"2px solid #0b5cff\" : \"1px solid #eee\",\r\n                    padding: 0,\r\n                    borderRadius: 6,\r\n                    overflow: \"hidden\",\r\n                    width: 76,\r\n                    height: 76,\r\n                    background: \"#fff\",\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                  aria-label={`Show image ${i + 1}`}\r\n                >\r\n                  <img src={u} alt={`${product.title}-${i}`} style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }} />\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {galleryUrls.length > 1 && <div style={{ marginTop: 8, color: \"#6b7280\", fontSize: 13 }}>{galleryIndex + 1} / {galleryUrls.length}</div>}\r\n        </div>\r\n\r\n        <div style={{ flex: \"1 1 auto\", maxWidth: 720 }}>\r\n          <h1 style={{ marginTop: 0 }}>{product.title}</h1>\r\n          {product.description && <p style={{ color: \"#374151\" }}>{product.description}</p>}\r\n\r\n          <div style={{ marginTop: 12 }}>\r\n            <div style={{ fontSize: 14, color: \"#6b7280\", textDecoration: product.mrp > product.price ? \"line-through\" : \"none\" }}>\r\n              MRP: ₹{Number(product.mrp ?? product.compareAtPrice ?? product.price ?? 0).toFixed(2)}\r\n            </div>\r\n            <div style={{ marginTop: 6, fontSize: 22, fontWeight: 800, color: \"#0b5cff\" }}>\r\n              ₹{Number(product.price ?? 0).toFixed(2)}\r\n            </div>\r\n          </div>\r\n\r\n          {Array.isArray(product.colors) && product.colors.length > 0 && (\r\n            <div style={{ marginTop: 14 }}>\r\n              <div style={{ marginBottom: 8, fontWeight: 700 }}>Color</div>\r\n              <div style={{ display: \"flex\", gap: 8, flexWrap: \"wrap\" }}>\r\n                {product.colors.map((c) => {\r\n                  const active = selectedColor === c;\r\n                  return (\r\n                    <button\r\n                      key={c}\r\n                      onClick={() => setSelectedColor(c)}\r\n                      style={{\r\n                        padding: \"8px 12px\",\r\n                        borderRadius: 8,\r\n                        border: active ? \"2px solid #0b5cff\" : \"1px solid #e6e6e6\",\r\n                        background: active ? \"#eef2ff\" : \"#fff\",\r\n                        cursor: \"pointer\",\r\n                      }}\r\n                    >\r\n                      {c}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {Array.isArray(product.sizes) && product.sizes.length > 0 && (\r\n            <div style={{ marginTop: 14 }}>\r\n              <div style={{ marginBottom: 8, fontWeight: 700 }}>Size</div>\r\n              <div style={{ display: \"flex\", gap: 8, flexWrap: \"wrap\" }}>\r\n                {product.sizes.map((s) => {\r\n                  const active = selectedSize === s;\r\n                  return (\r\n                    <button\r\n                      key={s}\r\n                      onClick={() => setSelectedSize(s)}\r\n                      style={{\r\n                        padding: \"8px 12px\",\r\n                        borderRadius: 8,\r\n                        border: active ? \"2px solid #0b5cff\" : \"1px solid #e6e6e6\",\r\n                        background: active ? \"#eef2ff\" : \"#fff\",\r\n                        cursor: \"pointer\",\r\n                      }}\r\n                    >\r\n                      {s}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div style={{ marginTop: 14, display: \"flex\", alignItems: \"center\", gap: 8 }}>\r\n            <div style={{ fontWeight: 700 }}>Quantity</div>\r\n            <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n              <button onClick={decQty} style={{ width: 36, height: 32 }}>-</button>\r\n              <input value={quantity} onChange={onQtyChange} style={{ width: 60, textAlign: \"center\", padding: 6 }} />\r\n              <button onClick={incQty} style={{ width: 36, height: 32 }}>+</button>\r\n            </div>\r\n            {typeof product.stock === \"number\" && (\r\n              <div style={{ marginLeft: 12, color: \"#6b7280\" }}>Stock: {product.stock}</div>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ marginTop: 18, display: \"flex\", gap: 12 }}>\r\n            <button\r\n              onClick={handleAddToCart}\r\n              disabled={adding}\r\n              style={{\r\n                background: \"#f59e0b\",\r\n                color: \"#fff\",\r\n                border: \"none\",\r\n                padding: \"10px 14px\",\r\n                borderRadius: 6,\r\n                fontWeight: 700,\r\n                cursor: adding ? \"progress\" : \"pointer\",\r\n              }}\r\n            >\r\n              {adding ? \"Adding...\" : \"Add to cart\"}\r\n            </button>\r\n\r\n            <button\r\n              onClick={toggleWishlist}\r\n              title={saved ? \"Saved to wishlist\" : \"Save for later\"}\r\n              aria-pressed={saved}\r\n              style={{\r\n                padding: \"10px 14px\",\r\n                borderRadius: 6,\r\n                border: saved ? \"1px solid #ef4444\" : \"1px solid #e6e6e6\",\r\n                background: saved ? \"#fff0f0\" : \"#fff\",\r\n                color: saved ? \"#ef4444\" : \"#111\",\r\n                cursor: \"pointer\",\r\n                fontWeight: 700,\r\n              }}\r\n            >\r\n              {saved ? \"♥ Saved\" : \"♡ Save\"}\r\n            </button>\r\n\r\n            <Link to=\"/cart\"><button style={{ padding: \"10px 14px\", borderRadius: 6, border: \"1px solid #ccc\", background: \"#fff\" }}>Go to cart</button></Link>\r\n          </div>\r\n\r\n          {error ? <div style={{ color: \"#b91c1c\", marginTop: 12 }}>{error}</div> : null}\r\n\r\n          <div style={{ marginTop: 18, color: \"#6b7280\" }}>\r\n            <div>Brand: {product.brand ?? \"—\"}</div>\r\n            <div>Category: {product.category ?? \"—\"}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        aria-hidden=\"false\"\r\n        style={{\r\n          position: \"fixed\",\r\n          left: 20,\r\n          right: 20,\r\n          bottom: 20,\r\n          margin: \"0 auto\",\r\n          maxWidth: 980,\r\n          background: \"#e6fffa\",\r\n          border: \"1px solid #bbf7d0\",\r\n          color: \"#064e3b\",\r\n          padding: \"12px 18px\",\r\n          borderRadius: 999,\r\n          boxShadow: \"0 6px 18px rgba(2,6,23,0.06)\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          gap: 12,\r\n          justifyContent: \"center\",\r\n          zIndex: 9999,\r\n        }}\r\n      >\r\n        {leftForFree > 0 ? (\r\n          <>\r\n            <span style={{ fontWeight: 700 }}>📦</span>\r\n            <div style={{ fontWeight: 700 }}>Add ₹{leftForFree.toFixed(2)} more to get free shipping.</div>\r\n            <div style={{ color: \"#065f46\" }}>Subtotal ₹{(cartTotals.subtotal || 0).toFixed(2)}</div>\r\n            <div style={{ marginLeft: 12 }}>\r\n              <button onClick={() => navigate(\"/cart\")} style={{ background: \"#0b5cff\", color: \"#fff\", padding: \"8px 12px\", borderRadius: 6, border: \"none\" }}>\r\n                View Cart\r\n              </button>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <span style={{ fontWeight: 700 }}>🎉</span>\r\n            <div style={{ fontWeight: 700 }}>You have free shipping! Subtotal ₹{(cartTotals.subtotal || 0).toFixed(2)}</div>\r\n            <div style={{ marginLeft: 12 }}>\r\n              <button onClick={() => burstAt(productImageContainerRef.current || document.body, { count: 36 })} style={{ background: \"#10b981\", color: \"#fff\", padding: \"8px 12px\", borderRadius: 6, border: \"none\" }}>\r\n                Celebrate\r\n              </button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/api/axiosInstance.js\r\nimport axios from \"axios\";\r\n\r\n/**\r\n * Robust axios instance that:\r\n * - uses REACT_APP_API_BASE if provided\r\n * - on production (seemati.in) uses https://api.seemati.in as base but will auto-prefix /api\r\n *   for relative paths that omit it (so '/products' -> '/api/products' on production)\r\n * - on localhost uses relative '/api' so CRA dev proxy works\r\n * - preserves withCredentials and timeout\r\n */\r\n\r\nfunction getRuntimeBase() {\r\n  // env override (explicit)\r\n  if (process.env.REACT_APP_API_BASE) {\r\n    return process.env.REACT_APP_API_BASE.replace(/\\/$/, \"\");\r\n  }\r\n\r\n  // in browser\r\n  if (typeof window !== \"undefined\") {\r\n    const host = window.location.hostname;\r\n\r\n    // dev local\r\n    if (host === \"localhost\" || host === \"127.0.0.1\") {\r\n      // keep base blank (use relative paths like '/api/...')\r\n      return \"\";\r\n    }\r\n\r\n    // production public site - keep root host so admin code that expects it continues to work\r\n    if (host === \"seemati.in\" || host.endsWith(\"seemati.in\")) {\r\n      return \"https://api.seemati.in\";\r\n    }\r\n  }\r\n\r\n  // fallback to empty (relative)\r\n  return \"\";\r\n}\r\n\r\nconst baseURL = getRuntimeBase();\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: baseURL || undefined, // undefined means use relative URLs as-is\r\n  withCredentials: true,\r\n  timeout: 15000,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n    Accept: \"application/json\",\r\n  },\r\n});\r\n\r\n// Request interceptor: normalize relative request paths on production\r\naxiosInstance.interceptors.request.use(\r\n  (config) => {\r\n    try {\r\n      // if config.url is absolute (starts with http) — leave it alone\r\n      const url = config.url || \"\";\r\n\r\n      if (typeof url === \"string\" && url.match(/^https?:\\/\\//i)) {\r\n        return config;\r\n      }\r\n\r\n      // If we are on production host (baseURL points to api.seemati.in) and the path is relative,\r\n      // ensure it has the /api prefix. This fixes calls that used '/products' instead of '/api/products'.\r\n      const runningOnPublic = !!baseURL && baseURL.includes(\"api.seemati.in\");\r\n\r\n      if (runningOnPublic && typeof url === \"string\" && url.startsWith(\"/\")) {\r\n        // if url already starts with /api, leave it\r\n        if (!url.startsWith(\"/api/\") && url !== \"/api\") {\r\n          // prefix /api\r\n          config.url = `/api${url}`;\r\n        }\r\n      }\r\n\r\n      // If baseURL is empty (dev) and caller passed '/api/..' that's fine.\r\n    } catch (e) {\r\n      // don't block the request on interceptor errors\r\n      // eslint-disable-next-line no-console\r\n      console.warn(\"axiosInstance request interceptor error:\", e);\r\n    }\r\n    return config;\r\n  },\r\n  (err) => Promise.reject(err)\r\n);\r\n\r\n// Simple response logger for debugging\r\naxiosInstance.interceptors.response.use(\r\n  (res) => res,\r\n  (err) => {\r\n    if (err && err.response) {\r\n      // eslint-disable-next-line no-console\r\n      console.error(\"API error:\", err.response.status, err.response.data);\r\n    } else {\r\n      // eslint-disable-next-line no-console\r\n      console.error(\"Network/API error:\", err.message || err);\r\n    }\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nexport default axiosInstance;\r\n","// src/utils/cartHelpers.js\r\n// Centralized cart helpers — normalize ids, persist as { items: [...] }, and emit `cart-updated`.\r\n\r\nexport const CART_KEY = \"seemati_cart_v1\";\r\nexport const SHIPPING_THRESHOLD = 999;\r\nconst DEFAULT_SHIPPING = 60;\r\n\r\nfunction safeParse(raw) {\r\n  try {\r\n    return JSON.parse(raw);\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n// Always return shape: { items: [ ... ] }\r\nexport function loadCart() {\r\n  try {\r\n    const raw = localStorage.getItem(CART_KEY);\r\n    if (!raw) return { items: [] };\r\n    const parsed = safeParse(raw);\r\n    if (!parsed) return { items: [] };\r\n    // Accept either array or object form\r\n    if (Array.isArray(parsed)) return { items: parsed };\r\n    if (parsed.items && Array.isArray(parsed.items)) return parsed;\r\n    // fallback: unknown shape -> attempt to find array value\r\n    for (const k of Object.keys(parsed)) {\r\n      if (Array.isArray(parsed[k])) return { items: parsed[k] };\r\n    }\r\n    return { items: [] };\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] loadCart error\", e);\r\n    return { items: [] };\r\n  }\r\n}\r\n\r\nexport function saveCart(cartObj) {\r\n  try {\r\n    const normalized = Array.isArray(cartObj) ? { items: cartObj } : (cartObj && cartObj.items ? { items: cartObj.items } : { items: [] });\r\n    localStorage.setItem(CART_KEY, JSON.stringify(normalized.items));\r\n    // Note: we save as array to be tolerant with older code that expects an array in storage.\r\n    // Also emit event to notify UI listeners.\r\n    try { window.dispatchEvent(new Event(\"cart-updated\")); } catch (e) {}\r\n    return normalized;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] saveCart error\", e);\r\n    return { items: [] };\r\n  }\r\n}\r\n\r\nfunction normalizeId(item) {\r\n  return item.productId ?? item._id ?? item.id ?? item.slug ?? String(item.title ?? Math.random().toString(36).slice(2,9));\r\n}\r\n\r\nfunction normalizeItemShape(item) {\r\n  const pid = normalizeId(item);\r\n  return {\r\n    productId: pid,\r\n    _id: item._id ?? pid,\r\n    id: item.id ?? pid,\r\n    slug: item.slug ?? undefined,\r\n    title: item.title ?? item.name ?? \"Product\",\r\n    price: Number(item.price ?? item.salePrice ?? item.amount ?? 0),\r\n    image: item.image ?? (item.images && item.images[0] && (item.images[0].url || item.images[0])) ?? null,\r\n    images: item.images ?? (item.image ? [{ url: item.image }] : []),\r\n    quantity: Math.max(1, Number(item.quantity ?? item.qty ?? 1)),\r\n    // keep any extra fields if present\r\n    ...Object.keys(item).reduce((acc, k) => {\r\n      if (![\"productId\",\"_id\",\"id\",\"slug\",\"title\",\"price\",\"image\",\"images\",\"quantity\"].includes(k)) acc[k] = item[k];\r\n      return acc;\r\n    }, {})\r\n  };\r\n}\r\n\r\nexport function computeTotals(cartLike) {\r\n  const obj = Array.isArray(cartLike) ? { items: cartLike } : (cartLike || { items: [] });\r\n  const items = obj.items || [];\r\n  const subtotal = items.reduce((s, it) => s + (Number(it.price || 0) * Number(it.quantity || it.qty || 0)), 0);\r\n  const shipping = subtotal >= SHIPPING_THRESHOLD ? 0 : DEFAULT_SHIPPING;\r\n  const tax = Math.round(subtotal * 0.05); // example tax\r\n  const discount = 0;\r\n  const total = subtotal + shipping + tax - discount;\r\n  return { items, subtotal, shipping, tax, discount, total };\r\n}\r\n\r\n/**\r\n * Add item (or increment existing). Returns the normalized cart { items: [...] }.\r\n * item: object with at least id/title/price. qtyOrDelta: number to add (default 1)\r\n */\r\nexport function addOrIncrementItem(item, qtyOrDelta = 1) {\r\n  try {\r\n    const cart = loadCart();\r\n    const items = Array.isArray(cart.items) ? [...cart.items] : [];\r\n    const incoming = normalizeItemShape(item);\r\n    const productId = incoming.productId;\r\n    const idx = items.findIndex(i => (i.productId ?? i._id ?? i.id ?? i.slug) === productId);\r\n    if (idx > -1) {\r\n      const existing = { ...items[idx] };\r\n      existing.quantity = Math.min(99, (Number(existing.quantity || existing.qty || 0) + Number(qtyOrDelta || 1)));\r\n      items[idx] = existing;\r\n    } else {\r\n      incoming.quantity = Math.max(1, Number(qtyOrDelta || incoming.quantity || 1));\r\n      items.push(incoming);\r\n    }\r\n    const saved = saveCart(items);\r\n    return saved;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] addOrIncrementItem error\", e);\r\n    return loadCart();\r\n  }\r\n}\r\n\r\nexport function setItemQuantity(productId, quantity) {\r\n  try {\r\n    const cart = loadCart();\r\n    const items = (cart.items || []).map(i => {\r\n      const id = i.productId ?? i._id ?? i.id ?? i.slug;\r\n      if (id === productId) {\r\n        return { ...i, quantity: Math.max(0, Math.floor(Number(quantity) || 0)) };\r\n      }\r\n      return i;\r\n    }).filter(i => Number(i.quantity || 0) > 0); // remove zero qty\r\n    const saved = saveCart(items);\r\n    return saved;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] setItemQuantity error\", e);\r\n    return loadCart();\r\n  }\r\n}\r\n\r\nexport function removeItem(productId) {\r\n  try {\r\n    const cart = loadCart();\r\n    const items = (cart.items || []).filter(i => {\r\n      const id = i.productId ?? i._id ?? i.id ?? i.slug;\r\n      return id !== productId;\r\n    });\r\n    const saved = saveCart(items);\r\n    return saved;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] removeItem error\", e);\r\n    return loadCart();\r\n  }\r\n}\r\n\r\nexport function clearCart() {\r\n  try {\r\n    const saved = saveCart([]);\r\n    return saved;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] clearCart error\", e);\r\n    return { items: [] };\r\n  }\r\n}\r\n"],"names":["CartStateContext","createContext","CartDispatchContext","calculateTotals","items","subtotal","reduce","s","it","Number","price","quantity","shipping","tax","Math","round","discount","total","useCartState","ctx","useContext","totals","useCartDispatch","dispatch","BASE","String","process","replace","getImageUrl","imgOrUrl","concat","raw","url","path","filename","test","startsWith","WISHLIST_KEY","loadWishlist","localStorage","getItem","arr","JSON","parse","Array","isArray","_unused","saveWishlist","setItem","stringify","window","dispatchEvent","Event","e","console","warn","burstAt","containerEl","options","arguments","length","undefined","document","body","count","spread","lifetime","colors","rect","getBoundingClientRect","wrapper","createElement","style","position","left","scrollX","top","scrollY","width","height","pointerEvents","overflow","zIndex","appendChild","cx","cy","particles","i","el","size","floor","random","borderRadius","background","opacity","transform","willChange","angle","PI","speed","vx","cos","vy","sin","rot","push","x","y","start","performance","now","requestAnimationFrame","frame","t","dt","norm","min","forEach","p","scale","max","setTimeout","remove","_unused2","ProductDetailPage","_ref","_ref17","_ref18","_product$mrp","_product$price3","_product$brand","_product$category","products","slug","useParams","navigate","useNavigate","cartDispatch","product","setProduct","useState","_products$find","find","_id","id","_unused3","loading","setLoading","error","setError","adding","setAdding","productImageContainerRef","useRef","imgRef","onImgMouseMove","onImgEnter","onImgLeave","img","current","clientX","clientY","px","py","transformOrigin","transition","useImageZoom","saved","setSaved","selectedColor","setSelectedColor","selectedSize","setSelectedSize","setQuantity","galleryUrls","setGalleryUrls","galleryIndex","setGalleryIndex","useEffect","_ref2","_product$_id","pid","some","_ref3","_ref4","_i$productId","productId","_unused4","prev","sizes","mounted","async","endpoints","encodeURIComponent","lastError","ep","res","axios","get","data","resolved","_ref5","_data$find","_ref6","_data$products$find","_ref7","_data$items$find","err","message","fetchProduct","imgs","images","image","thumbnail","urls","seen","Set","out","has","add","getImageUrls","cartTotals","setCartTotals","loadCart","computeTotals","_unused5","onCartUpdated","comp","addEventListener","removeEventListener","onKey","useCallback","key","clampQty","q","n","stock","leftForFree","SHIPPING_THRESHOLD","_jsx","padding","children","_jsxs","Link","to","color","marginTop","fallbackSrc","mainImageSrc","onClick","marginBottom","display","gap","flex","ref","border","alignItems","justifyContent","cursor","src","alt","title","onMouseMove","onMouseEnter","onMouseLeave","maxWidth","maxHeight","objectFit","onError","target","right","flexWrap","map","u","fontSize","description","textDecoration","mrp","compareAtPrice","toFixed","fontWeight","c","active","value","onChange","textAlign","marginLeft","_e$preventDefault2","_ref13","_ref14","_product$_id4","_ref15","_product$title","_ref16","_product$price2","_product$images","_product$imageUrl","preventDefault","call","idBase","toString","slice","variantKeyParts","itemPayload","join","name","salePrice","imageUrl","meta","addOrIncrementItem","type","payload","KEY","done","removeItem","checkAndTriggerBurst","disabled","_e$preventDefault","_ref8","_ref9","_product$_id2","next","_ref0","_ref1","_i$productId2","filter","_ref10","_ref11","_i$productId3","_product$_id3","_product$id","_product$slug","_product$price","_ref12","_product$image","brand","category","bottom","margin","boxShadow","_Fragment","baseURL","REACT_APP_API_BASE","host","location","hostname","endsWith","getRuntimeBase","axiosInstance","create","withCredentials","timeout","headers","Accept","interceptors","request","use","config","match","includes","Promise","reject","response","status","CART_KEY","DEFAULT_SHIPPING","parsed","safeParse","k","Object","keys","saveCart","cartObj","normalized","normalizeItemShape","item","_item$_id","_item$id","_item$slug","_item$title2","_item$price","_item$image","_item$images","_item$quantity","_item$productId","_item$title","normalizeId","_objectSpread","amount","qty","acc","cartLike","qtyOrDelta","cart","incoming","idx","findIndex","existing","setItemQuantity","clearCart"],"ignoreList":[],"sourceRoot":""}