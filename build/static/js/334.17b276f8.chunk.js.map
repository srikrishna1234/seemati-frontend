{"version":3,"file":"static/js/334.17b276f8.chunk.js","mappings":"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","sources":["pages/CartPage.jsx","context/CartContext.jsx","utils/cartHelpers.js"],"sourcesContent":["// src/pages/CartPage.jsx\r\nimport React, { useMemo, useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { loadCart, computeTotals, SHIPPING_THRESHOLD, setItemQuantity, removeItem, clearCart } from \"../utils/cartHelpers\";\r\nimport { useCartState, useCartDispatch } from \"../context/CartContext\";\r\n\r\n/* burst animation */\r\nfunction burstAt(containerEl, options = {}) {\r\n  if (!containerEl) containerEl = document.body;\r\n  const { count = 20, spread = 160, lifetime = 900, colors = [\"#f59e0b\", \"#ef4444\", \"#10b981\", \"#0b5cff\", \"#7c3aed\"] } = options;\r\n\r\n  const rect = containerEl.getBoundingClientRect();\r\n  const wrapper = document.createElement(\"div\");\r\n  wrapper.style.position = \"absolute\";\r\n  wrapper.style.left = `${rect.left + window.scrollX}px`;\r\n  wrapper.style.top = `${rect.top + window.scrollY}px`;\r\n  wrapper.style.width = `${rect.width}px`;\r\n  wrapper.style.height = `${rect.height}px`;\r\n  wrapper.style.pointerEvents = \"none\";\r\n  wrapper.style.overflow = \"visible\";\r\n  wrapper.style.zIndex = 9999;\r\n  document.body.appendChild(wrapper);\r\n\r\n  const cx = rect.width / 2;\r\n  const cy = rect.height / 2;\r\n  const particles = [];\r\n\r\n  for (let i = 0; i < count; i++) {\r\n    const el = document.createElement(\"div\");\r\n    const size = Math.floor(Math.random() * 8) + 6;\r\n    el.style.position = \"absolute\";\r\n    el.style.left = `${cx - size / 2}px`;\r\n    el.style.top = `${cy - size / 2}px`;\r\n    el.style.width = `${size}px`;\r\n    el.style.height = `${size}px`;\r\n    el.style.borderRadius = \"4px\";\r\n    el.style.background = colors[Math.floor(Math.random() * colors.length)];\r\n    el.style.opacity = \"1\";\r\n    el.style.transform = \"translate3d(0,0,0) scale(1)\";\r\n    el.style.willChange = \"transform, opacity\";\r\n    wrapper.appendChild(el);\r\n\r\n    const angle = Math.random() * Math.PI * 2;\r\n    const speed = 2 + Math.random() * (spread / 30);\r\n    const vx = Math.cos(angle) * speed;\r\n    const vy = Math.sin(angle) * speed - Math.random() * 1.5;\r\n    const rot = (Math.random() - 0.5) * 10;\r\n    particles.push({ el, x: cx, y: cy, vx, vy, rot });\r\n  }\r\n\r\n  const start = performance.now();\r\n  function frame(t) {\r\n    const dt = t - start;\r\n    const norm = Math.min(1, dt / lifetime);\r\n    particles.forEach((p) => {\r\n      p.x += p.vx;\r\n      p.y += p.vy;\r\n      p.vy += 0.06;\r\n      const scale = 1 - norm * 0.6;\r\n      p.el.style.transform = `translate3d(${p.x - cx}px, ${p.y - cy}px, 0) rotate(${p.rot * norm}deg) scale(${Math.max(0.2, scale)})`;\r\n      p.el.style.opacity = String(1 - norm);\r\n    });\r\n    if (norm < 1) requestAnimationFrame(frame);\r\n    else setTimeout(() => { try { wrapper.remove(); } catch {} }, 60);\r\n  }\r\n  requestAnimationFrame(frame);\r\n}\r\n\r\n/* single-run burst helper */\r\nfunction checkAndTriggerBurst(subtotal, containerEl) {\r\n  try {\r\n    const KEY = \"seemati_free_burst_done_v1\";\r\n    const done = localStorage.getItem(KEY) === \"1\";\r\n    if (subtotal >= SHIPPING_THRESHOLD && !done) {\r\n      burstAt(containerEl || document.body, { count: 36, spread: 220, lifetime: 1000 });\r\n      localStorage.setItem(KEY, \"1\");\r\n    } else if (subtotal < SHIPPING_THRESHOLD && done) {\r\n      localStorage.removeItem(KEY);\r\n    }\r\n  } catch (e) {\r\n    console.warn(\"burst check failed\", e);\r\n  }\r\n}\r\n\r\nfunction safeLoadItems() {\r\n  try {\r\n    const raw = loadCart();\r\n    const arr = Array.isArray(raw) ? raw : raw.items ?? [];\r\n    return Array.isArray(arr) ? arr : [];\r\n  } catch (e) {\r\n    return [];\r\n  }\r\n}\r\n\r\nexport default function CartPage() {\r\n  const ctx = useCartState();\r\n  const cartDispatch = useCartDispatch();\r\n\r\n  const [items, setItems] = useState(() => ctx?.items ?? safeLoadItems());\r\n\r\n  // sync local items when context changes\r\n  useEffect(() => {\r\n    setItems(ctx?.items ?? safeLoadItems());\r\n  }, [ctx?.items]);\r\n\r\n  // recompute totals when items change\r\n  const totals = useMemo(() => computeTotals({ items }), [items]);\r\n\r\n  // show floating banner state\r\n  const [showBanner, setShowBanner] = useState(true);\r\n\r\n  // helper to persist via helpers and sync context\r\n  function persistAndSync(savedCart) {\r\n    const normalized = Array.isArray(savedCart) ? { items: savedCart } : (savedCart || { items: [] });\r\n    try { if (typeof cartDispatch === \"function\") cartDispatch({ type: \"INITIALIZE\", payload: normalized }); } catch (err) { console.warn(\"[CartPage] dispatch init failed\", err); }\r\n    try { window.dispatchEvent(new Event(\"cart-updated\")); } catch (e) {}\r\n    setItems(normalized.items || []);\r\n    try {\r\n      const comp = computeTotals(normalized);\r\n      checkAndTriggerBurst(comp.subtotal || 0, document.body);\r\n    } catch (e) {}\r\n  }\r\n\r\n  async function updateQty(productId, nextQty) {\r\n    const normalizedQty = Math.max(0, Math.floor(Number(nextQty) || 0));\r\n    if (normalizedQty <= 0) {\r\n      const saved = removeItem(productId);\r\n      persistAndSync(saved);\r\n      return;\r\n    }\r\n    const saved = setItemQuantity(productId, normalizedQty);\r\n    persistAndSync(saved);\r\n  }\r\n\r\n  async function handleRemove(productId) {\r\n    const saved = removeItem(productId);\r\n    persistAndSync(saved);\r\n  }\r\n\r\n  function handleClear() {\r\n    const saved = clearCart();\r\n    persistAndSync(saved);\r\n  }\r\n\r\n  const leftForFree = Math.max(0, (SHIPPING_THRESHOLD - (totals.subtotal || 0)));\r\n\r\n  if (!items || items.length === 0) {\r\n    return (\r\n      <div style={{ padding: 24 }}>\r\n        <h2>Your cart is empty</h2>\r\n        <Link to=\"/shop\">Go shopping</Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: 24 }}>\r\n      <h1>Your Cart</h1>\r\n\r\n      <div style={{ display: \"flex\", gap: 24 }}>\r\n        <div style={{ flex: \"1 1 auto\" }}>\r\n          {items.map((it) => {\r\n            const id = it.productId ?? it._id ?? it.id ?? \"\";\r\n            const imgSrc = it.image ?? (it.images && it.images[0] && (it.images[0].url || it.images[0])) ?? `${process.env.REACT_APP_API_URL || \"http://localhost:4000\"}/uploads/placeholder.png`;\r\n            return (\r\n              <div key={id} style={{ border: \"1px solid #eee\", padding: 12, marginBottom: 12, borderRadius: 6, display: \"flex\", gap: 12, alignItems: \"center\" }}>\r\n                <div style={{ width: 96, height: 96, borderRadius: 6, overflow: \"hidden\", background: \"#fff\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\", border: \"1px solid #f3f3f3\" }}>\r\n                  <img src={imgSrc} alt={it.title} style={{ maxWidth: \"100%\", maxHeight: \"100%\", objectFit: \"contain\", display: \"block\" }} onError={(e) => e.target.src = `${process.env.REACT_APP_API_URL || \"http://localhost:4000\"}/uploads/placeholder.png`} />\r\n                </div>\r\n\r\n                <div style={{ flex: \"1 1 auto\" }}>\r\n                  <div style={{ fontWeight: 700 }}>{it.title}</div>\r\n                  <div style={{ marginTop: 8 }}>Price: â‚¹{Number(it.price ?? 0).toFixed(2)}</div>\r\n                  <div style={{ marginTop: 8, display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n                    <button onClick={() => updateQty(id, (Number(it.quantity ?? it.qty ?? 1) || 1) - 1)} style={{ width: 36, height: 28 }}>-</button>\r\n                    <input value={it.quantity ?? it.qty ?? 1} onChange={(e) => updateQty(id, Number(e.target.value || 0))} style={{ width: 48, textAlign: \"center\" }} />\r\n                    <button onClick={() => updateQty(id, (Number(it.quantity ?? it.qty ?? 1) || 1) + 1)} style={{ width: 36, height: 28 }}>+</button>\r\n                    <button onClick={() => handleRemove(id)} style={{ marginLeft: \"auto\", color: \"#dc2626\", background: \"transparent\", border: \"none\", cursor: \"pointer\" }}>Remove</button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{ minWidth: 120, textAlign: \"right\", fontWeight: 800 }}>â‚¹{((Number(it.price ?? 0) * (it.quantity ?? it.qty ?? 1)) || 0).toFixed(2)}</div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        <aside style={{ width: 320 }}>\r\n          <div style={{ border: \"1px solid #eee\", padding: 16, borderRadius: 8 }}>\r\n            <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n              <div>Items</div>\r\n              <div>{items.reduce((s, it) => s + (Number(it.quantity ?? it.qty ?? 1) || 0), 0)}</div>\r\n            </div>\r\n            <div style={{ display: \"flex\", justifyContent: \"space-between\", marginTop: 8 }}>\r\n              <div>Subtotal</div>\r\n              <div>â‚¹{(totals.subtotal ?? 0).toFixed(2)}</div>\r\n            </div>\r\n            <div style={{ display: \"flex\", justifyContent: \"space-between\", marginTop: 8 }}>\r\n              <div>Shipping</div>\r\n              <div>{totals.shipping === 0 ? \"FREE\" : `â‚¹${totals.shipping.toFixed(2)}`}</div>\r\n            </div>\r\n            <div style={{ marginTop: 12, fontWeight: 800, display: \"flex\", justifyContent: \"space-between\" }}>\r\n              <div>Total</div>\r\n              <div>â‚¹{(totals.total ?? 0).toFixed(2)}</div>\r\n            </div>\r\n\r\n            <div style={{ marginTop: 12 }}>\r\n              <button style={{ width: \"100%\", padding: \"10px 12px\", background: \"#0b5cff\", color: \"#fff\", borderRadius: 6, border: \"none\" }}>\r\n                Proceed to Checkout\r\n              </button>\r\n            </div>\r\n\r\n            <div style={{ marginTop: 8 }}>\r\n              <button onClick={handleClear} style={{ width: \"100%\", padding: \"8px 12px\", borderRadius: 6, border: \"1px solid #ddd\", background: \"#fff\", marginTop: 8 }}>\r\n                Clear cart\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </aside>\r\n      </div>\r\n\r\n      {/* Floating free-shipping banner */}\r\n      <div\r\n        aria-hidden=\"false\"\r\n        style={{\r\n          position: \"fixed\",\r\n          left: 20,\r\n          right: 20,\r\n          bottom: 20,\r\n          margin: \"0 auto\",\r\n          maxWidth: 980,\r\n          background: \"#e6fffa\",\r\n          border: \"1px solid #bbf7d0\",\r\n          color: \"#064e3b\",\r\n          padding: \"12px 18px\",\r\n          borderRadius: 999,\r\n          boxShadow: \"0 6px 18px rgba(2,6,23,0.06)\",\r\n          display: showBanner ? \"flex\" : \"none\",\r\n          alignItems: \"center\",\r\n          gap: 12,\r\n          justifyContent: \"center\",\r\n          zIndex: 9999,\r\n        }}\r\n      >\r\n        {leftForFree > 0 ? (\r\n          <>\r\n            <span style={{ fontWeight: 700 }}>ðŸ“¦</span>\r\n            <div style={{ fontWeight: 700 }}>Add â‚¹{leftForFree.toFixed(2)} more to get free shipping.</div>\r\n            <div style={{ color: \"#065f46\" }}>Subtotal â‚¹{(totals.subtotal || 0).toFixed(2)}</div>\r\n            <Link to=\"/shop\"><button style={{ marginLeft: 12, background: \"#0b5cff\", color: \"#fff\", padding: \"8px 12px\", borderRadius: 6, border: \"none\" }}>Continue shopping</button></Link>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <span style={{ fontWeight: 700 }}>ðŸŽ‰</span>\r\n            <div style={{ fontWeight: 700 }}>You have free shipping! Subtotal â‚¹{(totals.subtotal || 0).toFixed(2)}</div>\r\n            <button onClick={() => burstAt(document.body, { count: 36 })} style={{ marginLeft: 12, background: \"#10b981\", color: \"#fff\", padding: \"8px 12px\", borderRadius: 6, border: \"none\" }}>\r\n              Celebrate\r\n            </button>\r\n          </>\r\n        )}\r\n\r\n        <button onClick={() => setShowBanner(false)} style={{ marginLeft: 12, background: \"transparent\", border: \"none\", cursor: \"pointer\" }}>Dismiss âœ•</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/context/CartContext.jsx\r\nimport React, { createContext, useReducer, useContext, useEffect } from \"react\";\r\n\r\nconst CartStateContext = createContext(null);\r\nconst CartDispatchContext = createContext(null);\r\n\r\nconst CART_KEY = \"seemati_cart_v1\";\r\n\r\nfunction loadCart() {\r\n  try {\r\n    const raw = localStorage.getItem(CART_KEY);\r\n    return raw ? JSON.parse(raw) : { items: [] };\r\n  } catch {\r\n    return { items: [] };\r\n  }\r\n}\r\n\r\nfunction saveCart(state) {\r\n  try {\r\n    localStorage.setItem(CART_KEY, JSON.stringify(state));\r\n  } catch {}\r\n}\r\n\r\nfunction calculateTotals(items) {\r\n  const subtotal = items.reduce(\r\n    (s, it) => s + Number(it.price || 0) * (it.quantity || 1),\r\n    0\r\n  );\r\n  const shipping = subtotal > 999 ? 0 : 60; // Free shipping above â‚¹999\r\n  const tax = Math.round(subtotal * 0.05); // Example: 5% tax\r\n  const discount = 0;\r\n  const total = subtotal + shipping + tax - discount;\r\n  return { subtotal, shipping, tax, discount, total };\r\n}\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"INITIALIZE\": {\r\n      return action.payload;\r\n    }\r\n    case \"ADD_ITEM\": {\r\n      const item = action.payload;\r\n      const items = [...state.items];\r\n      const idx = items.findIndex((i) => i.productId === item.productId);\r\n      if (idx > -1) {\r\n        items[idx].quantity = Math.min(\r\n          99,\r\n          (items[idx].quantity || 1) + (item.quantity || 1)\r\n        );\r\n      } else {\r\n        items.push({ ...item, quantity: item.quantity || 1 });\r\n      }\r\n      const totals = calculateTotals(items);\r\n      const next = { ...state, items, totals };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    case \"SET_QTY\": {\r\n      const { productId, quantity } = action.payload;\r\n      const items = state.items.map((i) =>\r\n        i.productId === productId\r\n          ? { ...i, quantity: Math.max(1, quantity) }\r\n          : i\r\n      );\r\n      const totals = calculateTotals(items);\r\n      const next = { ...state, items, totals };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    case \"REMOVE_ITEM\": {\r\n      const items = state.items.filter(\r\n        (i) => i.productId !== action.payload.productId\r\n      );\r\n      const totals = calculateTotals(items);\r\n      const next = { ...state, items, totals };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    case \"CLEAR_CART\": {\r\n      const next = { items: [], totals: calculateTotals([]) };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function CartProvider({ children }) {\r\n  const [state, dispatch] = useReducer(reducer, {\r\n    items: [],\r\n    totals: calculateTotals([]),\r\n  });\r\n\r\n  // initialize once from localStorage\r\n  useEffect(() => {\r\n    const init = loadCart();\r\n    if (!init.totals) init.totals = calculateTotals(init.items || []);\r\n    dispatch({ type: \"INITIALIZE\", payload: init });\r\n  }, []);\r\n\r\n  return (\r\n    <CartStateContext.Provider value={state}>\r\n      <CartDispatchContext.Provider value={dispatch}>\r\n        {children}\r\n      </CartDispatchContext.Provider>\r\n    </CartStateContext.Provider>\r\n  );\r\n}\r\n\r\n// SAFE consumer hooks: never return undefined\r\nexport function useCartState() {\r\n  const ctx = useContext(CartStateContext);\r\n  return ctx ?? { items: [], totals: calculateTotals([]) };\r\n}\r\n\r\nexport function useCartDispatch() {\r\n  const dispatch = useContext(CartDispatchContext);\r\n  return dispatch ?? (() => {});\r\n}\r\n\r\n// âœ… Option A additions (for compatibility with /contexts shim)\r\nexport const useCart = useCartState;   // alias for uniform naming\r\nexport default CartProvider;           // default export for easy import\r\n","// src/utils/cartHelpers.js\r\n// Centralized cart helpers â€” normalize ids, persist as { items: [...] }, and emit `cart-updated`.\r\n\r\nexport const CART_KEY = \"seemati_cart_v1\";\r\nexport const SHIPPING_THRESHOLD = 999;\r\nconst DEFAULT_SHIPPING = 60;\r\n\r\nfunction safeParse(raw) {\r\n  try {\r\n    return JSON.parse(raw);\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n// Always return shape: { items: [ ... ] }\r\nexport function loadCart() {\r\n  try {\r\n    const raw = localStorage.getItem(CART_KEY);\r\n    if (!raw) return { items: [] };\r\n    const parsed = safeParse(raw);\r\n    if (!parsed) return { items: [] };\r\n    // Accept either array or object form\r\n    if (Array.isArray(parsed)) return { items: parsed };\r\n    if (parsed.items && Array.isArray(parsed.items)) return parsed;\r\n    // fallback: unknown shape -> attempt to find array value\r\n    for (const k of Object.keys(parsed)) {\r\n      if (Array.isArray(parsed[k])) return { items: parsed[k] };\r\n    }\r\n    return { items: [] };\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] loadCart error\", e);\r\n    return { items: [] };\r\n  }\r\n}\r\n\r\nexport function saveCart(cartObj) {\r\n  try {\r\n    const normalized = Array.isArray(cartObj) ? { items: cartObj } : (cartObj && cartObj.items ? { items: cartObj.items } : { items: [] });\r\n    localStorage.setItem(CART_KEY, JSON.stringify(normalized.items));\r\n    // Note: we save as array to be tolerant with older code that expects an array in storage.\r\n    // Also emit event to notify UI listeners.\r\n    try { window.dispatchEvent(new Event(\"cart-updated\")); } catch (e) {}\r\n    return normalized;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] saveCart error\", e);\r\n    return { items: [] };\r\n  }\r\n}\r\n\r\nfunction normalizeId(item) {\r\n  return item.productId ?? item._id ?? item.id ?? item.slug ?? String(item.title ?? Math.random().toString(36).slice(2,9));\r\n}\r\n\r\nfunction normalizeItemShape(item) {\r\n  const pid = normalizeId(item);\r\n  return {\r\n    productId: pid,\r\n    _id: item._id ?? pid,\r\n    id: item.id ?? pid,\r\n    slug: item.slug ?? undefined,\r\n    title: item.title ?? item.name ?? \"Product\",\r\n    price: Number(item.price ?? item.salePrice ?? item.amount ?? 0),\r\n    image: item.image ?? (item.images && item.images[0] && (item.images[0].url || item.images[0])) ?? null,\r\n    images: item.images ?? (item.image ? [{ url: item.image }] : []),\r\n    quantity: Math.max(1, Number(item.quantity ?? item.qty ?? 1)),\r\n    // keep any extra fields if present\r\n    ...Object.keys(item).reduce((acc, k) => {\r\n      if (![\"productId\",\"_id\",\"id\",\"slug\",\"title\",\"price\",\"image\",\"images\",\"quantity\"].includes(k)) acc[k] = item[k];\r\n      return acc;\r\n    }, {})\r\n  };\r\n}\r\n\r\nexport function computeTotals(cartLike) {\r\n  const obj = Array.isArray(cartLike) ? { items: cartLike } : (cartLike || { items: [] });\r\n  const items = obj.items || [];\r\n  const subtotal = items.reduce((s, it) => s + (Number(it.price || 0) * Number(it.quantity || it.qty || 0)), 0);\r\n  const shipping = subtotal >= SHIPPING_THRESHOLD ? 0 : DEFAULT_SHIPPING;\r\n  const tax = Math.round(subtotal * 0.05); // example tax\r\n  const discount = 0;\r\n  const total = subtotal + shipping + tax - discount;\r\n  return { items, subtotal, shipping, tax, discount, total };\r\n}\r\n\r\n/**\r\n * Add item (or increment existing). Returns the normalized cart { items: [...] }.\r\n * item: object with at least id/title/price. qtyOrDelta: number to add (default 1)\r\n */\r\nexport function addOrIncrementItem(item, qtyOrDelta = 1) {\r\n  try {\r\n    const cart = loadCart();\r\n    const items = Array.isArray(cart.items) ? [...cart.items] : [];\r\n    const incoming = normalizeItemShape(item);\r\n    const productId = incoming.productId;\r\n    const idx = items.findIndex(i => (i.productId ?? i._id ?? i.id ?? i.slug) === productId);\r\n    if (idx > -1) {\r\n      const existing = { ...items[idx] };\r\n      existing.quantity = Math.min(99, (Number(existing.quantity || existing.qty || 0) + Number(qtyOrDelta || 1)));\r\n      items[idx] = existing;\r\n    } else {\r\n      incoming.quantity = Math.max(1, Number(qtyOrDelta || incoming.quantity || 1));\r\n      items.push(incoming);\r\n    }\r\n    const saved = saveCart(items);\r\n    return saved;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] addOrIncrementItem error\", e);\r\n    return loadCart();\r\n  }\r\n}\r\n\r\nexport function setItemQuantity(productId, quantity) {\r\n  try {\r\n    const cart = loadCart();\r\n    const items = (cart.items || []).map(i => {\r\n      const id = i.productId ?? i._id ?? i.id ?? i.slug;\r\n      if (id === productId) {\r\n        return { ...i, quantity: Math.max(0, Math.floor(Number(quantity) || 0)) };\r\n      }\r\n      return i;\r\n    }).filter(i => Number(i.quantity || 0) > 0); // remove zero qty\r\n    const saved = saveCart(items);\r\n    return saved;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] setItemQuantity error\", e);\r\n    return loadCart();\r\n  }\r\n}\r\n\r\nexport function removeItem(productId) {\r\n  try {\r\n    const cart = loadCart();\r\n    const items = (cart.items || []).filter(i => {\r\n      const id = i.productId ?? i._id ?? i.id ?? i.slug;\r\n      return id !== productId;\r\n    });\r\n    const saved = saveCart(items);\r\n    return saved;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] removeItem error\", e);\r\n    return loadCart();\r\n  }\r\n}\r\n\r\nexport function clearCart() {\r\n  try {\r\n    const saved = saveCart([]);\r\n    return saved;\r\n  } catch (e) {\r\n    console.error(\"[cartHelpers] clearCart error\", e);\r\n    return { items: [] };\r\n  }\r\n}\r\n"],"names":["burstAt","containerEl","options","arguments","length","undefined","document","body","count","spread","lifetime","colors","rect","getBoundingClientRect","wrapper","createElement","style","position","left","concat","window","scrollX","top","scrollY","width","height","pointerEvents","overflow","zIndex","appendChild","cx","cy","particles","i","el","size","Math","floor","random","borderRadius","background","opacity","transform","willChange","angle","PI","speed","vx","cos","vy","sin","rot","push","x","y","start","performance","now","requestAnimationFrame","frame","t","dt","norm","min","forEach","p","scale","max","String","setTimeout","remove","_unused","safeLoadItems","_raw$items","raw","loadCart","arr","Array","isArray","items","e","CartPage","_totals$subtotal","_totals$total","ctx","useCartState","cartDispatch","useCartDispatch","setItems","useState","_ctx$items","useEffect","_ctx$items2","totals","useMemo","computeTotals","showBanner","setShowBanner","persistAndSync","savedCart","normalized","type","payload","err","console","warn","dispatchEvent","Event","subtotal","KEY","done","localStorage","getItem","SHIPPING_THRESHOLD","setItem","removeItem","checkAndTriggerBurst","async","updateQty","productId","nextQty","normalizedQty","Number","setItemQuantity","leftForFree","_jsxs","padding","children","_jsx","display","gap","flex","map","it","_ref","_ref2","_it$productId","_ref3","_it$image","_it$price","_ref5","_it$quantity2","_it$price2","_ref7","_it$quantity4","id","_id","imgSrc","image","images","url","process","border","marginBottom","alignItems","justifyContent","src","alt","title","maxWidth","maxHeight","objectFit","onError","target","fontWeight","marginTop","price","toFixed","onClick","_ref4","_it$quantity","quantity","qty","value","onChange","textAlign","_ref6","_it$quantity3","handleRemove","marginLeft","color","cursor","minWidth","reduce","s","_ref8","_it$quantity5","shipping","total","clearCart","right","bottom","margin","boxShadow","_Fragment","Link","to","CartStateContext","createContext","CartDispatchContext","calculateTotals","tax","round","discount","useContext","dispatch","CART_KEY","DEFAULT_SHIPPING","parsed","JSON","parse","safeParse","k","Object","keys","error","saveCart","cartObj","stringify","normalizeItemShape","item","_item$_id","_item$id","_item$slug","_item$title2","_item$price","_item$image","_item$images","_item$quantity","pid","_item$productId","_item$title","slug","toString","slice","normalizeId","_objectSpread","name","salePrice","amount","acc","includes","cartLike","addOrIncrementItem","qtyOrDelta","cart","incoming","idx","findIndex","_ref9","_ref0","_i$productId","existing","_ref1","_ref10","_i$productId2","filter","_ref11","_ref12","_i$productId3"],"ignoreList":[],"sourceRoot":""}