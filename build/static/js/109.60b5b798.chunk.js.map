{"version":3,"file":"static/js/109.60b5b798.chunk.js","mappings":"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","sources":["shop/shopProductCard.jsx","api/axiosInstance.js","pages/ProductListPage.jsx"],"sourcesContent":["// src/shop/shopProductCard.jsx\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n/**\r\n * Robust ShopProductCard\r\n * - Safely extracts image URL from different product shapes.\r\n * - Provides sensible fallbacks.\r\n * - Avoids rendering [object Object] as image src.\r\n */\r\n\r\nfunction extractImageUrl(product) {\r\n  const pickFromObject = (obj) => {\r\n    if (!obj) return null;\r\n    if (typeof obj === \"string\") return obj;\r\n    if (typeof obj === \"object\") {\r\n      // try common keys\r\n      return obj.url || obj.src || obj.path || obj.filename || obj.secure_url || obj.location || null;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  if (!product) return null;\r\n\r\n  let url = pickFromObject(product.image) || pickFromObject(product.thumbnail) || pickFromObject(product.thumb);\r\n\r\n  if (!url && Array.isArray(product.images) && product.images.length > 0) {\r\n    for (const it of product.images) {\r\n      const u = pickFromObject(it);\r\n      if (u) {\r\n        url = u;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (!url && product.media) {\r\n    url = pickFromObject(product.media) || (Array.isArray(product.media) && pickFromObject(product.media[0]));\r\n  }\r\n\r\n  if (!url && product.imageObject && typeof product.imageObject === \"object\") {\r\n    url = pickFromObject(product.imageObject);\r\n  }\r\n\r\n  if (typeof url === \"string\") {\r\n    if (url.trim().startsWith(\"[object\")) return null;\r\n    return url;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport default function ShopProductCard({ product }) {\r\n  if (!product) return null;\r\n\r\n  const title = product.title || product.name || product.productName || product.slug || \"Untitled product\";\r\n  const price =\r\n    product.price ||\r\n    (product.variants && product.variants[0] && (product.variants[0].price || product.variants[0].mrp)) ||\r\n    (product.prices && product.prices[0]) ||\r\n    null;\r\n\r\n  const rawImage = extractImageUrl(product);\r\n\r\n  // If rawImage is a relative path without leading slash, normalize it to start with '/'\r\n  const imgSrc = rawImage\r\n    ? rawImage.startsWith(\"http\") || rawImage.startsWith(\"/\") // good\r\n      ? rawImage\r\n      : `/${rawImage}`\r\n    : \"/images/product-placeholder.png\"; // fallback placeholder (ensure this exists in /public/images or change path)\r\n\r\n  const slug = (product.slug && typeof product.slug === \"string\" && product.slug) || product._id || product.id || \"\";\r\n\r\n  return (\r\n    <article\r\n      style={{\r\n        borderRadius: 10,\r\n        background: \"#fff\",\r\n        padding: 12,\r\n        boxShadow: \"0 1px 4px rgba(0,0,0,0.04)\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        gap: 8,\r\n      }}\r\n    >\r\n      <Link to={slug ? `/product/${slug}` : \"#\"} style={{ textDecoration: \"none\", color: \"inherit\" }}>\r\n        <div style={{ width: \"100%\", paddingTop: \"100%\", position: \"relative\", overflow: \"hidden\", borderRadius: 8 }}>\r\n          <img\r\n            src={imgSrc}\r\n            alt={title}\r\n            onError={(e) => {\r\n              e.target.onerror = null;\r\n              e.target.src =\r\n                \"data:image/svg+xml;charset=UTF-8,<svg xmlns='http://www.w3.org/2000/svg' width='400' height='400'><rect width='100%' height='100%' fill='%23fafafa'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='18' fill='%23ccc'>No image</text></svg>\";\r\n            }}\r\n            style={{ position: \"absolute\", top: 0, left: 0, width: \"100%\", height: \"100%\", objectFit: \"cover\" }}\r\n          />\r\n        </div>\r\n\r\n        <div style={{ marginTop: 8 }}>\r\n          <div style={{ fontSize: 14, fontWeight: 600 }}>{title}</div>\r\n          <div style={{ fontSize: 13, color: \"#666\", marginTop: 6 }}>{price ? `₹ ${price}` : \"Price not set\"}</div>\r\n        </div>\r\n      </Link>\r\n    </article>\r\n  );\r\n}\r\n","// src/api/axiosInstance.js\r\nimport axios from \"axios\";\r\n\r\n/**\r\n * Clean & reliable axios setup:\r\n * - Uses REACT_APP_API_URL for production (Render backend)\r\n * - Falls back to localhost:4000 during development\r\n * - No domain detection, no auto-prefixing\r\n * - You control all API paths clearly\r\n */\r\n\r\nconst API_BASE =\r\n  process.env.REACT_APP_API_URL ||\r\n  (window.location.hostname === \"localhost\"\r\n    ? \"http://localhost:4000\"\r\n    : \"\");\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: API_BASE, // e.g. https://seemati-backend.onrender.com\r\n  withCredentials: true,\r\n  timeout: 15000,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n    Accept: \"application/json\",\r\n  },\r\n});\r\n\r\n// Debug logging\r\naxiosInstance.interceptors.response.use(\r\n  (res) => res,\r\n  (err) => {\r\n    if (err.response) {\r\n      console.error(\r\n        \"API error:\",\r\n        err.response.status,\r\n        err.response.data || err.response.statusText\r\n      );\r\n    } else {\r\n      console.error(\"Network error:\", err.message);\r\n    }\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nexport default axiosInstance;\r\n","// src/pages/ProductListPage.jsx\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport ShopProductCard from \"../shop/shopProductCard\";\r\nimport axios from \"../api/axiosInstance\";\r\n\r\n/**\r\n * Small helper to normalize/resolve image objects/URLs to absolute URLs\r\n * using REACT_APP_API_BASE_URL (preferred), then REACT_APP_API_URL, then\r\n * a hardcoded deployed backend fallback.\r\n */\r\nfunction resolveImageObject(i) {\r\n  const apiBase =\r\n    process.env.REACT_APP_API_BASE_URL ||\r\n    process.env.REACT_APP_API_URL ||\r\n    \"https://seemati-backend.onrender.com\";\r\n\r\n  if (!i) return null;\r\n\r\n  // If it's a string, interpret as URL or filename\r\n  if (typeof i === \"string\") {\r\n    // absolute URL: rewrite localhost host to apiBase\r\n    if (/^https?:\\/\\//i.test(i)) {\r\n      if (/https?:\\/\\/(localhost|127\\.0\\.0\\.1)/i.test(i)) {\r\n        return i.replace(/^https?:\\/\\/[^/]+/i, apiBase);\r\n      }\r\n      return i;\r\n    }\r\n    // relative path or bare filename\r\n    if (i.startsWith(\"/\")) return `${apiBase}${i}`;\r\n    return `${apiBase}/uploads/${i}`;\r\n  }\r\n\r\n  // object shape { url } or { filename }\r\n  if (i && typeof i === \"object\") {\r\n    if (i.url) {\r\n      const u = String(i.url);\r\n      if (/^https?:\\/\\//i.test(u)) {\r\n        if (/https?:\\/\\/(localhost|127\\.0\\.0\\.1)/i.test(u)) {\r\n          return u.replace(/^https?:\\/\\/[^/]+/i, apiBase);\r\n        }\r\n        return u;\r\n      }\r\n      return u.startsWith(\"/\") ? `${apiBase}${u}` : `${apiBase}/${u}`;\r\n    }\r\n    if (i.filename) {\r\n      return `${apiBase}/uploads/${i.filename}`;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport default function ProductListPage({ limit = 8 }) {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const mountedRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n    return () => {\r\n      mountedRef.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    async function load() {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const fields =\r\n          \"title,price,mrp,compareAtPrice,slug,thumbnail,images,description\";\r\n        // Request products from backend via axiosInstance — use /api/products for local proxy\r\n        const res = await axios.get(\r\n          `/api/products?page=1&limit=${encodeURIComponent(limit)}&fields=${encodeURIComponent(fields)}`\r\n        );\r\n\r\n        const data = res?.data?.products ?? res?.data ?? [];\r\n        const normalized = (Array.isArray(data) ? data : []).map((p) => {\r\n          const images = Array.isArray(p.images)\r\n            ? p.images\r\n                .map((i) => {\r\n                  if (!i) return null;\r\n                  if (typeof i === \"string\") {\r\n                    const url = resolveImageObject(i);\r\n                    return url ? { url } : null;\r\n                  }\r\n                  // object with url or filename\r\n                  if (i.url || i.filename) {\r\n                    return { url: resolveImageObject(i) };\r\n                  }\r\n                  return null;\r\n                })\r\n                .filter(Boolean)\r\n            : [];\r\n          // support thumbnail / image fields too\r\n          let thumbnail = null;\r\n          const th = p.thumbnail ?? p.image ?? null;\r\n          if (th) {\r\n            thumbnail =\r\n              typeof th === \"string\" ? resolveImageObject(th) : resolveImageObject(th);\r\n          }\r\n          return { ...p, images, thumbnail };\r\n        });\r\n\r\n        if (!mountedRef.current) return;\r\n        setProducts(normalized);\r\n      } catch (err) {\r\n        // eslint-disable-next-line no-console\r\n        console.error(\"Home product load error:\", err);\r\n        if (!mountedRef.current) return;\r\n        setError(err?.message || \"Failed to load products\");\r\n      } finally {\r\n        if (mountedRef.current) setLoading(false);\r\n      }\r\n    }\r\n\r\n    load();\r\n  }, [limit]);\r\n\r\n  return (\r\n    <div style={{ padding: 20 }}>\r\n      <h1 style={{ marginBottom: 12 }}>Products</h1>\r\n\r\n      {loading && <div>Loading featured products…</div>}\r\n      {error && (\r\n        <div style={{ color: \"crimson\" }}>Failed to load products: {error}</div>\r\n      )}\r\n\r\n      <div\r\n        style={{\r\n          display: \"grid\",\r\n          gridTemplateColumns: \"repeat(auto-fill, minmax(260px, 1fr))\",\r\n          gap: 18,\r\n          alignItems: \"start\",\r\n          marginTop: 12,\r\n        }}\r\n      >\r\n        {products.map((p) => (\r\n          <ShopProductCard key={p.slug || p._id || p.id} product={p} />\r\n        ))}\r\n      </div>\r\n\r\n      {!loading && !products.length && !error && (\r\n        <div style={{ marginTop: 12 }}>No featured products.</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ShopProductCard","_ref","product","title","name","productName","slug","price","variants","mrp","prices","rawImage","pickFromObject","obj","url","src","path","filename","secure_url","location","image","thumbnail","thumb","Array","isArray","images","length","it","u","media","imageObject","trim","startsWith","extractImageUrl","imgSrc","concat","_id","id","_jsx","style","borderRadius","background","padding","boxShadow","display","flexDirection","gap","children","_jsxs","Link","to","textDecoration","color","width","paddingTop","position","overflow","alt","onError","e","target","onerror","top","left","height","objectFit","marginTop","fontSize","fontWeight","axiosInstance","axios","create","baseURL","process","withCredentials","timeout","headers","Accept","interceptors","response","use","res","err","console","error","status","data","statusText","message","Promise","reject","resolveImageObject","i","apiBase","REACT_APP_API_BASE_URL","test","replace","String","ProductListPage","limit","products","setProducts","useState","loading","setLoading","setError","mountedRef","useRef","useEffect","current","async","_ref2","_res$data$products","_res$data","fields","get","encodeURIComponent","normalized","map","p","_ref3","_p$thumbnail","filter","Boolean","th","_objectSpread","load","marginBottom","gridTemplateColumns","alignItems"],"ignoreList":[],"sourceRoot":""}