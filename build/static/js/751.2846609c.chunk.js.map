{"version":3,"file":"static/js/751.2846609c.chunk.js","mappings":"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","sources":["api/axiosInstance.js","admin/AdminProductList.js","admin/AdminProductEdit.js","admin/ProductForm.jsx","admin/AdminAnnouncements.js","admin/AdminPage.jsx"],"sourcesContent":["// src/api/axiosInstance.js\r\nimport axios from \"axios\";\r\n\r\n/**\r\n * axiosInstance.js (FINAL FIXED VERSION)\r\n *\r\n * ✔ Uses REACT_APP_API_BASE in production (Vercel build)\r\n * ✔ Falls back to localhost:4000 ONLY in local development\r\n * ✔ Prevents double /api/api issues\r\n * ✔ Ensures credentials (cookies) work for admin login\r\n */\r\n\r\nconst API_BASE =\r\n  process.env.REACT_APP_API_BASE ||\r\n  (window.location.hostname === \"localhost\"\r\n    ? \"http://localhost:4000\"\r\n    : \"https://seemati-backend.onrender.com\"); // <-- your Render backend URL\r\n\r\nconst axiosInstance = axios.create({\r\n  baseURL: API_BASE, // DO NOT add /api here (your code already uses /api/... endpoints)\r\n  withCredentials: true,\r\n  timeout: 60000,\r\n});\r\n\r\n// Optional: helpful console debug\r\naxiosInstance.interceptors.request.use(\r\n  (config) => {\r\n    // console.log(`[API] ${config.method.toUpperCase()} ${config.baseURL}${config.url}`);\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\naxiosInstance.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    // console.warn('[API ERROR]', error?.response?.status, error?.config?.url);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default axiosInstance;\r\n","// src/admin/AdminProductList.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport axios from \"../api/axiosInstance\";\r\n\r\n/**\r\n * AdminProductList (debug-friendly full replacement)\r\n * - Tries axios relative endpoints first (respects axios.defaults.baseURL)\r\n * - Falls back to direct fetch to https://api.seemati.in/api/products\r\n * - Prints verbose console logs prefixed with [AdminProductList]\r\n * - Keeps your existing UI: Edit/Delete/Preview etc.\r\n */\r\n\r\nexport default function AdminProductList() {\r\n  const [products, setProducts] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [actionMsg, setActionMsg] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  // Direct backend fallback (bypass Vercel rewrite) — used only for debugging\r\n  const BACKEND_FALLBACK_BASE = \"https://api.seemati.in/api\";\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n\r\n    async function fetchProducts() {\r\n      console.log(\"[AdminProductList] Starting fetchProducts\");\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      // token keys to try (after OTP login)\r\n      const token =\r\n        (typeof window !== \"undefined\" && localStorage.getItem(\"token\")) ||\r\n        (typeof window !== \"undefined\" && localStorage.getItem(\"authToken\")) ||\r\n        null;\r\n      const headers = token ? { Authorization: `Bearer ${token}` } : {};\r\n\r\n      // Determine axios base to avoid double '/api'\r\n      let base = \"\";\r\n      try {\r\n        base = (axios && axios.defaults && axios.defaults.baseURL) || \"\";\r\n      } catch (e) {\r\n        base = \"\";\r\n      }\r\n      const baseHasApi = typeof base === \"string\" && /\\/api\\/?$/.test(base);\r\n      console.log(\"[AdminProductList] axios.defaults.baseURL:\", base, \"baseHasApi:\", baseHasApi);\r\n\r\n      // Candidate endpoints (relative) — we try multiple shapes to be safe\r\n      const endpoints = baseHasApi\r\n        ? [\"/products\", \"/admin/products\", \"/products?page=1&limit=200\"]\r\n        : [\"/api/products\", \"/api/admin/products\", \"/api/products?page=1&limit=200\"];\r\n\r\n      // Try each endpoint using axios (respects baseURL)\r\n      for (const ep of endpoints) {\r\n        try {\r\n          console.log(\"[AdminProductList] Trying axios GET\", ep);\r\n          const res = await axios.get(ep, { headers });\r\n          console.log(\"[AdminProductList] axios response for\", ep, \"status:\", res && res.status, \"data:\", res && res.data);\r\n          if (res && (res.status === 200 || res.data)) {\r\n            const data = res.data;\r\n            const list =\r\n              Array.isArray(data)\r\n                ? data\r\n                : Array.isArray(data?.products)\r\n                ? data.products\r\n                : Array.isArray(data?.data)\r\n                ? data.data\r\n                : [];\r\n            if (!cancelled) {\r\n              setProducts(list);\r\n              setLoading(false);\r\n              console.log(\"[AdminProductList] Products set from axios:\", list.length);\r\n            }\r\n            return;\r\n          }\r\n        } catch (err) {\r\n          console.warn(\"[AdminProductList] axios GET failed for\", ep, err && err.message ? err.message : err);\r\n          // continue to next endpoint\r\n        }\r\n      }\r\n\r\n      // Fallback: try direct fetch to backend domain (bypasses Vercel rewrite; helpful to detect rewrite/CORS issues)\r\n      try {\r\n        const url = `${BACKEND_FALLBACK_BASE}/products`;\r\n        console.log(\"[AdminProductList] Attempting fallback fetch to\", url);\r\n        const resp = await fetch(url, {\r\n          method: \"GET\",\r\n          credentials: \"include\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            ...headers,\r\n          },\r\n        });\r\n        console.log(\"[AdminProductList] fallback fetch status:\", resp.status, resp.statusText);\r\n        if (!resp.ok) {\r\n          const txt = await resp.text().catch(() => null);\r\n          throw new Error(`Fallback fetch failed: ${resp.status} ${txt || resp.statusText}`);\r\n        }\r\n        const json = await resp.json().catch((e) => {\r\n          throw new Error(\"Fallback fetch JSON parse failed: \" + (e && e.message));\r\n        });\r\n        console.log(\"[AdminProductList] fallback fetch json:\", json);\r\n        const list =\r\n          Array.isArray(json)\r\n            ? json\r\n            : Array.isArray(json?.products)\r\n            ? json.products\r\n            : Array.isArray(json?.data)\r\n            ? json.data\r\n            : [];\r\n        if (!cancelled) {\r\n          setProducts(list);\r\n          setLoading(false);\r\n          console.log(\"[AdminProductList] Products set from fallback fetch:\", list.length);\r\n        }\r\n        return;\r\n      } catch (fbErr) {\r\n        console.error(\"[AdminProductList] fallback fetch failed:\", fbErr && fbErr.message ? fbErr.message : fbErr);\r\n        if (!cancelled) {\r\n          setError(fbErr && fbErr.message ? fbErr.message : \"Unable to load products\");\r\n          setLoading(false);\r\n        }\r\n      }\r\n    }\r\n\r\n    fetchProducts();\r\n\r\n    return () => {\r\n      cancelled = true;\r\n    };\r\n  }, []);\r\n\r\n  // Helpers (kept from your previous file)\r\n  function pickThumbnail(p) {\r\n    if (!p) return null;\r\n    if (p.thumbnail) return p.thumbnail;\r\n    if (p.image) return p.image;\r\n    if (p.images && p.images.length) {\r\n      const first = p.images[0];\r\n      if (!first) return null;\r\n      if (typeof first === \"string\") return first;\r\n      return first.url || first.path || first.src || null;\r\n    }\r\n    return null;\r\n  }\r\n  function pickStock(p) {\r\n    return p?.stock ?? p?.qty ?? p?.inventory ?? p?.quantity ?? p?.available ?? \"-\";\r\n  }\r\n\r\n  // delete with optimistic UI (kept)\r\n  async function handleDelete(id) {\r\n    const ok = window.confirm(\"Delete this product? This action cannot be undone.\");\r\n    if (!ok) return;\r\n    const prev = products || [];\r\n    setProducts(prev.filter((x) => (x._id || x.id) !== id));\r\n    setActionMsg(\"Deleting...\");\r\n    try {\r\n      const possible = [`/api/products/${id}`, `/api/admin/products/${id}`, `/products/${id}`, `/admin/products/${id}`];\r\n      let deleted = false;\r\n      for (const ep of possible) {\r\n        try {\r\n          const r = await axios.delete(ep);\r\n          if (r && (r.status === 200 || r.status === 204 || (r.data && r.data.success))) {\r\n            deleted = true;\r\n            break;\r\n          }\r\n        } catch (err) {\r\n          console.warn(\"[AdminProductList] delete attempt failed for\", ep, err && err.message);\r\n        }\r\n      }\r\n      if (!deleted) {\r\n        const resp = await fetch(`/api/products/${id}`, { method: \"DELETE\", credentials: \"include\" });\r\n        if (!resp.ok) throw new Error(`Delete failed ${resp.status}`);\r\n      }\r\n      setActionMsg(\"Deleted\");\r\n      setTimeout(() => setActionMsg(\"\"), 1200);\r\n      console.log(\"[AdminProductList] Deleted product\", id);\r\n    } catch (err) {\r\n      setActionMsg(`Delete failed: ${err?.message || \"unknown\"}`);\r\n      setProducts(prev);\r\n      setTimeout(() => setActionMsg(\"\"), 2500);\r\n      console.error(\"[AdminProductList] delete error:\", err);\r\n    }\r\n  }\r\n\r\n  // Render states\r\n  if (loading) {\r\n    return (\r\n      <div style={{ padding: 20 }}>\r\n        <h2>Admin — Products</h2>\r\n        <p>Loading products… (open DevTools → Console to see [AdminProductList] logs)</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{ padding: 20 }}>\r\n        <h2>Admin — Products</h2>\r\n        <div style={{ color: \"crimson\" }}>Error loading products: {String(error)}</div>\r\n        <div style={{ marginTop: 10 }}>\r\n          <button onClick={() => window.location.reload()}>Retry</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!products || products.length === 0) {\r\n    return (\r\n      <div style={{ padding: 20 }}>\r\n        <h2>Admin — Products</h2>\r\n        <p>No products returned from API.</p>\r\n        <p>\r\n          <Link to=\"/admin/products/new\">\r\n            <button>+ Add product</button>\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: 20 }}>\r\n      <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n        <h2 style={{ margin: 0 }}>Admin — Products ({products.length})</h2>\r\n        <div style={{ display: \"flex\", gap: 8 }}>\r\n          <Link to=\"/admin/products/new\">\r\n            <button style={{ padding: \"8px 12px\" }}>+ Add product</button>\r\n          </Link>\r\n          <button onClick={() => window.location.reload()}>Refresh</button>\r\n        </div>\r\n      </div>\r\n\r\n      {actionMsg && <div style={{ marginTop: 12 }}>{actionMsg}</div>}\r\n\r\n      <div style={{ overflowX: \"auto\", marginTop: 16 }}>\r\n        <table style={{ width: \"100%\", borderCollapse: \"collapse\", minWidth: 900 }}>\r\n          <thead>\r\n            <tr style={{ borderBottom: \"2px solid #eee\", textAlign: \"left\" }}>\r\n              <th style={{ padding: 10 }}>#</th>\r\n              <th style={{ padding: 10 }}>SKU</th>\r\n              <th style={{ padding: 10 }}>Thumbnail</th>\r\n              <th style={{ padding: 10 }}>Name / Slug</th>\r\n              <th style={{ padding: 10 }}>Category</th>\r\n              <th style={{ padding: 10 }}>Price</th>\r\n              <th style={{ padding: 10 }}>Stock</th>\r\n              <th style={{ padding: 10 }}>Published</th>\r\n              <th style={{ padding: 10 }}>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {products.map((p, idx) => {\r\n              const id = p._id || p.id || p.slug || idx;\r\n              const thumb = pickThumbnail(p);\r\n              return (\r\n                <tr key={id} style={{ borderBottom: \"1px solid #f3f3f3\" }}>\r\n                  <td style={{ padding: 10 }}>{idx + 1}</td>\r\n                  <td style={{ padding: 10, width: 120 }}>{p.sku || p.code || \"-\"}</td>\r\n                  <td style={{ padding: 10, width: 94 }}>\r\n                    {thumb ? (\r\n                      <img\r\n                        src={thumb}\r\n                        alt={p.title || p.name}\r\n                        style={{ width: 64, height: 64, objectFit: \"cover\", borderRadius: 6 }}\r\n                        onError={(e) => (e.currentTarget.style.display = \"none\")}\r\n                      />\r\n                    ) : (\r\n                      <div\r\n                        style={{\r\n                          width: 64,\r\n                          height: 64,\r\n                          borderRadius: 6,\r\n                          background: \"#fafafa\",\r\n                          display: \"flex\",\r\n                          alignItems: \"center\",\r\n                          justifyContent: \"center\",\r\n                          color: \"#999\",\r\n                          fontSize: 12,\r\n                        }}\r\n                      >\r\n                        no image\r\n                      </div>\r\n                    )}\r\n                  </td>\r\n                  <td style={{ padding: 10, minWidth: 220 }}>\r\n                    <div style={{ fontWeight: 700 }}>{p.title || p.name || \"-\"}</div>\r\n                    <div style={{ color: \"#666\", fontSize: 13 }}>{p.slug || \"-\"}</div>\r\n                  </td>\r\n                  <td style={{ padding: 10 }}>{p.category || p.cat || \"-\"}</td>\r\n                  <td style={{ padding: 10 }}>{p.price ?? p.mrp ?? \"-\"}</td>\r\n                  <td style={{ padding: 10 }}>{pickStock(p)}</td>\r\n                  <td style={{ padding: 10 }}>{p.published ? \"Yes\" : \"No\"}</td>\r\n                  <td style={{ padding: 10 }}>\r\n                    <div style={{ display: \"flex\", gap: 8 }}>\r\n                      <Link to={`/admin/products/${id}`}>\r\n                        <button style={{ padding: \"6px 10px\" }}>Edit</button>\r\n                      </Link>\r\n                      <button onClick={() => handleDelete(id)} style={{ padding: \"6px 10px\" }}>\r\n                        Delete\r\n                      </button>\r\n                      <button\r\n                        onClick={() => {\r\n                          const slug = p.slug || p._id || p.id;\r\n                          if (slug) window.open(`/product/${slug}`, \"_blank\");\r\n                          else alert(\"No slug available\");\r\n                        }}\r\n                        style={{ padding: \"6px 10px\" }}\r\n                      >\r\n                        Preview\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/admin/AdminProductEdit.js\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axiosInstance from '../api/axiosInstance';\r\n\r\n/*\r\n Full replacement preserving your features:\r\n - color picker, video preview, auto-slug, auto-sku, images upload, keepMap, etc.\r\n - Adds fallback for GET product\r\n - On upload, tries multiple candidate endpoints (PUT/POST) until one accepts the files\r\n - On save, tries multiple candidate update endpoints until one succeeds\r\n*/\r\n\r\nconst NAMED_COLORS = {\r\n  white: '#FFFFFF', silver: '#C0C0C0', gray: '#808080', black: '#000000',\r\n  red: '#FF0000', maroon: '#800000', yellow: '#FFFF00', olive: '#808000',\r\n  lime: '#00FF00', green: '#008000', aqua: '#00FFFF', teal: '#008080',\r\n  blue: '#0000FF', navy: '#000080', fuchsia: '#FF00FF', purple: '#800080',\r\n  pink: '#FFC0CB', brown: '#A52A2A', orange: '#FFA500', gold: '#FFD700',\r\n  peach: '#FFDAB9', mustard: '#FFDB58', coral: '#FF7F50'\r\n};\r\n\r\nfunction hexToRgb(hex) {\r\n  if (!hex) return { r: 0, g: 0, b: 0 };\r\n  const clean = hex.replace('#', '').trim();\r\n  if (clean.length === 3) {\r\n    return {\r\n      r: parseInt(clean[0] + clean[0], 16),\r\n      g: parseInt(clean[1] + clean[1], 16),\r\n      b: parseInt(clean[2] + clean[2], 16)\r\n    };\r\n  }\r\n  return {\r\n    r: parseInt(clean.substring(0, 2), 16),\r\n    g: parseInt(clean.substring(2, 4), 16),\r\n    b: parseInt(clean.substring(4, 6), 16)\r\n  };\r\n}\r\nfunction nearestColorName(hex) {\r\n  try {\r\n    const src = hexToRgb(hex);\r\n    let best = null;\r\n    let bestDist = Infinity;\r\n    Object.entries(NAMED_COLORS).forEach(([name, h]) => {\r\n      const t = hexToRgb(h);\r\n      const dx = src.r - t.r, dy = src.g - t.g, dz = src.b - t.b;\r\n      const dist = dx * dx + dy * dy + dz * dz;\r\n      if (dist < bestDist) { bestDist = dist; best = name; }\r\n    });\r\n    return best || '';\r\n  } catch { return ''; }\r\n}\r\n\r\nfunction makeSlug(text) {\r\n  if (!text) return \"\";\r\n  return String(text)\r\n    .toLowerCase()\r\n    .trim()\r\n    .replace(/['\"]/g, \"\")\r\n    .replace(/[^a-z0-9]+/g, \"-\")\r\n    .replace(/^-+|-+$/g, \"\")\r\n    .replace(/-+/g, \"-\");\r\n}\r\n\r\nfunction sanitizeAlnum(s = \"\") {\r\n  return String(s || \"\").replace(/[^a-z0-9]/gi, \"\").toUpperCase();\r\n}\r\nfunction generateSku({ brand, category, title }) {\r\n  const b = sanitizeAlnum(brand || \"\");\r\n  const c = sanitizeAlnum(category || \"\");\r\n  let prefix = \"KPL\";\r\n  if (b && c) {\r\n    const pb = b.slice(0, 3);\r\n    const pc = c.slice(0, 3);\r\n    prefix = `${pb}-${pc}`;\r\n  } else if (b) {\r\n    prefix = `${b.slice(0, 3)}`;\r\n  } else if (c) {\r\n    prefix = `${c.slice(0, 3)}`;\r\n  } else if (title) {\r\n    prefix = sanitizeAlnum(title).slice(0, 3) || \"KPL\";\r\n  }\r\n  const counter = String(Math.abs(Date.now()) % 1000).padStart(3, \"0\");\r\n  return `${prefix}-${counter}`;\r\n}\r\n\r\nexport default function AdminProductEdit() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const fileInputRef = useRef(null);\r\n  const colorPickerRef = useRef(null);\r\n  const [colorPickerIndex, setColorPickerIndex] = useState(null);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [product, setProduct] = useState({\r\n    title: '', slug: '', price: '', mrp: '', stock: '', sku: '',\r\n    brand: '', category: '', videoUrl: '', colors: '', sizes: '',\r\n    description: '', isPublished: false\r\n  });\r\n\r\n  const [slugEdited, setSlugEdited] = useState(false);\r\n  const [skuEdited, setSkuEdited] = useState(false);\r\n\r\n  const [existingImages, setExistingImages] = useState([]);\r\n  const [keepMap, setKeepMap] = useState({});\r\n  const [selectedFiles, setSelectedFiles] = useState([]);\r\n  const [swatches, setSwatches] = useState([]);\r\n\r\n  const parseColorsInputToArray = (text) => {\r\n    if (!text) return [];\r\n    return text.split(',').map(s => s.trim()).filter(Boolean);\r\n  };\r\n  const normalizeToHexIfPossible = (col) => {\r\n    if (!col) return '';\r\n    const t = col.trim();\r\n    if (/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/.test(t)) {\r\n      const clean = t.replace('#', '');\r\n      const full = clean.length === 3 ? clean[0]+clean[0]+clean[1]+clean[1]+clean[2]+clean[2] : clean;\r\n      return `#${full.toUpperCase()}`;\r\n    }\r\n    const lower = t.toLowerCase();\r\n    if (NAMED_COLORS[lower]) return NAMED_COLORS[lower].toUpperCase();\r\n    return t;\r\n  };\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    if (!id) {\r\n      setLoading(false);\r\n      setExistingImages([]);\r\n      setKeepMap({});\r\n      setSwatches([]);\r\n      setProduct(prev => {\r\n        const seeded = { ...prev };\r\n        if (!seeded.slug && seeded.title) seeded.slug = makeSlug(seeded.title);\r\n        if (!seeded.sku) seeded.sku = generateSku({ brand: seeded.brand, category: seeded.category, title: seeded.title });\r\n        return seeded;\r\n      });\r\n      return () => { cancelled = true; };\r\n    }\r\n\r\n    async function load() {\r\n      try {\r\n        setLoading(true);\r\n        try {\r\n          const resp = await axiosInstance.get(`/api/products/${id}`);\r\n          if (resp && resp.data) {\r\n            const p = resp.data.product || (resp.data.success && resp.data.products && resp.data.products[0]) || resp.data;\r\n            if (p && typeof p === 'object') {\r\n              populateFromProduct(p);\r\n              setLoading(false);\r\n              return;\r\n            }\r\n          }\r\n        } catch (err) {\r\n          console.warn('Direct GET failed, falling back to list', err && err.response ? err.response.status : err.message);\r\n        }\r\n\r\n        try {\r\n          const listResp = await axiosInstance.get('/api/products');\r\n          const products = (listResp && listResp.data && (listResp.data.products || listResp.data)) || [];\r\n          if (Array.isArray(products) && products.length) {\r\n            let found = products.find(p => String(p._id) === String(id));\r\n            if (!found) found = products.find(p => p.slug === id || String(p.slug) === String(id));\r\n            if (found) { populateFromProduct(found); setLoading(false); return; }\r\n          }\r\n          alert('Product not found on server.');\r\n        } catch (err) {\r\n          console.error('Products list fallback failed', err);\r\n          alert('Failed to load product list fallback. See console.');\r\n        }\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    }\r\n\r\n    function populateFromProduct(p) {\r\n      setProduct({\r\n        title: p.title || '', slug: p.slug || '', price: p.price || '', mrp: p.mrp || '',\r\n        stock: p.stock || '', sku: p.sku || '', brand: p.brand || '', category: p.category || '',\r\n        videoUrl: p.videoUrl || '', colors: Array.isArray(p.colors) ? p.colors.join(', ') : (p.colors || ''),\r\n        sizes: Array.isArray(p.sizes) ? p.sizes.join(', ') : (p.sizes || ''), description: p.description || '',\r\n        isPublished: !!p.isPublished\r\n      });\r\n      if (p.slug) setSlugEdited(true);\r\n      if (p.sku) setSkuEdited(true);\r\n      const imgs = Array.isArray(p.images) ? p.images.map(it => (typeof it === 'string' ? it : (it.url || it))) : [];\r\n      setExistingImages(imgs);\r\n      const map = {}; imgs.forEach(url => (map[url] = true)); setKeepMap(map);\r\n      const parsed = Array.isArray(p.colors) ? p.colors : (p.colors ? p.colors.split(',').map(s => s.trim()) : []);\r\n      const normalized = parsed.map((c) => normalizeToHexIfPossible(c));\r\n      setSwatches(normalized);\r\n    }\r\n\r\n    load();\r\n    return () => { cancelled = true; selectedFiles.forEach(s => s.previewUrl && URL.revokeObjectURL(s.previewUrl)); };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    const mapped = swatches.map((s) => {\r\n      if (!s) return '';\r\n      const found = Object.entries(NAMED_COLORS).find(([, v]) => v.toUpperCase() === s.toUpperCase());\r\n      if (found) return found[0].toUpperCase();\r\n      return s;\r\n    }).filter(Boolean).join(', ');\r\n    setProduct(prev => ({ ...prev, colors: mapped }));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [swatches]);\r\n\r\n  useEffect(() => {\r\n    if (!slugEdited) {\r\n      setProduct(prev => ({ ...prev, slug: makeSlug(prev.title || \"\") }));\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [product.title, slugEdited]);\r\n\r\n  useEffect(() => {\r\n    if (!skuEdited) {\r\n      const s = generateSku({ brand: product.brand, category: product.category, title: product.title });\r\n      setProduct(prev => ({ ...prev, sku: s }));\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [product.brand, product.category, product.title, skuEdited]);\r\n\r\n  function handleChange(e) {\r\n    const { name, value, checked } = e.target;\r\n    if (name === 'isPublished') setProduct(prev => ({ ...prev, isPublished: !!checked }));\r\n    else {\r\n      if (name === 'slug') setSlugEdited(true);\r\n      if (name === 'sku') setSkuEdited(true);\r\n      setProduct(prev => ({ ...prev, [name]: value }));\r\n      if (name === 'colors') {\r\n        const arr = parseColorsInputToArray(value).map(c => normalizeToHexIfPossible(c));\r\n        setSwatches(arr);\r\n      }\r\n    }\r\n  }\r\n\r\n  function onFilesSelected(e) {\r\n    const files = Array.from(e.target.files || []);\r\n    if (!files.length) return;\r\n    const newSelected = files.map(f => ({ file: f, previewUrl: URL.createObjectURL(f) }));\r\n    setSelectedFiles(prev => [...prev, ...newSelected]);\r\n    if (fileInputRef.current) fileInputRef.current.value = '';\r\n  }\r\n  function removeSelectedPreview(index) {\r\n    setSelectedFiles(prev => {\r\n      const copy = [...prev];\r\n      const removed = copy.splice(index, 1)[0];\r\n      if (removed && removed.previewUrl) URL.revokeObjectURL(removed.previewUrl);\r\n      return copy;\r\n    });\r\n  }\r\n  function toggleKeep(url) { setKeepMap(prev => ({ ...prev, [url]: !prev[url] })); }\r\n\r\n  function handleGenerateSku() {\r\n    const newSku = generateSku({ brand: product.brand, category: product.category, title: product.title });\r\n    setProduct(prev => ({ ...prev, sku: newSku }));\r\n    setSkuEdited(true);\r\n  }\r\n\r\n  // --- Robust uploadFilesToProduct: tries multiple candidate endpoints for uploading files ---\r\n   // --- Upload files for this product: always hit the S3-enabled upload route ---\r\n   // --- Robust uploadFilesToProduct: tries multiple candidate endpoints for uploading files ---\r\n  async function uploadFilesToProduct(pId) {\r\n  if (!selectedFiles.length) return [];\r\n  if (!pId) throw new Error(\"Missing product id for upload\");\r\n\r\n  const formData = new FormData();\r\n  selectedFiles.forEach(s => formData.append(\"images\", s.file));\r\n\r\n  // ---- FINAL, CORRECT ENDPOINTS ----\r\n  const candidates = [\r\n    { method: \"put\",  url: `/api/uploadRoutes/${pId}/upload` },\r\n    { method: \"post\", url: `/api/uploadRoutes/upload` }\r\n  ];\r\n\r\n  let lastErr = null;\r\n\r\n  for (const c of candidates) {\r\n    try {\r\n      let resp;\r\n      if (c.method === \"put\") {\r\n        resp = await axiosInstance.put(c.url, formData, {\r\n          headers: { \"Content-Type\": \"multipart/form-data\" }\r\n        });\r\n      } else {\r\n        resp = await axiosInstance.post(c.url, formData, {\r\n          headers: { \"Content-Type\": \"multipart/form-data\" }\r\n        });\r\n      }\r\n\r\n      const data = resp.data || {};\r\n      const array =\r\n        (Array.isArray(data.uploaded) && data.uploaded) ||\r\n        (data.url ? [{ url: data.url }] : []);\r\n\r\n      return array.map(f => f.url);\r\n    } catch (err) {\r\n      lastErr = err;\r\n      console.warn(`UPLOAD FAIL @ ${c.url}`, err?.response?.status);\r\n    }\r\n  }\r\n\r\n  throw new Error(\r\n    lastErr?.response?.data?.error ||\r\n      lastErr?.message ||\r\n      \"Upload failed\"\r\n  );\r\n}\r\n\r\n\r\n  async function createMinimalProduct(body) {\r\n    const payload = {\r\n      title: body.title || 'Untitled product',\r\n      slug: body.slug || '',\r\n      price: Number(body.price) || 0,\r\n      mrp: Number(body.mrp) || 0,\r\n      stock: Number(body.stock) || 0,\r\n      sku: body.sku || '',\r\n      brand: body.brand || '',\r\n      category: body.category || '',\r\n      videoUrl: body.videoUrl || '',\r\n      description: body.description || '',\r\n      isPublished: !!body.isPublished,\r\n      colors: body.colors || [],\r\n      sizes: body.sizes || [],\r\n      images: []\r\n    };\r\n    const res = await axiosInstance.post('/api/products', payload);\r\n    const created = res && res.data ? (res.data.product || res.data) : null;\r\n    if (!created) throw new Error('Create product failed: no product returned');\r\n    return created;\r\n  }\r\n\r\n  async function handleSave(e) {\r\n    e.preventDefault();\r\n    setSaving(true);\r\n\r\n    try {\r\n      const bodyForProduct = {\r\n        title: product.title,\r\n        slug: product.slug,\r\n        price: Number(product.price) || 0,\r\n        mrp: Number(product.mrp) || 0,\r\n        stock: Number(product.stock) || 0,\r\n        sku: product.sku,\r\n        brand: product.brand,\r\n        category: product.category,\r\n        videoUrl: product.videoUrl,\r\n        description: product.description,\r\n        isPublished: !!product.isPublished,\r\n        colors: swatches.map(s => s),\r\n        sizes: product.sizes ? product.sizes.split(',').map(s => s.trim()).filter(Boolean) : []\r\n      };\r\n\r\n      let targetId = id;\r\n\r\n      if (!targetId) {\r\n        if (!bodyForProduct.slug) bodyForProduct.slug = makeSlug(bodyForProduct.title || \"\");\r\n        if (!bodyForProduct.sku) bodyForProduct.sku = generateSku({ brand: bodyForProduct.brand, category: bodyForProduct.category, title: bodyForProduct.title });\r\n        const created = await createMinimalProduct(bodyForProduct);\r\n        targetId = created._id || created.id || (created._id && created._id.toString());\r\n        if (!targetId) throw new Error('Could not obtain new product id from create response');\r\n        setProduct(prev => ({ ...prev, slug: created.slug || prev.slug, sku: created.sku || prev.sku }));\r\n      }\r\n\r\n      // Try upload first if files selected\r\n      let uploadedUrls = [];\r\n      if (selectedFiles.length) {\r\n        try {\r\n          uploadedUrls = await uploadFilesToProduct(targetId);\r\n        } catch (err) {\r\n          console.error('Upload request failed', err);\r\n          throw new Error('Upload request failed: ' + (err.message || err));\r\n        }\r\n      }\r\n\r\n      const kept = existingImages.filter(u => keepMap[u]);\r\n      const finalImages = [...kept];\r\n      uploadedUrls.forEach(u => { if (!finalImages.includes(u)) finalImages.push(u); });\r\n\r\n      const finalBody = { ...bodyForProduct, images: finalImages };\r\n\r\n      const triedUrls = [\r\n        { url: `/api/products/${targetId}`, desc: 'public' },\r\n        { url: `/api/admin/product/${targetId}`, desc: 'admin (api/admin/product)' },\r\n        { url: `/api/admin/products/${targetId}`, desc: 'admin (api/admin/products)' },\r\n        { url: `/api/adminProduct/products/${targetId}`, desc: 'adminProduct (api/adminProduct/products)' }\r\n      ];\r\n\r\n      let savedResp = null;\r\n      let lastErr = null;\r\n      for (const t of triedUrls) {\r\n        try {\r\n          const resp = await axiosInstance.put(t.url, finalBody);\r\n          if (resp && resp.status >= 200 && resp.status < 300) {\r\n            savedResp = resp;\r\n            break;\r\n          }\r\n        } catch (err) {\r\n          lastErr = err;\r\n          console.warn(`[save] PUT ${t.url} failed`, err && err.response && err.response.status ? err.response.status : err.message);\r\n        }\r\n      }\r\n\r\n      if (!savedResp) {\r\n        console.error('All update attempts failed', lastErr);\r\n        const msg = lastErr && lastErr.response && lastErr.response.data && lastErr.response.data.message\r\n          ? lastErr.response.data.message\r\n          : (lastErr && lastErr.message) || 'Save failed on all attempted update endpoints';\r\n        throw new Error(msg);\r\n      }\r\n\r\n      selectedFiles.forEach(s => s.previewUrl && URL.revokeObjectURL(s.previewUrl));\r\n      setSelectedFiles([]);\r\n      const updatedProduct = savedResp.data.product || savedResp.data;\r\n      const imgs = Array.isArray(updatedProduct.images) ? updatedProduct.images.map(it => (typeof it === 'string' ? it : (it.url || it))) : [];\r\n      setExistingImages(imgs);\r\n      const map = {}; imgs.forEach(u => (map[u] = true)); setKeepMap(map);\r\n      alert(!id ? 'Product created and saved.' : 'Product updated.');\r\n      if (!id && targetId) navigate(`/admin/products/${targetId}/edit`);\r\n    } catch (err) {\r\n      console.error('Save error', err);\r\n      const msg = (err && err.response && err.response.data && (err.response.data.message || JSON.stringify(err.response.data))) || (err && err.message) || 'Save failed';\r\n      alert(msg);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }\r\n\r\n  function openColorPickerAtIndex(idx) {\r\n    setColorPickerIndex(idx);\r\n    if (colorPickerRef.current) {\r\n      const cur = swatches[idx] || '#FFFFFF';\r\n      const normalized = normalizeToHexIfPossible(cur) || '#FFFFFF';\r\n      colorPickerRef.current.value = normalized;\r\n      colorPickerRef.current.click();\r\n    }\r\n  }\r\n  function onColorPickerChange(e) {\r\n    const val = e.target.value;\r\n    const idx = colorPickerIndex;\r\n    setColorPickerIndex(null);\r\n    if (idx == null) return;\r\n    setSwatches(prev => { const copy = [...prev]; copy[idx] = val.toUpperCase(); return copy; });\r\n  }\r\n  function addSwatch() { setSwatches(prev => [...prev, '#FFFFFF']); }\r\n  function removeSwatch(i) { setSwatches(prev => prev.filter((_, idx) => idx !== i)); }\r\n\r\n  function getYouTubeEmbedUrl(raw) {\r\n    if (!raw) return null;\r\n    try {\r\n      const u = raw.trim();\r\n      const vMatch = u.match(/[?&]v=([^&]+)/);\r\n      if (vMatch) return `https://www.youtube.com/embed/${vMatch[1]}`;\r\n      const short = u.match(/youtu\\.be\\/([^?&]+)/);\r\n      if (short) return `https://www.youtube.com/embed/${short[1]}`;\r\n      if (u.includes('youtube.com/embed/')) return u;\r\n      return null;\r\n    } catch { return null; }\r\n  }\r\n\r\n  if (loading) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div style={{ display: 'flex', gap: 40, padding: 12 }}>\r\n      <form onSubmit={handleSave} style={{ width: '40%' }}>\r\n        <div style={{ marginBottom: 10 }}>\r\n          <button type=\"button\" onClick={() => navigate('/admin/products')}>Back to products</button>\r\n        </div>\r\n\r\n        <div><label>Title</label><br />\r\n          <input name=\"title\" value={product.title} onChange={handleChange} style={{ width: '100%' }} /></div>\r\n\r\n        <div><label>Slug</label><br />\r\n          <input\r\n            name=\"slug\"\r\n            value={product.slug}\r\n            onChange={(e) => { handleChange(e); setSlugEdited(true); }}\r\n            style={{ width: '100%' }} /></div>\r\n\r\n        <div><label>Price</label><br />\r\n          <input name=\"price\" value={product.price} onChange={handleChange} style={{ width: '100%' }} /></div>\r\n\r\n        <div><label>MRP</label><br />\r\n          <input name=\"mrp\" value={product.mrp} onChange={handleChange} style={{ width: '100%' }} /></div>\r\n\r\n        <div><label>Stock</label><br />\r\n          <input name=\"stock\" value={product.stock} onChange={handleChange} style={{ width: '100%' }} /></div>\r\n\r\n        <div><label>SKU</label><br />\r\n          <div style={{ display: 'flex', gap: 8, alignItems: 'center' }}>\r\n            <input\r\n              name=\"sku\"\r\n              value={product.sku}\r\n              onChange={(e) => { handleChange(e); setSkuEdited(true); }}\r\n              style={{ width: '100%' }} />\r\n            <button type=\"button\" onClick={handleGenerateSku}>Generate SKU</button>\r\n          </div>\r\n          <div style={{ fontSize: 12, color: '#555', marginTop: 6 }}>\r\n            Format: BRAND-CTG-XXX or fallback KPL-XXX (XXX = 3-digit counter)\r\n          </div>\r\n        </div>\r\n\r\n        <div><label>Brand</label><br />\r\n          <input name=\"brand\" value={product.brand} onChange={handleChange} style={{ width: '100%' }} /></div>\r\n\r\n        <div><label>Category</label><br />\r\n          <input name=\"category\" value={product.category} onChange={handleChange} style={{ width: '100%' }} /></div>\r\n\r\n        <div><label>Video URL (YouTube)</label><br />\r\n          <input name=\"videoUrl\" value={product.videoUrl} onChange={handleChange} style={{ width: '100%' }} />\r\n          <div style={{ fontSize: 12, marginTop: 6, color: '#555' }}>\r\n            Paste YouTube link (example: https://youtu.be/VIDEOID or https://www.youtube.com/watch?v=VIDEOID)\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <label>Colors (comma-separated)</label><br />\r\n          <input name=\"colors\" value={product.colors} onChange={handleChange} style={{ width: '100%' }} />\r\n          <div style={{ display: 'flex', gap: 12, flexWrap: 'wrap', marginTop: 10, alignItems: 'center' }}>\r\n            {swatches.map((c, i) => {\r\n              const isHex = /^#([0-9A-F]{6})$/i.test(String(c).trim());\r\n              const bg = isHex ? c : '#EEE';\r\n              const suggestedName = isHex ? nearestColorName(c) : (String(c) || '');\r\n              return (\r\n                <div key={i} style={{ textAlign: 'center' }}>\r\n                  <div title={String(c)} onClick={() => openColorPickerAtIndex(i)}\r\n                    style={{ width: 48, height: 48, borderRadius: 6, border: '1px solid #ccc', boxShadow: '0 1px 6px rgba(0,0,0,0.12)', background: bg, cursor: 'pointer' }} />\r\n                  <div style={{ fontSize: 12, marginTop: 6, maxWidth: 80, wordBreak: 'break-word' }}>{suggestedName || String(c).slice(0, 12)}</div>\r\n                  <div style={{ marginTop: 6 }}><button type=\"button\" onClick={() => removeSwatch(i)}>Remove</button></div>\r\n                </div>\r\n              );\r\n            })}\r\n            <div><button type=\"button\" onClick={addSwatch}>+ Add color</button></div>\r\n            <input ref={colorPickerRef} type=\"color\" style={{ display: 'none' }} onChange={onColorPickerChange} aria-hidden=\"true\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{ marginTop: 12 }}>\r\n          <label>Sizes (comma-separated)</label><br />\r\n          <input name=\"sizes\" value={product.sizes} onChange={handleChange} style={{ width: '100%' }} />\r\n        </div>\r\n\r\n        <div><label>Description</label><br />\r\n          <textarea name=\"description\" value={product.description} onChange={handleChange} rows={6} style={{ width: '100%' }} /></div>\r\n\r\n        <div>\r\n          <label><input name=\"isPublished\" type=\"checkbox\" checked={product.isPublished} onChange={handleChange} /> Published</label>\r\n        </div>\r\n\r\n        <div style={{ marginTop: 8 }}>\r\n          <button type=\"submit\" disabled={saving}>{saving ? 'Saving...' : (!id ? 'Create product' : 'Save')}</button>\r\n          <button type=\"button\" onClick={() => navigate('/admin/products')}>Cancel</button>\r\n        </div>\r\n      </form>\r\n\r\n      <div style={{ width: '50%' }}>\r\n        <h3>Existing Images</h3>\r\n        <div style={{ display: 'flex', gap: 12, flexWrap: 'wrap' }}>\r\n          {existingImages.map((url, idx) => (\r\n            <div key={url} style={{ textAlign: 'center', width: 120 }}>\r\n              <img src={url} alt={`img-${idx}`} style={{ width: 100, height: 100, objectFit: 'cover' }} />\r\n              <div><label><input type=\"checkbox\" checked={!!keepMap[url]} onChange={() => toggleKeep(url)} /> Keep</label></div>\r\n              <div><button type=\"button\" onClick={() => { setKeepMap(prev => ({ ...prev, [url]: false })); }}>Remove</button></div>\r\n            </div>\r\n          ))}\r\n          {existingImages.length === 0 && <div>No existing images</div>}\r\n        </div>\r\n\r\n        <h3 style={{ marginTop: 16 }}>Add Images</h3>\r\n        <input ref={fileInputRef} type=\"file\" multiple onChange={onFilesSelected} />\r\n        <div style={{ marginTop: 8, display: 'flex', gap: 12, flexWrap: 'wrap' }}>\r\n          {selectedFiles.map((s, i) => (\r\n            <div key={s.previewUrl + i} style={{ textAlign: 'center', width: 120 }}>\r\n              <img src={s.previewUrl} alt={`preview-${i}`} style={{ width: 100, height: 100, objectFit: 'cover' }} />\r\n              <div><button type=\"button\" onClick={() => removeSelectedPreview(i)}>Remove</button></div>\r\n            </div>\r\n          ))}\r\n          {selectedFiles.length === 0 && <div>No files chosen</div>}\r\n        </div>\r\n\r\n        <div style={{ marginTop: 20 }}>\r\n          <h4>Video preview</h4>\r\n          {product.videoUrl ? (() => {\r\n            const embed = getYouTubeEmbedUrl(product.videoUrl);\r\n            if (embed) {\r\n              return <div style={{ width: '100%', height: 250 }}><iframe title=\"video-preview\" src={embed} style={{ width: '100%', height: '100%', border: 'none' }} allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen /></div>;\r\n            }\r\n            return <div>Unsupported video URL (currently only YouTube links are previewed).</div>;\r\n          })() : (<div>No video URL provided</div>)}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/admin/ProductForm.js\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\n/*\r\n  ProductForm replacement\r\n  - Controlled form component that returns (values, files) to onSave\r\n  - Does not perform upload by itself (caller handles upload)\r\n  - Accepts `initial` prop and `saving` boolean\r\n*/\r\n\r\nexport default function ProductForm({ initial = {}, onSave, saving = false }) {\r\n  const [title, setTitle] = useState(initial.title || \"\");\r\n  const [description, setDescription] = useState(initial.description || \"\");\r\n  const [price, setPrice] = useState(initial.price ?? \"\");\r\n  const [mrp, setMrp] = useState(initial.mrp ?? \"\");\r\n  const [stock, setStock] = useState(initial.stock ?? \"\");\r\n  const [sku, setSku] = useState(initial.sku || \"\");\r\n  const [brand, setBrand] = useState(initial.brand || \"\");\r\n  const [category, setCategory] = useState(initial.category || \"\");\r\n  const [sizesText, setSizesText] = useState(Array.isArray(initial.sizes) ? initial.sizes.join(\",\") : (initial.sizes || \"\"));\r\n  const [colorsText, setColorsText] = useState(Array.isArray(initial.colors) ? initial.colors.join(\",\") : (initial.colors || \"\"));\r\n  const [files, setFiles] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // update when initial changes\r\n    setTitle(initial.title || \"\");\r\n    setDescription(initial.description || \"\");\r\n    setPrice(initial.price ?? \"\");\r\n    setMrp(initial.mrp ?? \"\");\r\n    setStock(initial.stock ?? \"\");\r\n    setSku(initial.sku || \"\");\r\n    setBrand(initial.brand || \"\");\r\n    setCategory(initial.category || \"\");\r\n    setSizesText(Array.isArray(initial.sizes) ? initial.sizes.join(\",\") : (initial.sizes || \"\"));\r\n    setColorsText(Array.isArray(initial.colors) ? initial.colors.join(\",\") : (initial.colors || \"\"));\r\n    setFiles([]);\r\n  }, [initial]);\r\n\r\n  function handleFiles(e) {\r\n    setFiles(Array.from(e.target.files || []));\r\n  }\r\n\r\n  function gatherValues() {\r\n    const sizes = sizesText && sizesText.trim() ? sizesText.split(\",\").map(s => s.trim()).filter(Boolean) : [];\r\n    const colors = colorsText && colorsText.trim() ? colorsText.split(\",\").map(s => s.trim()).filter(Boolean) : [];\r\n    return {\r\n      title: title.trim(), description: description.trim(),\r\n      price: Number(price || 0), mrp: Number(mrp || 0),\r\n      stock: Number(stock || 0), sku: sku.trim(), brand: brand.trim(), category: category.trim(),\r\n      sizes, colors\r\n    };\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={(e) => {\r\n      e.preventDefault();\r\n      const values = gatherValues();\r\n      if (typeof onSave === \"function\") onSave(values, files);\r\n    }}>\r\n      <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 220px\", gap: 12 }}>\r\n        <div>\r\n          <label style={{ display: \"block\", marginBottom: 6 }}>\r\n            Title\r\n            <input value={title} onChange={(e) => setTitle(e.target.value)} required style={{ width: \"100%\", padding: 8, marginTop: 6 }} />\r\n          </label>\r\n\r\n          <label style={{ display: \"block\", marginBottom: 6 }}>\r\n            Description\r\n            <textarea value={description} onChange={(e) => setDescription(e.target.value)} rows={6} style={{ width: \"100%\", padding: 8, marginTop: 6 }} />\r\n          </label>\r\n\r\n          <div style={{ display: \"flex\", gap: 8 }}>\r\n            <label style={{ flex: 1 }}>\r\n              Price<br />\r\n              <input type=\"number\" value={price} onChange={(e) => setPrice(e.target.value)} style={{ width: \"100%\", padding: 8 }} />\r\n            </label>\r\n\r\n            <label style={{ width: 160 }}>\r\n              MRP<br />\r\n              <input type=\"number\" value={mrp} onChange={(e) => setMrp(e.target.value)} style={{ width: \"100%\", padding: 8 }} />\r\n            </label>\r\n          </div>\r\n\r\n          <div style={{ display: \"flex\", gap: 8, marginTop: 8 }}>\r\n            <label style={{ width: 160 }}>\r\n              Stock<br />\r\n              <input type=\"number\" value={stock} onChange={(e) => setStock(e.target.value)} style={{ width: \"100%\", padding: 8 }} />\r\n            </label>\r\n\r\n            <label style={{ flex: 1 }}>\r\n              SKU<br />\r\n              <input value={sku} onChange={(e) => setSku(e.target.value)} style={{ width: \"100%\", padding: 8 }} />\r\n            </label>\r\n          </div>\r\n\r\n          <div style={{ display: \"flex\", gap: 8, marginTop: 8 }}>\r\n            <label style={{ flex: 1 }}>\r\n              Brand<br />\r\n              <input value={brand} onChange={(e) => setBrand(e.target.value)} style={{ width: \"100%\", padding: 8 }} />\r\n            </label>\r\n\r\n            <label style={{ width: 200 }}>\r\n              Category<br />\r\n              <input value={category} onChange={(e) => setCategory(e.target.value)} style={{ width: \"100%\", padding: 8 }} />\r\n            </label>\r\n          </div>\r\n\r\n          <label style={{ display: \"block\", marginTop: 8 }}>\r\n            Sizes (comma separated)<br />\r\n            <input value={sizesText} onChange={(e) => setSizesText(e.target.value)} placeholder=\"S,M,L\" style={{ width: \"100%\", padding: 8, marginTop: 6 }} />\r\n          </label>\r\n\r\n          <label style={{ display: \"block\", marginTop: 8 }}>\r\n            Colors (comma separated)<br />\r\n            <input value={colorsText} onChange={(e) => setColorsText(e.target.value)} placeholder=\"red,blue\" style={{ width: \"100%\", padding: 8, marginTop: 6 }} />\r\n          </label>\r\n        </div>\r\n\r\n        <div>\r\n          <label style={{ display: \"block\", marginBottom: 8 }}>\r\n            Upload images<br />\r\n            <input type=\"file\" accept=\"image/*\" multiple onChange={handleFiles} />\r\n          </label>\r\n\r\n          {files.length > 0 && (\r\n            <div style={{ marginTop: 8 }}>\r\n              <div>Files to upload:</div>\r\n              <ul>\r\n                {files.map((f, i) => <li key={i}>{f.name} — {Math.round(f.size / 1024)} KB</li>)}\r\n              </ul>\r\n            </div>\r\n          )}\r\n\r\n          <div style={{ marginTop: 16 }}>\r\n            <button type=\"submit\" disabled={saving} style={{ padding: \"8px 16px\", marginRight: 8 }}>{saving ? \"Saving…\" : \"Save\"}</button>\r\n            <button type=\"button\" onClick={() => { /* parent handles cancel/navigate */ }} style={{ padding: \"8px 16px\" }}>Cancel</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","// frontend/src/admin/AdminAnnouncements.js\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nconst API_BASE = process.env.REACT_APP_API_URL || '';\r\n\r\nexport default function AdminAnnouncements() {\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [newText, setNewText] = useState('');\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    async function load() {\r\n      try {\r\n        const res = await fetch(`${API_BASE}/admin-api/settings/announcements`);\r\n        if (!res.ok) throw new Error('Failed to fetch');\r\n        const data = await res.json();\r\n        if (!mounted) return;\r\n        setMessages(Array.isArray(data.messages) ? data.messages : []);\r\n      } catch (err) {\r\n        if (mounted) setError('Unable to load announcements');\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  function addMessage() {\r\n    const t = (newText || '').trim();\r\n    if (!t) return;\r\n    setMessages(prev => [...prev, t]);\r\n    setNewText('');\r\n  }\r\n\r\n  function removeMessage(idx) {\r\n    setMessages(prev => prev.filter((_, i) => i !== idx));\r\n  }\r\n\r\n  function moveUp(idx) {\r\n    if (idx <= 0) return;\r\n    setMessages(prev => {\r\n      const copy = [...prev];\r\n      const [item] = copy.splice(idx, 1);\r\n      copy.splice(idx - 1, 0, item);\r\n      return copy;\r\n    });\r\n  }\r\n  function moveDown(idx) {\r\n    setMessages(prev => {\r\n      if (idx >= prev.length - 1) return prev;\r\n      const copy = [...prev];\r\n      const [item] = copy.splice(idx, 1);\r\n      copy.splice(idx + 1, 0, item);\r\n      return copy;\r\n    });\r\n  }\r\n\r\n  async function save() {\r\n    setSaving(true);\r\n    setError(null);\r\n    try {\r\n      const res = await fetch(`${API_BASE}/admin-api/settings/announcements`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ messages })\r\n      });\r\n      if (!res.ok) {\r\n        const txt = await res.text();\r\n        throw new Error(txt || 'Save failed');\r\n      }\r\n      alert('Announcements saved');\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError('Save failed');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }\r\n\r\n  if (loading) return <div>Loading announcements…</div>;\r\n\r\n  return (\r\n    <div style={{ padding: 12 }}>\r\n      <h3>Announcements</h3>\r\n      {error && <div style={{ color: 'red' }}>{error}</div>}\r\n      <div style={{ marginBottom: 8 }}>\r\n        <input value={newText} onChange={e => setNewText(e.target.value)} style={{ width: '70%', padding: 8 }} placeholder=\"New announcement\" />\r\n        <button onClick={addMessage} style={{ marginLeft: 8, padding: '8px 12px' }}>Add</button>\r\n      </div>\r\n\r\n      <div>\r\n        {messages.length === 0 && <div>No announcements</div>}\r\n        <ul style={{ listStyle: 'none', padding: 0 }}>\r\n          {messages.map((m, i) => (\r\n            <li key={i} style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 6 }}>\r\n              <div style={{ flex: 1 }}>{m}</div>\r\n              <div>\r\n                <button onClick={() => moveUp(i)} disabled={i === 0}>↑</button>\r\n                <button onClick={() => moveDown(i)} disabled={i === messages.length - 1} style={{ marginLeft: 6 }}>↓</button>\r\n                <button onClick={() => removeMessage(i)} style={{ marginLeft: 6 }}>Remove</button>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n\r\n      <div style={{ marginTop: 12 }}>\r\n        <button onClick={save} disabled={saving} style={{ padding: '8px 14px' }}>{saving ? 'Saving…' : 'Save announcements'}</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/admin/AdminPage.jsx\r\nimport React from \"react\";\r\nimport { Routes, Route, Link } from \"react-router-dom\";\r\nimport AdminProductList from \"./AdminProductList\";\r\nimport AdminProductEdit from \"./AdminProductEdit\";\r\nimport ProductForm from \"./ProductForm.jsx\"; // adjust path/name if your add/edit form filename differs\r\nimport AdminAnnouncements from \"./AdminAnnouncements\";\r\n\r\nexport default function AdminPage() {\r\n  console.debug(\"[AdminPage] mounted, location:\", window.location.pathname);\r\n\r\n  return (\r\n    <div>\r\n      <header style={{ padding: 20, borderBottom: \"1px solid #eee\" }}>\r\n        <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n          <h1 style={{ margin: 0 }}>Admin</h1>\r\n          <nav>\r\n            <Link to=\"/admin/products\" style={{ marginRight: 12 }}>Products</Link>\r\n            <Link to=\"/admin/announcements\" style={{ marginRight: 12 }}>Announcements</Link>\r\n            <Link to=\"/\">Back to site</Link>\r\n          </nav>\r\n        </div>\r\n      </header>\r\n\r\n      <main style={{ padding: 20 }}>\r\n        <Routes>\r\n          {/* Explicitly mount the debug-ready AdminProductList */}\r\n          <Route path=\"products\" element={<AdminProductList />} />\r\n          <Route path=\"products/new\" element={<ProductForm />} />\r\n          <Route path=\"products/:id\" element={<AdminProductEdit />} />\r\n          <Route path=\"announcements\" element={<AdminAnnouncements />} />\r\n          {/* Fallback — render product list for any other admin path */}\r\n          <Route path=\"*\" element={<AdminProductList />} />\r\n        </Routes>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["axiosInstance","axios","create","baseURL","process","withCredentials","timeout","interceptors","request","use","config","error","Promise","reject","response","AdminProductList","products","setProducts","useState","loading","setLoading","setError","actionMsg","setActionMsg","useNavigate","pickStock","p","_ref","_ref2","_ref3","_ref4","_p$stock","stock","qty","inventory","quantity","available","useEffect","cancelled","async","console","log","token","window","localStorage","getItem","headers","Authorization","concat","base","defaults","e","baseHasApi","test","endpoints","ep","res","get","status","data","list","Array","isArray","length","err","warn","message","url","resp","fetch","method","credentials","_objectSpread","statusText","ok","txt","text","catch","Error","json","fbErr","fetchProducts","_jsxs","style","padding","children","_jsx","color","String","marginTop","onClick","location","reload","display","justifyContent","alignItems","margin","gap","Link","to","overflowX","width","borderCollapse","minWidth","borderBottom","textAlign","map","idx","_ref5","_p$price","id","_id","slug","thumb","thumbnail","image","images","first","path","src","pickThumbnail","sku","code","alt","title","name","height","objectFit","borderRadius","onError","currentTarget","background","fontSize","fontWeight","category","cat","price","mrp","published","confirm","prev","filter","x","possible","deleted","r","delete","success","setTimeout","handleDelete","open","alert","NAMED_COLORS","white","silver","gray","black","red","maroon","yellow","olive","lime","green","aqua","teal","blue","navy","fuchsia","purple","pink","brown","orange","gold","peach","mustard","coral","hexToRgb","hex","g","b","clean","replace","trim","parseInt","substring","makeSlug","toLowerCase","sanitizeAlnum","arguments","undefined","toUpperCase","generateSku","brand","c","prefix","pb","slice","pc","counter","Math","abs","Date","now","padStart","AdminProductEdit","useParams","navigate","fileInputRef","useRef","colorPickerRef","colorPickerIndex","setColorPickerIndex","saving","setSaving","product","setProduct","videoUrl","colors","sizes","description","isPublished","slugEdited","setSlugEdited","skuEdited","setSkuEdited","existingImages","setExistingImages","keepMap","setKeepMap","selectedFiles","setSelectedFiles","swatches","setSwatches","normalizeToHexIfPossible","col","t","full","lower","handleChange","value","checked","target","arr","split","s","Boolean","seeded","populateFromProduct","join","imgs","it","forEach","normalized","listResp","found","find","load","previewUrl","URL","revokeObjectURL","mapped","Object","entries","v","onSubmit","preventDefault","bodyForProduct","Number","targetId","created","body","payload","post","createMinimalProduct","toString","uploadedUrls","pId","_lastErr","_lastErr$response","_lastErr$response$dat","_lastErr2","formData","FormData","append","file","candidates","lastErr","put","uploaded","f","_err$response","uploadFilesToProduct","finalImages","u","includes","push","finalBody","triedUrls","desc","savedResp","msg","updatedProduct","JSON","stringify","marginBottom","type","onChange","newSku","flexWrap","i","isHex","bg","suggestedName","best","bestDist","Infinity","h","dx","dy","dz","dist","_unused","nearestColorName","current","cur","click","openColorPickerAtIndex","border","boxShadow","cursor","maxWidth","wordBreak","_","removeSwatch","ref","val","copy","rows","disabled","toggleKeep","multiple","files","from","newSelected","createObjectURL","removeSelectedPreview","index","removed","splice","embed","raw","vMatch","match","short","_unused2","getYouTubeEmbedUrl","allow","allowFullScreen","ProductForm","_initial$price","_initial$mrp","_initial$stock","initial","onSave","setTitle","setDescription","setPrice","setMrp","setStock","setSku","setBrand","setCategory","sizesText","setSizesText","colorsText","setColorsText","setFiles","_initial$price2","_initial$mrp2","_initial$stock2","values","gatherValues","gridTemplateColumns","required","flex","placeholder","accept","round","size","marginRight","API_BASE","AdminAnnouncements","messages","setMessages","newText","setNewText","mounted","marginLeft","listStyle","m","item","moveDown","removeMessage","AdminPage","debug","pathname","Routes","Route","element"],"ignoreList":[],"sourceRoot":""}