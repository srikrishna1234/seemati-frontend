"use strict";(self.webpackChunkseemati_ladies_wear=self.webpackChunkseemati_ladies_wear||[]).push([[411],{2603:(t,e,n)=>{n.d(e,{J$:()=>s,Ku:()=>a});var i=n(5043);n(579);const r=(0,i.createContext)(null),o=(0,i.createContext)(null);function l(t){const e=t.reduce((t,e)=>t+Number(e.price||0)*(e.quantity||1),0),n=e>999?0:60,i=Math.round(.05*e);return{subtotal:e,shipping:n,tax:i,discount:0,total:e+n+i-0}}function s(){const t=(0,i.useContext)(r);return null!==t&&void 0!==t?t:{items:[],totals:l([])}}function a(){const t=(0,i.useContext)(o);return null!==t&&void 0!==t?t:()=>{}}},4411:(t,e,n)=>{n.r(e),n.d(e,{default:()=>h});var i=n(5043),r=n(8163),o=n(5026);const l=String("https://api.seemati.in/api").replace(/\/+$/,"");function s(t){if(!t)return"".concat(l,"/uploads/placeholder.png");const e="string"===typeof t?t:t.url||t.path||t.filename||"";return e?/^https?:\/\//i.test(e)||/^\/\//.test(e)?e:e.startsWith("/")?"".concat(l).concat(e):"".concat(l,"/uploads/").concat(e):"".concat(l,"/uploads/placeholder.png")}var a=n(8009),d=n(2603),c=n(579);const u="wishlist_v1";function p(){try{const t=localStorage.getItem(u)||"[]",e=JSON.parse(t);return Array.isArray(e)?e:[]}catch(t){return[]}}function f(t){try{localStorage.setItem(u,JSON.stringify(t));try{window.dispatchEvent(new Event("wishlist-updated"))}catch(e){}}catch(e){console.warn("saveWishlist failed",e)}}function g(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=document.body);const{count:n=20,spread:i=160,lifetime:r=900,colors:o=["#f59e0b","#ef4444","#10b981","#0b5cff","#7c3aed"]}=e,l=t.getBoundingClientRect(),s=document.createElement("div");s.style.position="absolute",s.style.left="".concat(l.left+window.scrollX,"px"),s.style.top="".concat(l.top+window.scrollY,"px"),s.style.width="".concat(l.width,"px"),s.style.height="".concat(l.height,"px"),s.style.pointerEvents="none",s.style.overflow="visible",s.style.zIndex=9999,document.body.appendChild(s);const a=l.width/2,d=l.height/2,c=[];for(let p=0;p<n;p++){const t=document.createElement("div"),e=Math.floor(8*Math.random())+6;t.style.position="absolute",t.style.left="".concat(a-e/2,"px"),t.style.top="".concat(d-e/2,"px"),t.style.width="".concat(e,"px"),t.style.height="".concat(e,"px"),t.style.borderRadius="4px",t.style.background=o[Math.floor(Math.random()*o.length)],t.style.opacity="1",t.style.transform="translate3d(0,0,0) scale(1)",t.style.willChange="transform, opacity",s.appendChild(t);const n=Math.random()*Math.PI*2,r=2+Math.random()*(i/30),l=Math.cos(n)*r,u=Math.sin(n)*r-1.5*Math.random(),p=10*(Math.random()-.5);c.push({el:t,x:a,y:d,vx:l,vy:u,rot:p})}const u=performance.now();requestAnimationFrame(function t(e){const n=e-u,i=Math.min(1,n/r);c.forEach(t=>{t.x+=t.vx,t.y+=t.vy,t.vy+=.06;const e=1-.6*i;t.el.style.transform="translate3d(".concat(t.x-a,"px, ").concat(t.y-d,"px, 0) rotate(").concat(t.rot*i,"deg) scale(").concat(Math.max(.2,e),")"),t.el.style.opacity=String(1-i)}),i<1?requestAnimationFrame(t):setTimeout(()=>{try{s.remove()}catch(t){}},60)})}function h(t){var e,n,l,u,h,m;let{products:v=[]}=t;const{slug:y}=(0,r.g)(),x=(0,r.Zp)(),b=(0,d.Ku)(),[j,w]=(0,i.useState)(()=>{try{var t;return Array.isArray(v)&&v.length>0&&(null!==(t=v.find(t=>t.slug===y||t._id===y||t.id===y))&&void 0!==t)?t:null}catch(e){return null}}),[A,k]=(0,i.useState)(!j),[I,S]=(0,i.useState)(null),[C,M]=(0,i.useState)(!1),_=(0,i.useRef)(null),{imgRef:N,onImgMouseMove:E,onImgEnter:R,onImgLeave:z}=function(){const t=(0,i.useRef)(null);return{imgRef:t,onImgMouseMove:function(e){const n=t.current;if(!n)return;const i=n.getBoundingClientRect(),r=e.clientX-i.left,o=e.clientY-i.top,l=r/i.width*100,s=o/i.height*100;n.style.transformOrigin="".concat(l,"% ").concat(s,"%")},onImgEnter:function(){const e=t.current;e&&(e.style.transition="transform 160ms cubic-bezier(.2,.9,.2,1)",e.style.transform="scale(1.22)",e.style.willChange="transform")},onImgLeave:function(){const e=t.current;e&&(e.style.transform="scale(1)",e.style.transition="transform 260ms cubic-bezier(.2,.9,.2,1)",setTimeout(()=>{e&&(e.style.willChange="")},300))}}}(),[q,W]=(0,i.useState)(!1),[T,P]=(0,i.useState)(null),[L,B]=(0,i.useState)(null),[F,O]=(0,i.useState)(1),[H,D]=(0,i.useState)([]),[J,U]=(0,i.useState)(0);(0,i.useEffect)(()=>{try{var t,e;const n=p(),i=null!==(t=null!==(e=null===j||void 0===j?void 0:j._id)&&void 0!==e?e:null===j||void 0===j?void 0:j.id)&&void 0!==t?t:null===j||void 0===j?void 0:j.slug;W(n.some(t=>{var e,n,r;return(null!==(e=null!==(n=null!==(r=t.productId)&&void 0!==r?r:t._id)&&void 0!==n?n:t.id)&&void 0!==e?e:t.slug)===i}))}catch(n){W(!1)}j&&(Array.isArray(j.colors)&&j.colors.length>0?P(t=>null!==t&&void 0!==t?t:j.colors[0]):P(null),Array.isArray(j.sizes)&&j.sizes.length>0?B(t=>null!==t&&void 0!==t?t:j.sizes[0]):B(null),O(1))},[null===j||void 0===j?void 0:j.slug,null===j||void 0===j?void 0:j.colors,null===j||void 0===j?void 0:j.sizes,null===j||void 0===j?void 0:j._id,null===j||void 0===j?void 0:j.id]),(0,i.useEffect)(()=>{let t=!0;return async function(){if(j)return void k(!1);k(!0),S(null);const e=["/api/products?slug=".concat(encodeURIComponent(y)),"/api/products/".concat(encodeURIComponent(y))];let n=null;for(const u of e)try{const e=await o.A.get(u);if(!t)return;const c=e.data;let p=null;var i,r;if(c)if(Array.isArray(c))p=null!==(i=null!==(r=c.find(t=>t.slug===y||t._id===y||t.id===y))&&void 0!==r?r:c[0])&&void 0!==i?i:null;else if(Array.isArray(c.products)){var l,s;p=null!==(l=null!==(s=c.products.find(t=>t.slug===y||t._id===y||t.id===y))&&void 0!==s?s:c.products[0])&&void 0!==l?l:null}else if(c.product)p=c.product;else if(c._id||c.slug||c.id)p=c;else if(c.items&&Array.isArray(c.items)){var a,d;p=null!==(a=null!==(d=c.items.find(t=>t.slug===y||t._id===y||t.id===y))&&void 0!==d?d:c.items[0])&&void 0!==a?a:null}if(p)return w(p),void k(!1);n="No product found in response from ".concat(u)}catch(c){n=c.message||String(c),console.warn("[ProductDetail] fetch error",c)}t&&(k(!1),w(null),S(n||"Product not found."))}(),()=>{t=!1}},[y]),(0,i.useEffect)(()=>{const t=Array.isArray(null===j||void 0===j?void 0:j.images)?[...j.images]:[];0===t.length&&null!==j&&void 0!==j&&j.image&&t.push(j.image),0===t.length&&null!==j&&void 0!==j&&j.thumbnail&&t.push(j.thumbnail);const e=function(t){if(!Array.isArray(t))return[];const e=new Set,n=[];for(const r of t)try{const t=s(r);if(!t)continue;if(e.has(t))continue;e.add(t),n.push(t)}catch(i){continue}return n}(t);D(e),U(0)},[null===j||void 0===j?void 0:j.images,null===j||void 0===j?void 0:j.image,null===j||void 0===j?void 0:j.thumbnail,null===j||void 0===j?void 0:j.slug,null===j||void 0===j?void 0:j._id]);const[Y,X]=(0,i.useState)(()=>{try{const t=(0,a.Bb)();return(0,a.x0)(Array.isArray(t)?{items:t}:t)}catch(t){return(0,a.x0)({items:[]})}});(0,i.useEffect)(()=>{function t(){try{const t=(0,a.Bb)(),e=(0,a.x0)(Array.isArray(t)?{items:t}:t);X(e)}catch(t){}}return window.addEventListener("cart-updated",t),t(),()=>window.removeEventListener("cart-updated",t)},[]);const K=(0,i.useCallback)(t=>{!H||H.length<=1||("ArrowLeft"===t.key&&U(t=>(t-1+H.length)%H.length),"ArrowRight"===t.key&&U(t=>(t+1)%H.length))},[H]);function Q(t){const e=Math.max(1,Math.floor(Number(t)||1));return j&&"number"===typeof j.stock?Math.min(e,Math.max(1,j.stock)):e}(0,i.useEffect)(()=>(window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)),[K]);const Z=Math.max(0,a.Nv-(Y.subtotal||0));if(A)return(0,c.jsx)("div",{style:{padding:24},children:(0,c.jsx)("p",{children:"Loading product\u2026"})});if(!j)return(0,c.jsxs)("div",{style:{padding:24},children:[(0,c.jsx)("p",{children:"Product not found."}),(0,c.jsx)(r.N_,{to:"/shop",children:"Back to shop"}),I?(0,c.jsxs)("div",{style:{color:"#b91c1c",marginTop:12},children:["Error: ",String(I)]}):null]});const $=(null===j||void 0===j?void 0:j.thumbnail)||(null===j||void 0===j?void 0:j.images)&&j.images[0]&&(j.images[0].url||j.images[0])||(null===j||void 0===j?void 0:j.image)||null,G=H.length>0?H[J]:s($);return(0,c.jsxs)("div",{style:{padding:24,position:"relative"},children:[(0,c.jsx)("button",{onClick:()=>x(-1),style:{marginBottom:12},children:"\u2190 Back"}),(0,c.jsxs)("div",{style:{display:"flex",gap:40},children:[(0,c.jsxs)("div",{style:{flex:"0 0 520px"},children:[(0,c.jsxs)("div",{ref:_,style:{width:"100%",height:520,borderRadius:8,border:"1px solid #f3f3f3",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",background:"#fff",position:"relative"},children:[H.length>1&&(0,c.jsx)("button",{onClick:()=>U(t=>(t-1+H.length)%H.length),"aria-label":"Previous image",style:{position:"absolute",left:8,top:"50%",transform:"translateY(-50%)",background:"rgba(255,255,255,0.9)",border:"none",padding:8,borderRadius:6,cursor:"pointer",zIndex:5},children:"\u25c0"}),(0,c.jsx)("img",{ref:N,src:G,alt:j.title,onMouseMove:E,onMouseEnter:R,onMouseLeave:z,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",display:"block",transition:"transform 180ms cubic-bezier(.2,.9,.2,1)",transform:"scale(1)"},onError:t=>{t.target.src=s(null)}}),H.length>1&&(0,c.jsx)("button",{onClick:()=>U(t=>(t+1)%H.length),"aria-label":"Next image",style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",background:"rgba(255,255,255,0.9)",border:"none",padding:8,borderRadius:6,cursor:"pointer",zIndex:5},children:"\u25b6"})]}),H.length>1&&(0,c.jsx)("div",{style:{display:"flex",gap:8,marginTop:12,flexWrap:"wrap"},children:H.map((t,e)=>(0,c.jsx)("button",{onClick:()=>U(e),style:{border:e===J?"2px solid #0b5cff":"1px solid #eee",padding:0,borderRadius:6,overflow:"hidden",width:76,height:76,background:"#fff",cursor:"pointer"},"aria-label":"Show image ".concat(e+1),children:(0,c.jsx)("img",{src:t,alt:"".concat(j.title,"-").concat(e),style:{width:"100%",height:"100%",objectFit:"cover"}})},t+e))}),H.length>1&&(0,c.jsxs)("div",{style:{marginTop:8,color:"#6b7280",fontSize:13},children:[J+1," / ",H.length]})]}),(0,c.jsxs)("div",{style:{flex:"1 1 auto",maxWidth:720},children:[(0,c.jsx)("h1",{style:{marginTop:0},children:j.title}),j.description&&(0,c.jsx)("p",{style:{color:"#374151"},children:j.description}),(0,c.jsxs)("div",{style:{marginTop:12},children:[(0,c.jsxs)("div",{style:{fontSize:14,color:"#6b7280",textDecoration:j.mrp>j.price?"line-through":"none"},children:["MRP: \u20b9",Number(null!==(e=null!==(n=null!==(l=j.mrp)&&void 0!==l?l:j.compareAtPrice)&&void 0!==n?n:j.price)&&void 0!==e?e:0).toFixed(2)]}),(0,c.jsxs)("div",{style:{marginTop:6,fontSize:22,fontWeight:800,color:"#0b5cff"},children:["\u20b9",Number(null!==(u=j.price)&&void 0!==u?u:0).toFixed(2)]})]}),Array.isArray(j.colors)&&j.colors.length>0&&(0,c.jsxs)("div",{style:{marginTop:14},children:[(0,c.jsx)("div",{style:{marginBottom:8,fontWeight:700},children:"Color"}),(0,c.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:j.colors.map(t=>{const e=T===t;return(0,c.jsx)("button",{onClick:()=>P(t),style:{padding:"8px 12px",borderRadius:8,border:e?"2px solid #0b5cff":"1px solid #e6e6e6",background:e?"#eef2ff":"#fff",cursor:"pointer"},children:t},t)})})]}),Array.isArray(j.sizes)&&j.sizes.length>0&&(0,c.jsxs)("div",{style:{marginTop:14},children:[(0,c.jsx)("div",{style:{marginBottom:8,fontWeight:700},children:"Size"}),(0,c.jsx)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:j.sizes.map(t=>{const e=L===t;return(0,c.jsx)("button",{onClick:()=>B(t),style:{padding:"8px 12px",borderRadius:8,border:e?"2px solid #0b5cff":"1px solid #e6e6e6",background:e?"#eef2ff":"#fff",cursor:"pointer"},children:t},t)})})]}),(0,c.jsxs)("div",{style:{marginTop:14,display:"flex",alignItems:"center",gap:8},children:[(0,c.jsx)("div",{style:{fontWeight:700},children:"Quantity"}),(0,c.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,c.jsx)("button",{onClick:function(){O(t=>Q(t-1))},style:{width:36,height:32},children:"-"}),(0,c.jsx)("input",{value:F,onChange:function(t){O(Q(t.target.value))},style:{width:60,textAlign:"center",padding:6}}),(0,c.jsx)("button",{onClick:function(){O(t=>Q(t+1))},style:{width:36,height:32},children:"+"})]}),"number"===typeof j.stock&&(0,c.jsxs)("div",{style:{marginLeft:12,color:"#6b7280"},children:["Stock: ",j.stock]})]}),(0,c.jsxs)("div",{style:{marginTop:18,display:"flex",gap:12},children:[(0,c.jsx)("button",{onClick:async function(t){var e,n,i,r,o,l,s,d,c,u;if(null===t||void 0===t||null===(e=t.preventDefault)||void 0===e||e.call(t),!j)return;if(Array.isArray(j.colors)&&j.colors.length>0&&!T)return void S("Please select a color.");if(Array.isArray(j.sizes)&&j.sizes.length>0&&!L)return void S("Please select a size.");M(!0),S(null);const p=null!==(n=null!==(i=null!==(r=j._id)&&void 0!==r?r:j.id)&&void 0!==i?i:j.slug)&&void 0!==n?n:Math.random().toString(36).slice(2,9),f=[p];T&&f.push("c:".concat(String(T))),L&&f.push("s:".concat(String(L)));const h={_id:f.join("|"),productId:p,slug:j.slug,title:null!==(o=null!==(l=j.title)&&void 0!==l?l:j.name)&&void 0!==o?o:"Product",price:Number(null!==(s=null!==(d=j.price)&&void 0!==d?d:j.salePrice)&&void 0!==s?s:0),images:null!==(c=j.images)&&void 0!==c?c:j.image?[{url:j.image}]:[],image:null!==(u=j.imageUrl)&&void 0!==u?u:j.images&&j.images[0]?j.images[0].url||j.images[0]:null,quantity:Q(F),meta:{color:null!==T&&void 0!==T?T:null,size:null!==L&&void 0!==L?L:null}};try{const e=await(0,a.Nk)(h,h.quantity);try{"function"===typeof b&&b({type:"INITIALIZE",payload:e})}catch(m){console.warn("[ProductDetail] context initialize failed:",m)}try{window.dispatchEvent(new Event("cart-updated"))}catch(t){}try{!function(e,n){try{const t="seemati_free_burst_done_v1",i="1"===localStorage.getItem(t);e>=a.Nv&&!i?(g(n||document.body,{count:30,spread:220,lifetime:1e3}),localStorage.setItem(t,"1")):e<a.Nv&&i&&localStorage.removeItem(t)}catch(t){console.warn("burst check failed",t)}}((0,a.x0)(e).subtotal||0,_.current||document.body)}catch(t){}}catch(m){console.error("Add to cart failed (product page):",m),S("Unable to add to cart. See console for details.")}finally{M(!1)}},disabled:C,style:{background:"#f59e0b",color:"#fff",border:"none",padding:"10px 14px",borderRadius:6,fontWeight:700,cursor:C?"progress":"pointer"},children:C?"Adding...":"Add to cart"}),(0,c.jsx)("button",{onClick:function(t){var e,n,i,r;if(null===t||void 0===t||null===(e=t.preventDefault)||void 0===e||e.call(t),!j)return;const o=null!==(n=null!==(i=null!==(r=j._id)&&void 0!==r?r:j.id)&&void 0!==i?i:j.slug)&&void 0!==n?n:null;if(!o)return;const l=p();let s;if(l.find(t=>{var e,n,i;return(null!==(e=null!==(n=null!==(i=t.productId)&&void 0!==i?i:t._id)&&void 0!==n?n:t.id)&&void 0!==e?e:t.slug)===o}))s=l.filter(t=>{var e,n,i;return(null!==(e=null!==(n=null!==(i=t.productId)&&void 0!==i?i:t._id)&&void 0!==n?n:t.id)&&void 0!==e?e:t.slug)!==o}),f(s),W(!1);else{var a,d,c,u,g,h;const t={productId:o,_id:null!==(a=j._id)&&void 0!==a?a:o,id:null!==(d=j.id)&&void 0!==d?d:o,slug:null!==(c=j.slug)&&void 0!==c?c:void 0,title:j.title,price:Number(null!==(u=j.price)&&void 0!==u?u:0),image:null!==(g=null!==(h=j.image)&&void 0!==h?h:j.images&&j.images[0]&&(j.images[0].url||j.images[0]))&&void 0!==g?g:null};s=[...l,t],f(s),W(!0)}},title:q?"Saved to wishlist":"Save for later","aria-pressed":q,style:{padding:"10px 14px",borderRadius:6,border:q?"1px solid #ef4444":"1px solid #e6e6e6",background:q?"#fff0f0":"#fff",color:q?"#ef4444":"#111",cursor:"pointer",fontWeight:700},children:q?"\u2665 Saved":"\u2661 Save"}),(0,c.jsx)(r.N_,{to:"/cart",children:(0,c.jsx)("button",{style:{padding:"10px 14px",borderRadius:6,border:"1px solid #ccc",background:"#fff"},children:"Go to cart"})})]}),I?(0,c.jsx)("div",{style:{color:"#b91c1c",marginTop:12},children:I}):null,(0,c.jsxs)("div",{style:{marginTop:18,color:"#6b7280"},children:[(0,c.jsxs)("div",{children:["Brand: ",null!==(h=j.brand)&&void 0!==h?h:"\u2014"]}),(0,c.jsxs)("div",{children:["Category: ",null!==(m=j.category)&&void 0!==m?m:"\u2014"]})]})]})]}),(0,c.jsx)("div",{"aria-hidden":"false",style:{position:"fixed",left:20,right:20,bottom:20,margin:"0 auto",maxWidth:980,background:"#e6fffa",border:"1px solid #bbf7d0",color:"#064e3b",padding:"12px 18px",borderRadius:999,boxShadow:"0 6px 18px rgba(2,6,23,0.06)",display:"flex",alignItems:"center",gap:12,justifyContent:"center",zIndex:9999},children:Z>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{style:{fontWeight:700},children:"\ud83d\udce6"}),(0,c.jsxs)("div",{style:{fontWeight:700},children:["Add \u20b9",Z.toFixed(2)," more to get free shipping."]}),(0,c.jsxs)("div",{style:{color:"#065f46"},children:["Subtotal \u20b9",(Y.subtotal||0).toFixed(2)]}),(0,c.jsx)("div",{style:{marginLeft:12},children:(0,c.jsx)("button",{onClick:()=>x("/cart"),style:{background:"#0b5cff",color:"#fff",padding:"8px 12px",borderRadius:6,border:"none"},children:"View Cart"})})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{style:{fontWeight:700},children:"\ud83c\udf89"}),(0,c.jsxs)("div",{style:{fontWeight:700},children:["You have free shipping! Subtotal \u20b9",(Y.subtotal||0).toFixed(2)]}),(0,c.jsx)("div",{style:{marginLeft:12},children:(0,c.jsx)("button",{onClick:()=>g(_.current||document.body,{count:36}),style:{background:"#10b981",color:"#fff",padding:"8px 12px",borderRadius:6,border:"none"},children:"Celebrate"})})]})})]})}},5026:(t,e,n)=>{n.d(e,{A:()=>r});const i=n(9722).A.create({baseURL:"https://api.seemati.in/api",withCredentials:!0,timeout:15e3,headers:{"Content-Type":"application/json",Accept:"application/json"}});i.interceptors.response.use(t=>t,t=>(t.response?console.error("API error:",t.response.status,t.response.data||t.response.statusText):console.error("Network error:",t.message),Promise.reject(t)));const r=i},8009:(t,e,n)=>{n.d(e,{Ai:()=>f,Bb:()=>s,Nk:()=>u,Nv:()=>o,Rq:()=>p,o2:()=>a,sX:()=>g,x0:()=>c});var i=n(9379);const r="seemati_cart_v1",o=999,l=60;function s(){try{const t=localStorage.getItem(r);if(!t)return{items:[]};const e=function(t){try{return JSON.parse(t)}catch(e){return null}}(t);if(!e)return{items:[]};if(Array.isArray(e))return{items:e};if(e.items&&Array.isArray(e.items))return e;for(const n of Object.keys(e))if(Array.isArray(e[n]))return{items:e[n]};return{items:[]}}catch(t){return console.error("[cartHelpers] loadCart error",t),{items:[]}}}function a(t){try{const n=Array.isArray(t)?{items:t}:t&&t.items?{items:t.items}:{items:[]};localStorage.setItem(r,JSON.stringify(n.items));try{window.dispatchEvent(new Event("cart-updated"))}catch(e){}return n}catch(e){return console.error("[cartHelpers] saveCart error",e),{items:[]}}}function d(t){var e,n,r,o,l,s,a,d,c,u,p,f,g;const h=function(t){var e,n,i,r,o;return null!==(e=null!==(n=null!==(i=null!==(r=t.productId)&&void 0!==r?r:t._id)&&void 0!==i?i:t.id)&&void 0!==n?n:t.slug)&&void 0!==e?e:String(null!==(o=t.title)&&void 0!==o?o:Math.random().toString(36).slice(2,9))}(t);return(0,i.A)({productId:h,_id:null!==(e=t._id)&&void 0!==e?e:h,id:null!==(n=t.id)&&void 0!==n?n:h,slug:null!==(r=t.slug)&&void 0!==r?r:void 0,title:null!==(o=null!==(l=t.title)&&void 0!==l?l:t.name)&&void 0!==o?o:"Product",price:Number(null!==(s=null!==(a=null!==(d=t.price)&&void 0!==d?d:t.salePrice)&&void 0!==a?a:t.amount)&&void 0!==s?s:0),image:null!==(c=null!==(u=t.image)&&void 0!==u?u:t.images&&t.images[0]&&(t.images[0].url||t.images[0]))&&void 0!==c?c:null,images:null!==(p=t.images)&&void 0!==p?p:t.image?[{url:t.image}]:[],quantity:Math.max(1,Number(null!==(f=null!==(g=t.quantity)&&void 0!==g?g:t.qty)&&void 0!==f?f:1))},Object.keys(t).reduce((e,n)=>(["productId","_id","id","slug","title","price","image","images","quantity"].includes(n)||(e[n]=t[n]),e),{}))}function c(t){const e=(Array.isArray(t)?{items:t}:t||{items:[]}).items||[],n=e.reduce((t,e)=>t+Number(e.price||0)*Number(e.quantity||e.qty||0),0),i=n>=o?0:l,r=Math.round(.05*n);return{items:e,subtotal:n,shipping:i,tax:r,discount:0,total:n+i+r-0}}function u(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{const n=s(),r=Array.isArray(n.items)?[...n.items]:[],o=d(t),l=o.productId,c=r.findIndex(t=>{var e,n,i;return(null!==(e=null!==(n=null!==(i=t.productId)&&void 0!==i?i:t._id)&&void 0!==n?n:t.id)&&void 0!==e?e:t.slug)===l});if(c>-1){const t=(0,i.A)({},r[c]);t.quantity=Math.min(99,Number(t.quantity||t.qty||0)+Number(e||1)),r[c]=t}else o.quantity=Math.max(1,Number(e||o.quantity||1)),r.push(o);return a(r)}catch(n){return console.error("[cartHelpers] addOrIncrementItem error",n),s()}}function p(t,e){try{const n=(s().items||[]).map(n=>{var r,o,l;return(null!==(r=null!==(o=null!==(l=n.productId)&&void 0!==l?l:n._id)&&void 0!==o?o:n.id)&&void 0!==r?r:n.slug)===t?(0,i.A)((0,i.A)({},n),{},{quantity:Math.max(0,Math.floor(Number(e)||0))}):n}).filter(t=>Number(t.quantity||0)>0);return a(n)}catch(n){return console.error("[cartHelpers] setItemQuantity error",n),s()}}function f(t){try{const e=(s().items||[]).filter(e=>{var n,i,r;return(null!==(n=null!==(i=null!==(r=e.productId)&&void 0!==r?r:e._id)&&void 0!==i?i:e.id)&&void 0!==n?n:e.slug)!==t});return a(e)}catch(e){return console.error("[cartHelpers] removeItem error",e),s()}}function g(){try{return a([])}catch(t){return console.error("[cartHelpers] clearCart error",t),{items:[]}}}}}]);
//# sourceMappingURL=411.b891a5e6.chunk.js.map