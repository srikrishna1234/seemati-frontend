{"version":3,"file":"static/js/269.f1b117b5.chunk.js","mappings":"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","sources":["context/CartContext.jsx","pages/WishlistPage.jsx"],"sourcesContent":["// src/context/CartContext.jsx\r\nimport React, { createContext, useReducer, useContext, useEffect } from \"react\";\r\n\r\nconst CartStateContext = createContext(null);\r\nconst CartDispatchContext = createContext(null);\r\n\r\nconst CART_KEY = \"seemati_cart_v1\";\r\n\r\nfunction loadCart() {\r\n  try {\r\n    const raw = localStorage.getItem(CART_KEY);\r\n    return raw ? JSON.parse(raw) : { items: [] };\r\n  } catch {\r\n    return { items: [] };\r\n  }\r\n}\r\n\r\nfunction saveCart(state) {\r\n  try {\r\n    localStorage.setItem(CART_KEY, JSON.stringify(state));\r\n  } catch {}\r\n}\r\n\r\nfunction calculateTotals(items) {\r\n  const subtotal = items.reduce(\r\n    (s, it) => s + Number(it.price || 0) * (it.quantity || 1),\r\n    0\r\n  );\r\n  const shipping = subtotal > 999 ? 0 : 60; // Free shipping above ₹999\r\n  const tax = Math.round(subtotal * 0.05); // Example: 5% tax\r\n  const discount = 0;\r\n  const total = subtotal + shipping + tax - discount;\r\n  return { subtotal, shipping, tax, discount, total };\r\n}\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"INITIALIZE\": {\r\n      return action.payload;\r\n    }\r\n    case \"ADD_ITEM\": {\r\n      const item = action.payload;\r\n      const items = [...state.items];\r\n      const idx = items.findIndex((i) => i.productId === item.productId);\r\n      if (idx > -1) {\r\n        items[idx].quantity = Math.min(\r\n          99,\r\n          (items[idx].quantity || 1) + (item.quantity || 1)\r\n        );\r\n      } else {\r\n        items.push({ ...item, quantity: item.quantity || 1 });\r\n      }\r\n      const totals = calculateTotals(items);\r\n      const next = { ...state, items, totals };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    case \"SET_QTY\": {\r\n      const { productId, quantity } = action.payload;\r\n      const items = state.items.map((i) =>\r\n        i.productId === productId\r\n          ? { ...i, quantity: Math.max(1, quantity) }\r\n          : i\r\n      );\r\n      const totals = calculateTotals(items);\r\n      const next = { ...state, items, totals };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    case \"REMOVE_ITEM\": {\r\n      const items = state.items.filter(\r\n        (i) => i.productId !== action.payload.productId\r\n      );\r\n      const totals = calculateTotals(items);\r\n      const next = { ...state, items, totals };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    case \"CLEAR_CART\": {\r\n      const next = { items: [], totals: calculateTotals([]) };\r\n      saveCart(next);\r\n      return next;\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function CartProvider({ children }) {\r\n  const [state, dispatch] = useReducer(reducer, {\r\n    items: [],\r\n    totals: calculateTotals([]),\r\n  });\r\n\r\n  // initialize once from localStorage\r\n  useEffect(() => {\r\n    const init = loadCart();\r\n    if (!init.totals) init.totals = calculateTotals(init.items || []);\r\n    dispatch({ type: \"INITIALIZE\", payload: init });\r\n  }, []);\r\n\r\n  return (\r\n    <CartStateContext.Provider value={state}>\r\n      <CartDispatchContext.Provider value={dispatch}>\r\n        {children}\r\n      </CartDispatchContext.Provider>\r\n    </CartStateContext.Provider>\r\n  );\r\n}\r\n\r\n// SAFE consumer hooks: never return undefined\r\nexport function useCartState() {\r\n  const ctx = useContext(CartStateContext);\r\n  return ctx ?? { items: [], totals: calculateTotals([]) };\r\n}\r\n\r\nexport function useCartDispatch() {\r\n  const dispatch = useContext(CartDispatchContext);\r\n  return dispatch ?? (() => {});\r\n}\r\n\r\n// ✅ Option A additions (for compatibility with /contexts shim)\r\nexport const useCart = useCartState;   // alias for uniform naming\r\nexport default CartProvider;           // default export for easy import\r\n","// src/pages/WishlistPage.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useCartDispatch } from \"../context/CartContext\";\r\n\r\nconst WISHLIST_KEY = \"wishlist_v1\";\r\n\r\nfunction readWishlist() {\r\n  try {\r\n    const raw = localStorage.getItem(WISHLIST_KEY) || \"[]\";\r\n    return JSON.parse(raw);\r\n  } catch (e) {\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction writeWishlist(arr) {\r\n  try {\r\n    localStorage.setItem(WISHLIST_KEY, JSON.stringify(arr || []));\r\n    window.dispatchEvent(new CustomEvent(\"wishlist-updated\", { detail: { count: (arr || []).length } }));\r\n  } catch (e) {\r\n    console.error(\"writeWishlist failed\", e);\r\n  }\r\n}\r\n\r\nexport default function WishlistPage() {\r\n  const [items, setItems] = useState(readWishlist());\r\n  const navigate = useNavigate();\r\n  const cartDispatch = useCartDispatch();\r\n\r\n  useEffect(() => {\r\n    function onUpdate() {\r\n      setItems(readWishlist());\r\n    }\r\n    window.addEventListener(\"wishlist-updated\", onUpdate);\r\n    return () => window.removeEventListener(\"wishlist-updated\", onUpdate);\r\n  }, []);\r\n\r\n  function removeItem(id) {\r\n    const next = items.filter((it) => (it._id || it.id || it.productId) !== id);\r\n    writeWishlist(next);\r\n    setItems(next);\r\n  }\r\n\r\n  function moveToCart(it) {\r\n    try {\r\n      const entry = {\r\n        productId: it._id || it.id || it.productId,\r\n        title: it.title,\r\n        price: Number(it.price) || 0,\r\n        mrp: it.mrp || null,\r\n        quantity: 1,\r\n        image: it.image || null,\r\n        rawProduct: it.raw || null,\r\n      };\r\n      cartDispatch({ type: \"ADD_ITEM\", payload: entry });\r\n      // optionally remove from wishlist\r\n      removeItem(it._id || it.id || it.productId);\r\n      alert(\"Moved to cart\");\r\n      navigate(\"/cart\");\r\n    } catch (e) {\r\n      console.error(\"moveToCart failed\", e);\r\n      alert(\"Failed to move to cart\");\r\n    }\r\n  }\r\n\r\n  if (!items || items.length === 0) {\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto p-6\">\r\n        <h2 className=\"text-2xl font-semibold mb-4\">Wishlist</h2>\r\n        <div className=\"text-gray-600\">Your wishlist is empty.</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-6\">\r\n      <h2 className=\"text-2xl font-semibold mb-4\">Wishlist</h2>\r\n      <div style={{ display: \"grid\", gap: 12 }}>\r\n        {items.map((it) => {\r\n          const id = it._id || it.id || it.productId;\r\n          return (\r\n            <div key={id} style={{ display: \"flex\", gap: 12, alignItems: \"center\", border: \"1px solid #eee\", padding: 12, borderRadius: 8 }}>\r\n              <div style={{ width: 110, height: 110, display: \"flex\", alignItems: \"center\", justifyContent: \"center\", background: \"#fafafa\", borderRadius: 6 }}>\r\n                {it.image ? <img src={it.image} alt={it.title} style={{ maxWidth: \"100%\", maxHeight: \"100%\", objectFit: \"contain\" }} /> : <div style={{ color: \"#9ca3af\" }}>No image</div>}\r\n              </div>\r\n\r\n              <div style={{ flex: 1 }}>\r\n                <div style={{ fontWeight: 700 }}>{it.title}</div>\r\n                <div style={{ marginTop: 6 }}>\r\n                  <span style={{ fontWeight: 700, color: \"#166534\", marginRight: 8 }}>₹{Number(it.price || 0).toLocaleString(\"en-IN\")}</span>\r\n                  {it.mrp ? <span style={{ textDecoration: \"line-through\", color: \"#6b7280\", marginRight: 8 }}>₹{Number(it.mrp).toLocaleString(\"en-IN\")}</span> : null}\r\n                </div>\r\n\r\n                <div style={{ marginTop: 8, display: \"flex\", gap: 8 }}>\r\n                  <button onClick={() => moveToCart(it)} style={{ background: \"#f59e0b\", color: \"#fff\", padding: \"8px 12px\", borderRadius: 8, border: \"none\", cursor: \"pointer\" }}>Move to cart</button>\r\n                  <button onClick={() => removeItem(id)} style={{ padding: \"8px 12px\", borderRadius: 8, border: \"1px solid #e5e7eb\", background: \"#fff\", cursor: \"pointer\" }}>Remove</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CartStateContext","createContext","CartDispatchContext","calculateTotals","items","subtotal","reduce","s","it","Number","price","quantity","shipping","tax","Math","round","discount","total","useCartState","ctx","useContext","totals","useCartDispatch","dispatch","WISHLIST_KEY","readWishlist","raw","localStorage","getItem","JSON","parse","e","WishlistPage","setItems","useState","navigate","useNavigate","cartDispatch","removeItem","id","next","filter","_id","productId","arr","setItem","stringify","window","dispatchEvent","CustomEvent","detail","count","length","console","error","writeWishlist","useEffect","onUpdate","addEventListener","removeEventListener","_jsxs","className","children","_jsx","style","display","gap","map","alignItems","border","padding","borderRadius","width","height","justifyContent","background","image","src","alt","title","maxWidth","maxHeight","objectFit","color","flex","fontWeight","marginTop","marginRight","toLocaleString","mrp","textDecoration","onClick","entry","rawProduct","type","payload","alert","moveToCart","cursor"],"ignoreList":[],"sourceRoot":""}